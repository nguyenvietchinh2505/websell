(window.webpackJsonp=window.webpackJsonp||[]).push([[26,0,5,20,25,34],Array(134).concat([function(e,t,n){var r;try{r={cloneDeep:n(439),constant:n(231),defaults:n(440),each:n(279),filter:n(282),find:n(441),flatten:n(305),forEach:n(280),forIn:n(445),has:n(241),isUndefined:n(291),last:n(446),map:n(292),mapValues:n(447),max:n(448),merge:n(450),min:n(456),minBy:n(457),now:n(349),pick:n(458),range:n(463),reduce:n(294),sortBy:n(466),uniqueId:n(471),values:n(298),zipObject:n(472)}}catch(e){}r||(r=window._),e.exports=r},,function(e,t,n){"use strict";var r=n(134),o=n(143).Graph;function a(e,t,n,o){var a;do{a=r.uniqueId(o)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function i(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:a,simplify:function(e){var t=(new o).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,a=e.y,i=t.x-o,c=t.y-a,u=e.width/2,l=e.height/2;if(!i&&!c)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(c)*u>Math.abs(i)*l?(c<0&&(l=-l),n=l*i/c,r=l):(i<0&&(u=-u),n=u,r=u*c/i);return{x:o+n,y:a+r}},buildLayerMatrix:function(e){var t=r.map(r.range(i(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var o=e.node(n),a=o.rank;r.isUndefined(a)||(t[a][o.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,a=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%a!=0?--o:o&&r.forEach(t,(function(t){e.node(t).rank+=o}))}))},addBorderNode:function(e,t,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return a(e,"border",o,t)},maxRank:i,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n(0),o=n(9),a=n.n(o),i=["component","children"];function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=Object(r.createContext)(2);function l(e){return Object(r.createElement)(u.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function s(e){var t=e.component,n=e.children,o=c(e,i),a=t||"div";return Object(r.createElement)(u.Consumer,null,(function(e){return Object(r.createElement)(u.Provider,{value:e+1},!1===t?n:Object(r.createElement)(a,o,n))}))}s.propTypes={component:a.a.oneOfType([a.a.func,a.a.string,a.a.bool]),children:a.a.node}},function(e,t,n){var r;try{r={clone:n(367),constant:n(231),each:n(279),filter:n(282),has:n(241),isArray:n(135),isEmpty:n(256),isFunction:n(218),isUndefined:n(291),keys:n(151),map:n(292),reduce:n(294),size:n(410),transform:n(415),union:n(416),values:n(298)}}catch(e){}r||(r=window._),e.exports=r},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return xu})),n.d(t,"b",(function(){return vu})),n.d(t,"c",(function(){return wu})),n.d(t,"d",(function(){return jc})),n.d(t,"e",(function(){return ku})),n.d(t,"f",(function(){return Zc})),n.d(t,"g",(function(){return Di})),n.d(t,"h",(function(){return Ti})),n.d(t,"i",(function(){return Ni})),n.d(t,"j",(function(){return ct})),n.d(t,"k",(function(){return Ge})),n.d(t,"l",(function(){return Xe})),n.d(t,"m",(function(){return dc}));var r=n(2),o=n.n(r),a=n(42),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=l(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var f="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},p={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function b(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(h)(e,t)}if("function"!=typeof e)throw new Error(s(2));var o=e,a=t,i=[],c=i,u=!1;function l(){c===i&&(c=i.slice())}function d(){if(u)throw new Error(s(3));return a}function m(e){if("function"!=typeof e)throw new Error(s(4));if(u)throw new Error(s(5));var t=!0;return l(),c.push(e),function(){if(t){if(u)throw new Error(s(6));t=!1,l();var n=c.indexOf(e);c.splice(n,1),i=null}}}function y(e){if(!b(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(u)throw new Error(s(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=i=c,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error(s(10));o=e,y({type:p.REPLACE})}function g(){var e,t=m;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[f]=function(){return this},e}return y({type:p.INIT}),(r={dispatch:y,subscribe:m,getState:d,replaceReducer:v})[f]=g,r}function m(e,t){return function(){return t(e.apply(this,arguments))}}function y(e,t){if("function"==typeof e)return m(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=m(o,t))}return n}function v(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var g={exports:{}},O={exports:{}},w={},j="function"==typeof Symbol&&Symbol.for,E=j?Symbol.for("react.element"):60103,_=j?Symbol.for("react.portal"):60106,S=j?Symbol.for("react.fragment"):60107,x=j?Symbol.for("react.strict_mode"):60108,k=j?Symbol.for("react.profiler"):60114,C=j?Symbol.for("react.provider"):60109,N=j?Symbol.for("react.context"):60110,P=j?Symbol.for("react.async_mode"):60111,T=j?Symbol.for("react.concurrent_mode"):60111,D=j?Symbol.for("react.forward_ref"):60112,M=j?Symbol.for("react.suspense"):60113,R=j?Symbol.for("react.suspense_list"):60120,I=j?Symbol.for("react.memo"):60115,A=j?Symbol.for("react.lazy"):60116,F=j?Symbol.for("react.block"):60121,B=j?Symbol.for("react.fundamental"):60117,L=j?Symbol.for("react.responder"):60118,z=j?Symbol.for("react.scope"):60119;function q(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case P:case T:case S:case k:case x:case M:return e;default:switch(e=e&&e.$$typeof){case N:case D:case A:case I:case C:return e;default:return t}}case _:return t}}}function Y(e){return q(e)===T}w.AsyncMode=P,w.ConcurrentMode=T,w.ContextConsumer=N,w.ContextProvider=C,w.Element=E,w.ForwardRef=D,w.Fragment=S,w.Lazy=A,w.Memo=I,w.Portal=_,w.Profiler=k,w.StrictMode=x,w.Suspense=M,w.isAsyncMode=function(e){return Y(e)||q(e)===P},w.isConcurrentMode=Y,w.isContextConsumer=function(e){return q(e)===N},w.isContextProvider=function(e){return q(e)===C},w.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},w.isForwardRef=function(e){return q(e)===D},w.isFragment=function(e){return q(e)===S},w.isLazy=function(e){return q(e)===A},w.isMemo=function(e){return q(e)===I},w.isPortal=function(e){return q(e)===_},w.isProfiler=function(e){return q(e)===k},w.isStrictMode=function(e){return q(e)===x},w.isSuspense=function(e){return q(e)===M},w.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===S||e===T||e===k||e===x||e===M||e===R||"object"==typeof e&&null!==e&&(e.$$typeof===A||e.$$typeof===I||e.$$typeof===C||e.$$typeof===N||e.$$typeof===D||e.$$typeof===B||e.$$typeof===L||e.$$typeof===z||e.$$typeof===F)},w.typeOf=q,O.exports=w;var U=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;function X(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign;function K(e,t,n,r,o){}K.resetWarningCache=function(){0};O.exports,Function.call.bind(Object.prototype.hasOwnProperty);function G(){}function $(){}$.resetWarningCache=G;g.exports=function(){function e(e,t,n,r,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$,resetWarningCache:G};return n.PropTypes=n,n}();g.exports;var W=o.a.createContext(null);var Z=function(e){e()},Q=function(){return Z};var J={notify:function(){},get:function(){return[]}};function ee(e,t){var n,r=J;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=Q(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=J)},getListeners:function(){return r}};return i}var te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function ne(e){var t=e.store,n=e.context,a=e.children,i=Object(r.useMemo)((function(){var e=ee(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(r.useMemo)((function(){return t.getState()}),[t]);te((function(){var e=i.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,c]);var u=n||W;return o.a.createElement(u.Provider,{value:i},a)}var re=O.exports,oe={};oe[re.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oe[re.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ae={},ie=60103,ce=60106,ue=60107,le=60108,se=60114,fe=60109,de=60110,pe=60112,be=60113,he=60120,me=60115,ye=60116,ve=60121,ge=60122,Oe=60117,we=60129,je=60131;if("function"==typeof Symbol&&Symbol.for){var Ee=Symbol.for;ie=Ee("react.element"),ce=Ee("react.portal"),ue=Ee("react.fragment"),le=Ee("react.strict_mode"),se=Ee("react.profiler"),fe=Ee("react.provider"),de=Ee("react.context"),pe=Ee("react.forward_ref"),be=Ee("react.suspense"),he=Ee("react.suspense_list"),me=Ee("react.memo"),ye=Ee("react.lazy"),ve=Ee("react.block"),ge=Ee("react.server.block"),Oe=Ee("react.fundamental"),we=Ee("react.debug_trace_mode"),je=Ee("react.legacy_hidden")}function _e(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ie:switch(e=e.type){case ue:case se:case le:case be:case he:return e;default:switch(e=e&&e.$$typeof){case de:case pe:case ye:case me:case fe:return e;default:return t}}case ce:return t}}}var Se=fe,xe=ie,ke=pe,Ce=ue,Ne=ye,Pe=me,Te=ce,De=se,Me=le,Re=be;function Ie(){return Object(r.useContext)(W)}function Ae(e){void 0===e&&(e=W);var t=e===W?Ie:function(){return Object(r.useContext)(e)};return function(){return t().store}}ae.ContextConsumer=de,ae.ContextProvider=Se,ae.Element=xe,ae.ForwardRef=ke,ae.Fragment=Ce,ae.Lazy=Ne,ae.Memo=Pe,ae.Portal=Te,ae.Profiler=De,ae.StrictMode=Me,ae.Suspense=Re,ae.isAsyncMode=function(){return!1},ae.isConcurrentMode=function(){return!1},ae.isContextConsumer=function(e){return _e(e)===de},ae.isContextProvider=function(e){return _e(e)===fe},ae.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ie},ae.isForwardRef=function(e){return _e(e)===pe},ae.isFragment=function(e){return _e(e)===ue},ae.isLazy=function(e){return _e(e)===ye},ae.isMemo=function(e){return _e(e)===me},ae.isPortal=function(e){return _e(e)===ce},ae.isProfiler=function(e){return _e(e)===se},ae.isStrictMode=function(e){return _e(e)===le},ae.isSuspense=function(e){return _e(e)===be},ae.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ue||e===se||e===we||e===le||e===be||e===he||e===je||"object"==typeof e&&null!==e&&(e.$$typeof===ye||e.$$typeof===me||e.$$typeof===fe||e.$$typeof===de||e.$$typeof===pe||e.$$typeof===Oe||e.$$typeof===ve||e[0]===ge)},ae.typeOf=_e;var Fe=Ae();function Be(e){void 0===e&&(e=W);var t=e===W?Fe:Ae(e);return function(){return t().dispatch}}var Le=Be(),ze=function(e,t){return e===t};function qe(e){void 0===e&&(e=W);var t=e===W?Ie:function(){return Object(r.useContext)(e)};return function(e,n){void 0===n&&(n=ze);var o=t(),a=function(e,t,n,o){var a,i=Object(r.useReducer)((function(e){return e+1}),0)[1],c=Object(r.useMemo)((function(){return ee(n,o)}),[n,o]),u=Object(r.useRef)(),l=Object(r.useRef)(),s=Object(r.useRef)(),f=Object(r.useRef)(),d=n.getState();try{if(e!==l.current||d!==s.current||u.current){var p=e(d);a=void 0!==f.current&&t(p,f.current)?f.current:p}else a=f.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return te((function(){l.current=e,s.current=d,f.current=a,u.current=void 0})),te((function(){function e(){try{var e=n.getState();if(e===s.current)return;var r=l.current(e);if(t(r,f.current))return;f.current=r,s.current=e}catch(e){u.current=e}i()}return c.onStateChange=e,c.trySubscribe(),e(),function(){return c.tryUnsubscribe()}}),[n,c]),a}(e,n,o.store,o.subscription);return Object(r.useDebugValue)(a),a}}var Ye,Ue=qe();function Ve(e,t){return{type:e,payload:t}}Ye=a.unstable_batchedUpdates,Z=Ye;var He=Object.freeze({__proto__:null,setOnConnect:function(e){return Ve("SET_ON_CONNECT",{onConnect:e})},setOnConnectStart:function(e){return Ve("SET_ON_CONNECT_START",{onConnectStart:e})},setOnConnectStop:function(e){return Ve("SET_ON_CONNECT_STOP",{onConnectStop:e})},setOnConnectEnd:function(e){return Ve("SET_ON_CONNECT_END",{onConnectEnd:e})},setElements:function(e){return Ve("SET_ELEMENTS",e)},updateNodeDimensions:function(e){return Ve("UPDATE_NODE_DIMENSIONS",e)},updateNodePos:function(e){return Ve("UPDATE_NODE_POS",e)},updateNodePosDiff:function(e){return Ve("UPDATE_NODE_POS_DIFF",e)},setUserSelection:function(e){return Ve("SET_USER_SELECTION",e)},updateUserSelection:function(e){return Ve("UPDATE_USER_SELECTION",e)},unsetUserSelection:function(){return Ve("UNSET_USER_SELECTION")},setSelection:function(e){return Ve("SET_SELECTION",{selectionActive:e})},unsetNodesSelection:function(){return Ve("UNSET_NODES_SELECTION",{nodesSelectionActive:!1})},resetSelectedElements:function(){return Ve("RESET_SELECTED_ELEMENTS",{selectedElements:null})},setSelectedElements:function(e){return Ve("SET_SELECTED_ELEMENTS",e)},addSelectedElements:function(e){return Ve("ADD_SELECTED_ELEMENTS",e)},updateTransform:function(e){return Ve("UPDATE_TRANSFORM",{transform:e})},updateSize:function(e){return Ve("UPDATE_SIZE",{width:e.width||500,height:e.height||500})},initD3Zoom:function(e){return Ve("INIT_D3ZOOM",e)},setMinZoom:function(e){return Ve("SET_MINZOOM",e)},setMaxZoom:function(e){return Ve("SET_MAXZOOM",e)},setTranslateExtent:function(e){return Ve("SET_TRANSLATEEXTENT",e)},setConnectionPosition:function(e){return Ve("SET_CONNECTION_POSITION",{connectionPosition:e})},setConnectionNodeId:function(e){return Ve("SET_CONNECTION_NODEID",e)},setSnapToGrid:function(e){return Ve("SET_SNAPTOGRID",{snapToGrid:e})},setSnapGrid:function(e){return Ve("SET_SNAPGRID",{snapGrid:e})},setInteractive:function(e){return Ve("SET_INTERACTIVE",{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e})},setNodesDraggable:function(e){return Ve("SET_NODES_DRAGGABLE",{nodesDraggable:e})},setNodesConnectable:function(e){return Ve("SET_NODES_CONNECTABLE",{nodesConnectable:e})},setElementsSelectable:function(e){return Ve("SET_ELEMENTS_SELECTABLE",{elementsSelectable:e})},setMultiSelectionActive:function(e){return Ve("SET_MULTI_SELECTION_ACTIVE",{multiSelectionActive:e})},setConnectionMode:function(e){return Ve("SET_CONNECTION_MODE",{connectionMode:e})},setNodeExtent:function(e){return Ve("SET_NODE_EXTENT",e)}});function Xe(e){var t=Le(),n=e(He);return Object(r.useMemo)((function(){return y(n,t)}),[t,n])}var Ke=Ue,Ge=function(){return Fe()};function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function Ze(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||We(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||We(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Je=function(e){var t=null==e?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(null==t?void 0:t.nodeName)||(null==t?void 0:t.hasAttribute("contenteditable"))},et=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},nt=function(e,t){return{x:tt(e.x,t[0][0],t[1][0]),y:tt(e.y,t[0][1],t[1][1])}},rt=function(e){var t=Qe(Object(r.useState)(!1),2),n=t[0],o=t[1];return Object(r.useEffect)((function(){if(void 0!==e){var t=function(t){Je(t)||t.key!==e&&t.keyCode!==e||(t.preventDefault(),o(!0))},n=function(t){Je(t)||t.key!==e&&t.keyCode!==e||o(!1)},r=function(){return o(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("blur",r),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("blur",r)}}}),[e,o]),n};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=function(e){return"id"in e&&"source"in e&&"target"in e},ct=function(e){return"id"in e&&!("source"in e)&&!("target"in e)},ut=function(e,t,n,r){var o=e.x,a=e.y,i=Qe(t,3),c=i[0],u=i[1],l=i[2],s=Qe(r,2),f=s[0],d=s[1],p={x:(o-c)/l,y:(a-u)/l};return n?{x:f*Math.round(p.x/f),y:d*Math.round(p.y/d)}:p},lt=function(e){return function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)}},st=function(e,t){return at(at({},e),{},{id:e.id.toString(),type:e.type||"default",__rf:{position:nt(e.position,t),width:null,height:null,handleBounds:{},isDragging:!1}})},ft=function(e){return at(at({},e),{},{source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?e.sourceHandle.toString():null,targetHandle:e.targetHandle?e.targetHandle.toString():null,id:e.id.toString(),type:e.type||"default"})},dt=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},pt=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},bt=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},ht=function(e){var t=e.reduce((function(e,t){var n=t.__rf,r=(n=void 0===n?{}:n).position,o=n.width,a=n.height;return dt(e,pt(at(at({},r),{},{width:o,height:a})))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bt(t)},mt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=Qe(n,3),o=r[0],a=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=pt({x:(t.x-o)/i,y:(t.y-a)/i,width:t.width/i,height:t.height/i});return e.filter((function(e){var t=e.selectable,n=void 0===t||t,r=e.__rf,o=r.position,a=r.width,i=r.height,s=r.isDragging;if(u&&!n)return!1;var f=pt(at(at({},o),{},{width:a,height:i})),d=Math.max(0,Math.min(l.x2,f.x2)-Math.max(l.x,f.x)),p=Math.max(0,Math.min(l.y2,f.y2)-Math.max(l.y,f.y)),b=Math.ceil(d*p);return!(null!==a&&null!==i&&!s)||(c?b>0:b>=a*i)}))},yt=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},vt=function(e,t){return[].concat(Ze(e.map((function(e){var t=at({},e);return t.position=t.__rf.position,delete t.__rf,t}))),Ze(t.map((function(e){return at({},e)}))))},gt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges;return vt(r,void 0===o?[]:o)}},Ot=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges,a=void 0===o?[]:o,i=t.transform;return{elements:vt(r,a),position:[i[0],i[1]],zoom:i[2]}}},wt=function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,i=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(i,c),l=tt(u,r,o),s=e.x+e.width/2,f=e.y+e.height/2,d=t/2-s*l,p=n/2-f*l;return[d,p,l]},jt={value:()=>{}};function Et(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new _t(r)}function _t(e){this._=e}function St(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function xt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function kt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=jt,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}_t.prototype=Et.prototype={constructor:_t,on:function(e,t){var n,r=this._,o=St(e+"",r),a=-1,i=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=kt(r[n],e.name,t);else if(null==t)for(n in r)r[n]=kt(r[n],e.name,null);return this}for(;++a<i;)if((n=(e=o[a]).type)&&(n=xt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _t(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var Ct="http://www.w3.org/1999/xhtml",Nt={svg:"http://www.w3.org/2000/svg",xhtml:Ct,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Pt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Nt.hasOwnProperty(t)?{space:Nt[t],local:e}:e}function Tt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ct&&t.documentElement.namespaceURI===Ct?t.createElement(e):t.createElementNS(n,e)}}function Dt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Mt(e){var t=Pt(e);return(t.local?Dt:Tt)(t)}function Rt(){}function It(e){return null==e?Rt:function(){return this.querySelector(e)}}function At(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Ft(){return[]}function Bt(e){return null==e?Ft:function(){return this.querySelectorAll(e)}}function Lt(e){return function(){return this.matches(e)}}function zt(e){return function(t){return t.matches(e)}}var qt=Array.prototype.find;function Yt(){return this.firstElementChild}var Ut=Array.prototype.filter;function Vt(){return Array.from(this.children)}function Ht(e){return new Array(e.length)}function Xt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Kt(e){return function(){return e}}function Gt(e,t,n,r,o,a){for(var i,c=0,u=t.length,l=a.length;c<l;++c)(i=t[c])?(i.__data__=a[c],r[c]=i):n[c]=new Xt(e,a[c]);for(;c<u;++c)(i=t[c])&&(o[c]=i)}function $t(e,t,n,r,o,a,i){var c,u,l,s=new Map,f=t.length,d=a.length,p=new Array(f);for(c=0;c<f;++c)(u=t[c])&&(p[c]=l=i.call(u,u.__data__,c,t)+"",s.has(l)?o[c]=u:s.set(l,u));for(c=0;c<d;++c)l=i.call(e,a[c],c,a)+"",(u=s.get(l))?(r[c]=u,u.__data__=a[c],s.delete(l)):n[c]=new Xt(e,a[c]);for(c=0;c<f;++c)(u=t[c])&&s.get(p[c])===u&&(o[c]=u)}function Wt(e){return e.__data__}function Zt(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Qt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jt(e){return function(){this.removeAttribute(e)}}function en(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tn(e,t){return function(){this.setAttribute(e,t)}}function nn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function on(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function an(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cn(e){return function(){this.style.removeProperty(e)}}function un(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ln(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function sn(e,t){return e.style.getPropertyValue(t)||an(e).getComputedStyle(e,null).getPropertyValue(t)}function fn(e){return function(){delete this[e]}}function dn(e,t){return function(){this[e]=t}}function pn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function bn(e){return e.trim().split(/^|\s+/)}function hn(e){return e.classList||new mn(e)}function mn(e){this._node=e,this._names=bn(e.getAttribute("class")||"")}function yn(e,t){for(var n=hn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function vn(e,t){for(var n=hn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gn(e){return function(){yn(this,e)}}function On(e){return function(){vn(this,e)}}function wn(e,t){return function(){(t.apply(this,arguments)?yn:vn)(this,e)}}function jn(){this.textContent=""}function En(e){return function(){this.textContent=e}}function _n(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Sn(){this.innerHTML=""}function xn(e){return function(){this.innerHTML=e}}function kn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Cn(){this.nextSibling&&this.parentNode.appendChild(this)}function Nn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pn(){return null}function Tn(){var e=this.parentNode;e&&e.removeChild(this)}function Dn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Rn(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function In(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function An(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,c=o.length;i<c;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Fn(e,t,n){var r=an(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Bn(e,t){return function(){return Fn(this,e,t)}}function Ln(e,t){return function(){return Fn(this,e,t.apply(this,arguments))}}Xt.prototype={constructor:Xt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},mn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var zn=[null];function qn(e,t){this._groups=e,this._parents=t}function Yn(){return new qn([[document.documentElement]],zn)}function Un(e){return"string"==typeof e?new qn([[document.querySelector(e)]],[document.documentElement]):new qn([[e]],zn)}function Vn(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}qn.prototype=Yn.prototype={constructor:qn,select:function(e){"function"!=typeof e&&(e=It(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,c=t[o],u=c.length,l=r[o]=new Array(u),s=0;s<u;++s)(a=c[s])&&(i=e.call(a,a.__data__,s,c))&&("__data__"in a&&(i.__data__=a.__data__),l[s]=i);return new qn(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return At(e.apply(this,arguments))}}(e):Bt(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,c=t[a],u=c.length,l=0;l<u;++l)(i=c[l])&&(r.push(e.call(i,i.__data__,l,c)),o.push(i));return new qn(r,o)},selectChild:function(e){return this.select(null==e?Yt:function(e){return function(){return qt.call(this.children,e)}}("function"==typeof e?e:zt(e)))},selectChildren:function(e){return this.selectAll(null==e?Vt:function(e){return function(){return Ut.call(this.children,e)}}("function"==typeof e?e:zt(e)))},filter:function(e){"function"!=typeof e&&(e=Lt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new qn(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Wt);var n=t?$t:Gt,r=this._parents,o=this._groups;"function"!=typeof e&&(e=Kt(e));for(var a=o.length,i=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var s=r[l],f=o[l],d=f.length,p=Zt(e.call(s,s&&s.__data__,l,r)),b=p.length,h=c[l]=new Array(b),m=i[l]=new Array(b),y=u[l]=new Array(d);n(s,f,h,m,y,p,t);for(var v,g,O=0,w=0;O<b;++O)if(v=h[O]){for(O>=w&&(w=O+1);!(g=m[w])&&++w<b;);v._next=g||null}}return(i=new qn(i,r))._enter=c,i._exit=u,i},enter:function(){return new qn(this._enter||this._groups.map(Ht),this._parents)},exit:function(){return new qn(this._exit||this._groups.map(Ht),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),c=new Array(o),u=0;u<i;++u)for(var l,s=n[u],f=r[u],d=s.length,p=c[u]=new Array(d),b=0;b<d;++b)(l=s[b]||f[b])&&(p[b]=l);for(;u<o;++u)c[u]=n[u];return new qn(c,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Qt);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,c=n[a],u=c.length,l=o[a]=new Array(u),s=0;s<u;++s)(i=c[s])&&(l[s]=i);l.sort(t)}return new qn(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,c=a.length;i<c;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=Pt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?en:Jt:"function"==typeof t?n.local?on:rn:n.local?nn:tn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?cn:"function"==typeof t?ln:un)(e,t,null==n?"":n)):sn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?fn:"function"==typeof t?pn:dn)(e,t)):this.node()[e]},classed:function(e,t){var n=bn(e+"");if(arguments.length<2){for(var r=hn(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?wn:t?gn:On)(n,t))},text:function(e){return arguments.length?this.each(null==e?jn:("function"==typeof e?_n:En)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Sn:("function"==typeof e?kn:xn)(e)):this.node().innerHTML},raise:function(){return this.each(Cn)},lower:function(){return this.each(Nn)},append:function(e){var t="function"==typeof e?e:Mt(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:Mt(e),r=null==t?Pn:"function"==typeof t?t:It(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Tn)},clone:function(e){return this.select(e?Mn:Dn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=Rn(e+""),i=a.length;if(!(arguments.length<2)){for(c=t?An:In,r=0;r<i;++r)this.each(c(a[r],t,n));return this}var c=this.node().__on;if(c)for(var u,l=0,s=c.length;l<s;++l)for(r=0,u=c[l];r<i;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Ln:Bn)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};const Hn={capture:!0,passive:!1};function Xn(e){e.preventDefault(),e.stopImmediatePropagation()}function Kn(e){var t=e.document.documentElement,n=Un(e).on("dragstart.drag",Xn,Hn);"onselectstart"in t?n.on("selectstart.drag",Xn,Hn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Gn(e,t){var n=e.document.documentElement,r=Un(e).on("dragstart.drag",null);t&&(r.on("click.drag",Xn,Hn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function $n(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zn(){}var Qn="\\s*([+-]?\\d+)\\s*",Jn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tr=/^#([0-9a-f]{3,8})$/,nr=new RegExp("^rgb\\("+[Qn,Qn,Qn]+"\\)$"),rr=new RegExp("^rgb\\("+[er,er,er]+"\\)$"),or=new RegExp("^rgba\\("+[Qn,Qn,Qn,Jn]+"\\)$"),ar=new RegExp("^rgba\\("+[er,er,er,Jn]+"\\)$"),ir=new RegExp("^hsl\\("+[Jn,er,er]+"\\)$"),cr=new RegExp("^hsla\\("+[Jn,er,er,Jn]+"\\)$"),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lr(){return this.rgb().formatHex()}function sr(){return this.rgb().formatRgb()}function fr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?dr(t):3===n?new mr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?pr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?pr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=nr.exec(e))?new mr(t[1],t[2],t[3],1):(t=rr.exec(e))?new mr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=or.exec(e))?pr(t[1],t[2],t[3],t[4]):(t=ar.exec(e))?pr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ir.exec(e))?Or(t[1],t[2]/100,t[3]/100,1):(t=cr.exec(e))?Or(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?dr(ur[e]):"transparent"===e?new mr(NaN,NaN,NaN,0):null}function dr(e){return new mr(e>>16&255,e>>8&255,255&e,1)}function pr(e,t,n,r){return r<=0&&(e=t=n=NaN),new mr(e,t,n,r)}function br(e){return e instanceof Zn||(e=fr(e)),e?new mr((e=e.rgb()).r,e.g,e.b,e.opacity):new mr}function hr(e,t,n,r){return 1===arguments.length?br(e):new mr(e,t,n,null==r?1:r)}function mr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function yr(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)}function vr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function gr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Or(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jr(e,t,n,r)}function wr(e){if(e instanceof jr)return new jr(e.h,e.s,e.l,e.opacity);if(e instanceof Zn||(e=fr(e)),!e)return new jr;if(e instanceof jr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,c=a-o,u=(a+o)/2;return c?(i=t===a?(n-r)/c+6*(n<r):n===a?(r-t)/c+2:(t-n)/c+4,c/=u<.5?a+o:2-a-o,i*=60):c=u>0&&u<1?0:i,new jr(i,c,u,e.opacity)}function jr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Er(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}$n(Zn,fr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:lr,formatHex:lr,formatHsl:function(){return wr(this).formatHsl()},formatRgb:sr,toString:sr}),$n(mr,hr,Wn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new mr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yr,formatHex:yr,formatRgb:vr,toString:vr})),$n(jr,(function(e,t,n,r){return 1===arguments.length?wr(e):new jr(e,t,n,null==r?1:r)}),Wn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new jr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new jr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new mr(Er(e>=240?e-240:e+120,o,r),Er(e,o,r),Er(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var _r=e=>()=>e;function Sr(e){return 1==(e=+e)?xr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):_r(isNaN(t)?n:t)}}function xr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):_r(isNaN(e)?t:e)}var kr=function e(t){var n=Sr(t);function r(e,t){var r=n((e=hr(e)).r,(t=hr(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=xr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Cr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Nr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pr=new RegExp(Nr.source,"g");function Tr(e,t){var n,r,o,a=Nr.lastIndex=Pr.lastIndex=0,i=-1,c=[],u=[];for(e+="",t+="";(n=Nr.exec(e))&&(r=Pr.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),c[i]?c[i]+=o:c[++i]=o),(n=n[0])===(r=r[0])?c[i]?c[i]+=r:c[++i]=r:(c[++i]=null,u.push({i:i,x:Cr(n,r)})),a=Pr.lastIndex;return a<t.length&&(o=t.slice(a),c[i]?c[i]+=o:c[++i]=o),c.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)c[(n=u[r]).i]=n.x(e);return c.join("")})}var Dr,Mr=180/Math.PI,Rr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ir(e,t,n,r,o,a){var i,c,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Mr,skewX:Math.atan(u)*Mr,scaleX:i,scaleY:c}}function Ar(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var c=[],u=[];return a=e(a),i=e(i),function(e,r,o,a,i,c){if(e!==o||r!==a){var u=i.push("translate(",null,t,null,n);c.push({i:u-4,x:Cr(e,o)},{i:u-2,x:Cr(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,c,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Cr(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,c,u),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Cr(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,c,u),function(e,t,n,r,a,i){if(e!==n||t!==r){var c=a.push(o(a)+"scale(",null,",",null,")");i.push({i:c-4,x:Cr(e,n)},{i:c-2,x:Cr(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,c,u),a=i=null,function(e){for(var t,n=-1,r=u.length;++n<r;)c[(t=u[n]).i]=t.x(e);return c.join("")}}}var Fr=Ar((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Rr:Ir(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Br=Ar((function(e){return null==e?Rr:(Dr||(Dr=document.createElementNS("http://www.w3.org/2000/svg","g")),Dr.setAttribute("transform",e),(e=Dr.transform.baseVal.consolidate())?Ir((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Rr)}),", ",")",")");function Lr(e){return((e=Math.exp(e))+1/e)/2}var zr,qr,Yr=function e(t,n,r){function o(e,o){var a,i,c=e[0],u=e[1],l=e[2],s=o[0],f=o[1],d=o[2],p=s-c,b=f-u,h=p*p+b*b;if(h<1e-12)i=Math.log(d/l)/t,a=function(e){return[c+e*p,u+e*b,l*Math.exp(t*e*i)]};else{var m=Math.sqrt(h),y=(d*d-l*l+r*h)/(2*l*n*m),v=(d*d-l*l-r*h)/(2*d*n*m),g=Math.log(Math.sqrt(y*y+1)-y),O=Math.log(Math.sqrt(v*v+1)-v);i=(O-g)/t,a=function(e){var r=e*i,o=Lr(g),a=l/(n*m)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[c+a*p,u+a*b,l*o/Lr(t*r+g)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),Ur=0,Vr=0,Hr=0,Xr=0,Kr=0,Gr=0,$r="object"==typeof performance&&performance.now?performance:Date,Wr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return Kr||(Wr(Qr),Kr=$r.now()+Gr)}function Qr(){Kr=0}function Jr(){this._call=this._time=this._next=null}function eo(e,t,n){var r=new Jr;return r.restart(e,t,n),r}function to(){Kr=(Xr=$r.now())+Gr,Ur=Vr=0;try{!function(){Zr(),++Ur;for(var e,t=zr;t;)(e=Kr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Ur}()}finally{Ur=0,function(){var e,t,n=zr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:zr=t);qr=e,ro(r)}(),Kr=0}}function no(){var e=$r.now(),t=e-Xr;t>1e3&&(Gr-=t,Xr=e)}function ro(e){Ur||(Vr&&(Vr=clearTimeout(Vr)),e-Kr>24?(e<1/0&&(Vr=setTimeout(to,e-$r.now()-Gr)),Hr&&(Hr=clearInterval(Hr))):(Hr||(Xr=$r.now(),Hr=setInterval(no,1e3)),Ur=1,Wr(to)))}function oo(e,t,n){var r=new Jr;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}Jr.prototype=eo.prototype={constructor:Jr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Zr():+n)+(null==t?0:+t),this._next||qr===this||(qr?qr._next=this:zr=this,qr=this),this._call=e,this._time=n,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};var ao=Et("start","end","cancel","interrupt"),io=[];function co(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(u){var l,s,f,d;if(1!==n.state)return c();for(l in o)if((d=o[l]).name===n.name){if(3===d.state)return oo(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[l])}if(oo((function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,s=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=d);r.length=s+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=eo((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:ao,tween:io,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function uo(e,t){var n=so(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function lo(e,t){var n=so(e,t);if(n.state>3)throw new Error("too late; already running");return n}function so(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fo(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}function po(e,t){var n,r;return function(){var o=lo(this,e),a=o.tween;if(a!==n)for(var i=0,c=(r=n=a).length;i<c;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function bo(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=lo(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var c={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=c;break}u===l&&o.push(c)}a.tween=o}}function ho(e,t,n){var r=e._id;return e.each((function(){var e=lo(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return so(e,r).value[t]}}function mo(e,t){var n;return("number"==typeof t?Cr:t instanceof fr?kr:(n=fr(t))?(t=n,kr):Tr)(e,t)}function yo(e){return function(){this.removeAttribute(e)}}function vo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function go(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function Oo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function wo(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttribute(e))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttribute(e)}}function jo(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttributeNS(e.space,e.local))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttributeNS(e.space,e.local)}}function Eo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _o(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function So(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&_o(e,o)),n}return o._value=t,o}function xo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Eo(e,o)),n}return o._value=t,o}function ko(e,t){return function(){uo(this,e).delay=+t.apply(this,arguments)}}function Co(e,t){return t=+t,function(){uo(this,e).delay=t}}function No(e,t){return function(){lo(this,e).duration=+t.apply(this,arguments)}}function Po(e,t){return t=+t,function(){lo(this,e).duration=t}}function To(e,t){if("function"!=typeof t)throw new Error;return function(){lo(this,e).ease=t}}function Do(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?uo:lo;return function(){var i=a(this,e),c=i.on;c!==r&&(o=(r=c).copy()).on(t,n),i.on=o}}var Mo=Yn.prototype.constructor;function Ro(e){return function(){this.style.removeProperty(e)}}function Io(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ao(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Io(e,a,n)),r}return a._value=t,a}function Fo(e){return function(t){this.textContent=e.call(this,t)}}function Bo(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Fo(r)),t}return r._value=e,r}var Lo=0;function zo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function qo(){return++Lo}var Yo=Yn.prototype;zo.prototype={constructor:zo,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=It(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var c,u,l=r[i],s=l.length,f=a[i]=new Array(s),d=0;d<s;++d)(c=l[d])&&(u=e.call(c,c.__data__,d,l))&&("__data__"in c&&(u.__data__=c.__data__),f[d]=u,co(f[d],t,n,d,f,so(c,n)));return new zo(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Bt(e));for(var r=this._groups,o=r.length,a=[],i=[],c=0;c<o;++c)for(var u,l=r[c],s=l.length,f=0;f<s;++f)if(u=l[f]){for(var d,p=e.call(u,u.__data__,f,l),b=so(u,n),h=0,m=p.length;h<m;++h)(d=p[h])&&co(d,t,n,h,p,b);a.push(p),i.push(u)}return new zo(a,i,t,n)},selectChild:Yo.selectChild,selectChildren:Yo.selectChildren,filter:function(e){"function"!=typeof e&&(e=Lt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new zo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),c=0;c<a;++c)for(var u,l=t[c],s=n[c],f=l.length,d=i[c]=new Array(f),p=0;p<f;++p)(u=l[p]||s[p])&&(d[p]=u);for(;c<r;++c)i[c]=t[c];return new zo(i,this._parents,this._name,this._id)},selection:function(){return new Mo(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=qo(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)if(i=c[l]){var s=so(i,t);co(i,e,n,l,c,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new zo(r,this._parents,e,n)},call:Yo.call,nodes:Yo.nodes,node:Yo.node,size:Yo.size,empty:Yo.empty,each:Yo.each,on:function(e,t){var n=this._id;return arguments.length<2?so(this.node(),n).on.on(e):this.each(Do(n,e,t))},attr:function(e,t){var n=Pt(e),r="transform"===n?Br:mo;return this.attrTween(e,"function"==typeof t?(n.local?jo:wo)(n,r,ho(this,"attr."+e,t)):null==t?(n.local?vo:yo)(n):(n.local?Oo:go)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Pt(e);return this.tween(n,(r.local?So:xo)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Fr:mo;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=sn(this,e),i=(this.style.removeProperty(e),sn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,Ro(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=sn(this,e),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(e),u=c=sn(this,e)),i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,c))}}(e,r,ho(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,c="end."+i;return function(){var u=lo(this,e),l=u.on,s=null==u.value[i]?a||(a=Ro(t)):void 0;l===n&&o===s||(r=(n=l).copy()).on(c,o=s),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=sn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Ao(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ho(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Bo(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=so(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?po:bo)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ko:Co)(t,e)):so(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?No:Po)(t,e)):so(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(To(t,e)):so(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;lo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(a,i){var c={value:i},u={value:function(){0==--o&&a()}};n.each((function(){var n=lo(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(c),t._.interrupt.push(c),t._.end.push(u)),n.on=t})),0===o&&a()}))},[Symbol.iterator]:Yo[Symbol.iterator]};var Uo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Vo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Yn.prototype.interrupt=function(e){return this.each((function(){fo(this,e)}))},Yn.prototype.transition=function(e){var t,n;e instanceof zo?(t=e._id,e=e._name):(t=qo(),(n=Uo).time=Zr(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)(i=c[l])&&co(i,e,t,l,c,n||Vo(i,t));return new zo(r,this._parents,e,t)};var Ho=e=>()=>e;function Xo(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Ko(e,t,n){this.k=e,this.x=t,this.y=n}Ko.prototype={constructor:Ko,scale:function(e){return 1===e?this:new Ko(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Ko(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Go=new Ko(1,0,0);function $o(e){e.stopImmediatePropagation()}function Wo(e){e.preventDefault(),e.stopImmediatePropagation()}function Zo(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Qo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Jo(){return this.__zoom||Go}function ea(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ta(){return navigator.maxTouchPoints||"ontouchstart"in this}function na(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}var ra,oa,aa,ia,ca,ua;!function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(ra||(ra={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(oa||(oa={})),function(e){e.Lines="lines",e.Dots="dots"}(aa||(aa={})),function(e){e.Strict="strict",e.Loose="loose"}(ia||(ia={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(ca||(ca={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ua||(ua={}));var la=function(e){return{x:e.x,y:e.y,zoom:e.k}},sa=function(e){return e.target.closest(".nowheel")},fa=function(e){var t=e.onMove,n=e.onMoveStart,a=e.onMoveEnd,i=e.zoomOnScroll,c=void 0===i||i,u=e.zoomOnPinch,l=void 0===u||u,s=e.panOnScroll,f=void 0!==s&&s,d=e.panOnScrollSpeed,p=void 0===d?.5:d,b=e.panOnScrollMode,h=void 0===b?ua.Free:b,m=e.zoomOnDoubleClick,y=void 0===m||m,v=e.selectionKeyPressed,g=e.elementsSelectable,O=e.paneMoveable,w=void 0===O||O,j=e.defaultPosition,E=void 0===j?[0,0]:j,_=e.defaultZoom,S=void 0===_?1:_,x=e.translateExtent,k=e.zoomActivationKeyCode,C=e.preventScrolling,N=void 0===C||C,P=e.children,T=Object(r.useRef)(null),D=Object(r.useRef)({x:0,y:0,zoom:0}),M=Ge(),R=Ke((function(e){return e.d3Zoom})),I=Ke((function(e){return e.d3Selection})),A=Ke((function(e){return e.d3ZoomHandler})),F=Xe((function(e){return e.initD3Zoom})),B=Xe((function(e){return e.updateTransform})),L=rt(k);return function(e){var t=Xe((function(e){return e.updateSize}));Object(r.useEffect)((function(){var n,r=function(){if(e.current){var n=et(e.current);0!==n.height&&0!==n.width||console.warn("The React Flow parent container needs a width and a height to render the graph."),t(n)}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver((function(){return r()}))).observe(e.current),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}}),[])}(T),Object(r.useEffect)((function(){if(T.current){var e=M.getState(),t=void 0!==x?x:e.translateExtent,n=function(){var e,t,n,r=Zo,o=Qo,a=na,i=ea,c=ta,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Yr,d=Et("start","zoom","end"),p=0,b=10;function h(e){e.property("__zoom",Jo).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",_).filter(c).on("touchstart.zoom",S).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function m(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Ko(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Ko(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function g(e,t,n,r){e.on("start.zoom",(function(){O(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){O(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,a=arguments,i=O(e,a).event(r),c=o.apply(e,a),u=null==n?v(c):"function"==typeof n?n.apply(e,a):n,l=Math.max(c[1][0]-c[0][0],c[1][1]-c[0][1]),s=e.__zoom,d="function"==typeof t?t.apply(e,a):t,p=f(s.invert(u).concat(l/s.k),d.invert(u).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=l/t[2];e=new Ko(n,u[0]-t[0]*n,u[1]-t[1]*n)}i.zoom(null,e)}}))}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function j(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),o=this.__zoom,c=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,i.apply(this,arguments)))),s=Vn(e);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=o.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(o.k===c)return;n.mouse=[s,o.invert(s)],fo(this),n.start()}Wo(e),n.wheel=setTimeout(f,150),n.zoom("mouse",a(y(m(o,c),n.mouse[0],n.mouse[1]),n.extent,l))}function f(){n.wheel=null,n.end()}}function E(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=O(this,t,!0).event(e),c=Un(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",b,!0),u=Vn(e,o),s=e.clientX,f=e.clientY;Kn(e.view),$o(e),i.mouse=[u,this.__zoom.invert(u)],fo(this),i.start()}function d(e){if(Wo(e),!i.moved){var t=e.clientX-s,n=e.clientY-f;i.moved=t*t+n*n>p}i.event(e).zoom("mouse",a(y(i.that.__zoom,i.mouse[0]=Vn(e,o),i.mouse[1]),i.extent,l))}function b(e){c.on("mousemove.zoom mouseup.zoom",null),Gn(e.view,i.moved),Wo(e),i.event(e).end()}}function _(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=Vn(e.changedTouches?e.changedTouches[0]:e,this),c=n.invert(i),u=n.k*(e.shiftKey?.5:2),f=a(y(m(n,u),i,c),o.apply(this,t),l);Wo(e),s>0?Un(this).transition().duration(s).call(g,f,i,e):Un(this).call(h.transform,f,i,e)}}function S(n,...o){if(r.apply(this,arguments)){var a,i,c,u,l=n.touches,s=l.length,f=O(this,o,n.changedTouches.length===s).event(n);for($o(n),i=0;i<s;++i)u=[u=Vn(c=l[i],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),fo(this),f.start())}}function x(e,...t){if(this.__zooming){var n,r,o,i,c=O(this,t).event(e),u=e.changedTouches,s=u.length;for(Wo(e),n=0;n<s;++n)o=Vn(r=u[n],this),c.touch0&&c.touch0[2]===r.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===r.identifier&&(c.touch1[0]=o);if(r=c.that.__zoom,c.touch1){var f=c.touch0[0],d=c.touch0[1],p=c.touch1[0],b=c.touch1[1],h=(h=p[0]-f[0])*h+(h=p[1]-f[1])*h,v=(v=b[0]-d[0])*v+(v=b[1]-d[1])*v;r=m(r,Math.sqrt(h/v)),o=[(f[0]+p[0])/2,(f[1]+p[1])/2],i=[(d[0]+b[0])/2,(d[1]+b[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],i=c.touch0[1]}c.zoom("touch",a(y(r,o,i),c.extent,l))}}function k(e,...r){if(this.__zooming){var o,a,i=O(this,r).event(e),c=e.changedTouches,u=c.length;for($o(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<u;++o)a=c[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=Vn(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<b)){var l=Un(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return h.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Jo),e!==o?g(e,t,n,r):o.interrupt().each((function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},h.scaleBy=function(e,t,n,r){h.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},h.scaleTo=function(e,t,n,r){h.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,c=r.invert(i),u="function"==typeof t?t.apply(this,arguments):t;return a(y(m(r,u),i,c),e,l)}),n,r)},h.translateBy=function(e,t,n,r){h.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)}),null,r)},h.translateTo=function(e,t,n,r,i){h.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,c=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return a(Go.translate(c[0],c[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Un(this.that).datum();d.call(e,this.that,new Xo(e,{sourceEvent:this.sourceEvent,target:h,type:e,transform:this.that.__zoom,dispatch:d}),t)}},h.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:Ho(+e),h):i},h.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ho(!!e),h):r},h.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Ho(!!e),h):c},h.extent=function(e){return arguments.length?(o="function"==typeof e?e:Ho([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):o},h.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],h):[u[0],u[1]]},h.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],h):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},h.constrain=function(e){return arguments.length?(a=e,h):a},h.duration=function(e){return arguments.length?(s=+e,h):s},h.interpolate=function(e){return arguments.length?(f=e,h):f},h.on=function(){var e=d.on.apply(d,arguments);return e===d?h:e},h.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,h):Math.sqrt(p)},h.tapDistance=function(e){return arguments.length?(b=+e,h):b},h}().scaleExtent([e.minZoom,e.maxZoom]).translateExtent(t),r=Un(T.current).call(n),o=tt(E[0],t[0][0],t[1][0]),a=tt(E[1],t[0][1],t[1][1]),i=tt(S,e.minZoom,e.maxZoom),c=Go.translate(o,a).scale(i);n.transform(r,c),F({d3Zoom:n,d3Selection:r,d3ZoomHandler:r.on("wheel.zoom"),transform:[o,a,i]})}}),[]),Object(r.useEffect)((function(){I&&R&&(f&&!L?I.on("wheel",(function(e){if(sa(e))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=I.property("__zoom").k||1;if(e.ctrlKey&&l){var n=Vn(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,o=t*Math.pow(2,r);R.scaleTo(I,o,n)}else{var a=1===e.deltaMode?20:1,i=h===ua.Vertical?0:e.deltaX*a,c=h===ua.Horizontal?0:e.deltaY*a;R.translateBy(I,-i/t*p,-c/t*p)}})).on("wheel.zoom",null):void 0!==A&&I.on("wheel",(function(e){if(!N||sa(e))return null;e.preventDefault()})).on("wheel.zoom",A))}),[f,h,I,R,A,L,l,N]),Object(r.useEffect)((function(){R&&(v?R.on("zoom",null):R.on("zoom",(function(e){if(B([e.transform.x,e.transform.y,e.transform.k]),t){var n=la(e.transform);t(n)}})))}),[v,R,B,t]),Object(r.useEffect)((function(){R&&(n?R.on("start",(function(e){var t=la(e.transform);D.current=t,n(t)})):R.on("start",null))}),[R,n]),Object(r.useEffect)((function(){R&&(a?R.on("end",(function(e){if(function(e,t){return e.x!==t.x||e.y!==t.y||e.zoom!==t.k}(D.current,e.transform)){var t=la(e.transform);D.current=t,a(t)}})):R.on("end",null))}),[R,a]),Object(r.useEffect)((function(){R&&R.filter((function(e){var t=L||c,n=l&&e.ctrlKey;return!!(w||t||f||y||l)&&(!v&&(!(!y&&"dblclick"===e.type)&&((!sa(e)||"wheel"!==e.type)&&((!e.target.closest(".react-flow__node")&&!e.target.closest(".react-flow__edge")||"wheel"===e.type)&&((!e.target.closest(".react-flow__nodesselection")||"wheel"===e.type)&&(!(!l&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||f||n||"wheel"!==e.type)&&(!!(w||"mousedown"!==e.type&&"touchstart"!==e.type)&&!(e.ctrlKey&&"wheel"!==e.type||e.button)))))))))}))}),[R,c,l,f,y,w,v,g,L]),o.a.createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:T},P)};function da(e){var t=e.target.closest(".react-flow");if(t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var pa=function(){var e=Ke((function(e){return e.userSelectionRect}));return e.draw?o.a.createElement("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}):null},ba=Object(r.memo)((function(e){var t=e.selectionKeyPressed,n=Ke((function(e){return e.selectionActive})),r=Ke((function(e){return e.elementsSelectable})),a=Xe((function(e){return e.setUserSelection})),i=Xe((function(e){return e.updateUserSelection})),c=Xe((function(e){return e.unsetUserSelection})),u=Xe((function(e){return e.unsetNodesSelection}));if(!r||!(n||t))return null;return o.a.createElement("div",{className:"react-flow__selectionpane",onMouseDown:function(e){var t=da(e);t&&a(t)},onMouseMove:function(e){if(t&&n){var r=da(e);r&&i(r)}},onMouseUp:function(){return c()},onMouseLeave:function(){c(),u()}},o.a.createElement(pa,null))})),ha={exports:{}},ma={};function ya(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ya(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var va=v(Object.freeze({__proto__:null,default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ya(e))&&(r&&(r+=" "),r+=t);return r}})),ga={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},Oa.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},Oa.isNum=function(e){return"number"==typeof e&&!isNaN(e)},Oa.int=function(e){return parseInt(e,10)},Oa.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var wa={};Object.defineProperty(wa,"__esModule",{value:!0}),wa.getPrefix=Ea,wa.browserPrefixToKey=_a,wa.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},wa.default=void 0;var ja=["Moz","Webkit","O","ms"];function Ea(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<ja.length;o++)if(_a(n,ja[o])in r)return ja[o];return""}function _a(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var Sa=Ea();function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}wa.default=Sa,Object.defineProperty(ga,"__esModule",{value:!0}),ga.matchesSelector=Ra,ga.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(Ra(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},ga.addEvent=function(e,t,n,r){if(!e)return;var o=Ta({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},ga.removeEvent=function(e,t,n,r){if(!e)return;var o=Ta({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},ga.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ka.int)(n.borderTopWidth),t+=(0,ka.int)(n.borderBottomWidth)},ga.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ka.int)(n.borderLeftWidth),t+=(0,ka.int)(n.borderRightWidth)},ga.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ka.int)(n.paddingTop),t-=(0,ka.int)(n.paddingBottom)},ga.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ka.int)(n.paddingLeft),t-=(0,ka.int)(n.paddingRight)},ga.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:a}},ga.createCSSTransform=function(e,t){var n=Ia(e,t,"px");return Da({},(0,Ca.browserPrefixToKey)("transform",Ca.default),n)},ga.createSVGTransform=function(e,t){return Ia(e,t,"")},ga.getTranslation=Ia,ga.getTouch=function(e,t){return e.targetTouches&&(0,ka.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,ka.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},ga.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},ga.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&Aa(e.body,"react-draggable-transparent-selection")},ga.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Fa(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}},ga.addClassName=Aa,ga.removeClassName=Fa;var ka=Oa,Ca=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==xa(e)&&"function"!=typeof e)return{default:e};var n=Na(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(wa);function Na(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Na=function(e){return e?n:t})(e)}function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Da(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ma="";function Ra(e,t){return Ma||(Ma=(0,ka.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,ka.isFunction)(e[t])}))),!!(0,ka.isFunction)(e[Ma])&&e[Ma](t)}function Ia(e,t,n){var r=e.x,o=e.y,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var i="".concat("string"==typeof t.x?t.x:t.x+n),c="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(i,", ").concat(c,")")+a}return a}function Aa(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Fa(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Ba={};Object.defineProperty(Ba,"__esModule",{value:!0}),Ba.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=qa(e);if("string"==typeof r){var a,i=o.ownerDocument,c=i.defaultView;if(!((a="parent"===r?o.parentNode:i.querySelector(r))instanceof c.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=a,l=c.getComputedStyle(o),s=c.getComputedStyle(u);r={left:-o.offsetLeft+(0,La.int)(s.paddingLeft)+(0,La.int)(l.marginLeft),top:-o.offsetTop+(0,La.int)(s.paddingTop)+(0,La.int)(l.marginTop),right:(0,za.innerWidth)(u)-(0,za.outerWidth)(o)-o.offsetLeft+(0,La.int)(s.paddingRight)-(0,La.int)(l.marginRight),bottom:(0,za.innerHeight)(u)-(0,za.outerHeight)(o)-o.offsetTop+(0,La.int)(s.paddingBottom)-(0,La.int)(l.marginBottom)}}(0,La.isNum)(r.right)&&(t=Math.min(t,r.right));(0,La.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,La.isNum)(r.left)&&(t=Math.max(t,r.left));(0,La.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},Ba.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]},Ba.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Ba.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Ba.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,za.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=qa(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,za.offsetXYFromParent)(r||e,a,n.props.scale)},Ba.createCoreData=function(e,t,n){var r=e.state,o=!(0,La.isNum)(r.lastX),a=qa(e);return o?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},Ba.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var La=Oa,za=ga;function qa(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ya={},Ua={};function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.default=function(){},Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.default=void 0;var Ha=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Va(e)&&"function"!=typeof e)return{default:e};var n=Ja(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(o.a),Xa=Qa(g.exports),Ka=Qa(i.a),Ga=ga,$a=Ba,Wa=Oa,Za=Qa(Ua);function Qa(e){return e&&e.__esModule?e:{default:e}}function Ja(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ja=function(e){return e?n:t})(e)}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ui(e);if(t){var o=ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ci(e)}function ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si={start:"touchstart",move:"touchmove",stop:"touchend"},fi={start:"mousedown",move:"mousemove",stop:"mouseup"},di=fi,pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(a,e);var t,n,r,o=ai(a);function a(){var e;ni(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return li(ci(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),li(ci(e),"mounted",!1),li(ci(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,Ga.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,Ga.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,Ga.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var a=(0,$a.getControlPosition)(t,o,ci(e));if(null!=a){var i=a.x,c=a.y,u=(0,$a.createCoreData)(ci(e),i,c);(0,Za.default)("DraggableCore: handleDragStart: %j",u),(0,Za.default)("calling",e.props.onStart),!1!==e.props.onStart(t,u)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Ga.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:i,lastY:c}),(0,Ga.addEvent)(r,di.move,e.handleDrag),(0,Ga.addEvent)(r,di.stop,e.handleDragStop))}}})),li(ci(e),"handleDrag",(function(t){var n=(0,$a.getControlPosition)(t,e.state.touchIdentifier,ci(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var a=r-e.state.lastX,i=o-e.state.lastY,c=ei((0,$a.snapToGrid)(e.props.grid,a,i),2);if(a=c[0],i=c[1],!a&&!i)return;r=e.state.lastX+a,o=e.state.lastY+i}var u=(0,$a.createCoreData)(ci(e),r,o);if((0,Za.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(l)}}})),li(ci(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,$a.getControlPosition)(t,e.state.touchIdentifier,ci(e));if(null!=n){var r=n.x,o=n.y,a=(0,$a.createCoreData)(ci(e),r,o);if(!1===e.props.onStop(t,a)||!1===e.mounted)return!1;var i=e.findDOMNode();i&&e.props.enableUserSelectHack&&(0,Ga.removeUserSelectStyles)(i.ownerDocument),(0,Za.default)("DraggableCore: handleDragStop: %j",a),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),i&&((0,Za.default)("DraggableCore: Removing handlers"),(0,Ga.removeEvent)(i.ownerDocument,di.move,e.handleDrag),(0,Ga.removeEvent)(i.ownerDocument,di.stop,e.handleDragStop))}}})),li(ci(e),"onMouseDown",(function(t){return di=fi,e.handleDragStart(t)})),li(ci(e),"onMouseUp",(function(t){return di=fi,e.handleDragStop(t)})),li(ci(e),"onTouchStart",(function(t){return di=si,e.handleDragStart(t)})),li(ci(e),"onTouchEnd",(function(t){return di=si,e.handleDragStop(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Ga.addEvent)(e,si.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Ga.removeEvent)(t,fi.move,this.handleDrag),(0,Ga.removeEvent)(t,si.move,this.handleDrag),(0,Ga.removeEvent)(t,fi.stop,this.handleDragStop),(0,Ga.removeEvent)(t,si.stop,this.handleDragStop),(0,Ga.removeEvent)(e,si.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ga.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:Ka.default.findDOMNode(this)}},{key:"render",value:function(){return Ha.cloneElement(Ha.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&ri(t.prototype,n),r&&ri(t,r),a}(Ha.Component);Ya.default=pi,li(pi,"displayName","DraggableCore"),li(pi,"propTypes",{allowAnyClick:Xa.default.bool,disabled:Xa.default.bool,enableUserSelectHack:Xa.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Xa.default.arrayOf(Xa.default.number),handle:Xa.default.string,cancel:Xa.default.string,nodeRef:Xa.default.object,onStart:Xa.default.func,onDrag:Xa.default.func,onStop:Xa.default.func,onMouseDown:Xa.default.func,scale:Xa.default.number,className:Wa.dontSetMe,style:Wa.dontSetMe,transform:Wa.dontSetMe}),li(pi,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),e.default=void 0;var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=h(n);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(o.a),r=b(g.exports),a=b(i.a),c=b(va),u=ga,l=Ba,s=Oa,f=b(Ya),d=b(Ua),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function b(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,r,o,i=S(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),N(k(t=i.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,l.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),N(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,l.createDraggableData)(k(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var a=o.x,i=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var c=w((0,l.getBoundPosition)(k(t),o.x,o.y),2),u=c[0],s=c[1];o.x=u,o.y=s,o.slackX=t.state.slackX+(a-o.x),o.slackY=t.state.slackY+(i-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),N(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,l.createDraggableData)(k(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,a=o.x,i=o.y;r.x=a,r.y=i}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:O({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=s,o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:O({},n)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:a.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,o=t.defaultPosition,a=t.defaultClassName,i=t.defaultClassNameDragging,s=t.defaultClassNameDragged,d=t.position,b=t.positionOffset;t.scale;var h=y(t,p),v={},g=null,w=!Boolean(d)||this.state.dragging,j=d||o,E={x:(0,l.canDragX)(this)&&w?this.state.x:j.x,y:(0,l.canDragY)(this)&&w?this.state.y:j.y};this.state.isElementSVG?g=(0,u.createSVGTransform)(E,b):v=(0,u.createCSSTransform)(E,b);var _=(0,c.default)(r.props.className||"",a,(N(e={},i,this.state.dragging),N(e,s,this.state.dragged),e));return n.createElement(f.default,m({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:_,style:O(O({},r.props.style),v),transform:g}))}}])&&E(t.prototype,r),o&&E(t,o),s}(n.Component);e.default=P,N(P,"displayName","Draggable"),N(P,"propTypes",O(O({},f.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),N(P,"defaultProps",O(O({},f.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(ma);var bi=ma.default,hi=ma.DraggableCore;ha.exports=bi,ha.exports.default=bi;var mi=ha.exports.DraggableCore=hi,yi=ha.exports;function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oi=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,a=e.onSelectionDragStop,i=e.onSelectionContextMenu,c=Qe(Ke((function(e){return e.transform})),3),u=c[0],l=c[1],s=c[2],f=Ke((function(e){return e.selectedNodesBbox})),d=Ke((function(e){return e.selectionActive})),p=Ke((function(e){return e.selectedElements})),b=Ke((function(e){return e.snapToGrid})),h=Ke((function(e){return e.snapGrid})),m=Ke((function(e){return e.nodes})),y=Xe((function(e){return e.updateNodePosDiff})),v=Object(r.useRef)(null),g=Object(r.useMemo)((function(){return b?h:[1,1]}),[b,h]),O=Object(r.useMemo)((function(){return p?p.filter(ct).map((function(e){var t=m.find((function(t){return t.id===e.id}));return gi(gi({},t),{},{position:null==t?void 0:t.__rf.position})})):[]}),[p,m]),w=Object(r.useMemo)((function(){return{transform:"translate(".concat(u,"px,").concat(l,"px) scale(").concat(s,")")}}),[u,l,s]),j=Object(r.useMemo)((function(){return{width:f.width,height:f.height,top:f.y,left:f.x}}),[f]),E=Object(r.useCallback)((function(e){null==t||t(e,O)}),[t,O]),_=Object(r.useCallback)((function(e,t){n&&n(e,O),y({diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,O,y]),S=Object(r.useCallback)((function(e){y({isDragging:!1}),null==a||a(e,O)}),[O,a]),x=Object(r.useCallback)((function(e){var t=p?p.filter(ct).map((function(e){return m.find((function(t){return t.id===e.id}))})):[];null==i||i(e,t)}),[i]);return!p||d?null:o.a.createElement("div",{className:"react-flow__nodesselection",style:w},o.a.createElement(yi,{scale:s,grid:g,onStart:function(e){return E(e)},onDrag:function(e,t){return _(e,t)},onStop:function(e){return S(e)},nodeRef:v,enableUserSelectHack:!1},o.a.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,style:j})))},wi=function(e){var t=e.children,n=e.onPaneClick,a=e.onPaneContextMenu,i=e.onPaneScroll,c=e.onElementsRemove,u=e.deleteKeyCode,l=e.onMove,s=e.onMoveStart,f=e.onMoveEnd,d=e.selectionKeyCode,p=e.multiSelectionKeyCode,b=e.zoomActivationKeyCode,h=e.elementsSelectable,m=e.zoomOnScroll,y=e.zoomOnPinch,v=e.panOnScroll,g=e.panOnScrollSpeed,O=e.panOnScrollMode,w=e.zoomOnDoubleClick,j=e.paneMoveable,E=e.defaultPosition,_=e.defaultZoom,S=e.translateExtent,x=e.preventScrolling,k=e.onSelectionDragStart,C=e.onSelectionDrag,N=e.onSelectionDragStop,P=e.onSelectionContextMenu,T=Xe((function(e){return e.unsetNodesSelection})),D=Xe((function(e){return e.resetSelectedElements})),M=Ke((function(e){return e.nodesSelectionActive})),R=rt(d);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=e.onElementsRemove,a=Ge(),i=Xe((function(e){return e.unsetNodesSelection})),c=Xe((function(e){return e.setMultiSelectionActive})),u=Xe((function(e){return e.resetSelectedElements})),l=rt(t),s=rt(n);Object(r.useEffect)((function(){var e=a.getState(),t=e.edges,n=e.selectedElements;if(o&&l&&n){var r=n.filter(ct),c=yt(r,t),s=[].concat(Ze(n),Ze(c)).reduce((function(e,t){return e.set(t.id,t)}),new Map);o(Array.from(s.values())),i(),u()}}),[l]),Object(r.useEffect)((function(){c(s)}),[s])}({onElementsRemove:c,deleteKeyCode:u,multiSelectionKeyCode:p});var I=Object(r.useCallback)((function(e){null==n||n(e),T(),D()}),[n]),A=Object(r.useCallback)((function(e){null==a||a(e)}),[a]),F=Object(r.useCallback)((function(e){null==i||i(e)}),[i]);return o.a.createElement(fa,{onMove:l,onMoveStart:s,onMoveEnd:f,selectionKeyPressed:R,elementsSelectable:h,zoomOnScroll:m,zoomOnPinch:y,panOnScroll:v,panOnScrollSpeed:g,panOnScrollMode:O,zoomOnDoubleClick:w,paneMoveable:j,defaultPosition:E,defaultZoom:_,translateExtent:S,zoomActivationKeyCode:b,preventScrolling:x},t,o.a.createElement(ba,{selectionKeyPressed:R}),M&&o.a.createElement(Oi,{onSelectionDragStart:k,onSelectionDrag:C,onSelectionDragStop:N,onSelectionContextMenu:P}),o.a.createElement("div",{className:"react-flow__pane",onClick:I,onContextMenu:A,onWheel:F}))};wi.displayName="FlowRenderer";var ji=Object(r.memo)(wi),Ei=function(e){var t=Ke((function(e){return e.transform})),n=Ke((function(e){return e.selectedElements})),a=Ke((function(e){return e.nodesDraggable})),i=Ke((function(e){return e.nodesConnectable})),c=Ke((function(e){return e.elementsSelectable})),u=Ke((function(e){return e.width})),l=Ke((function(e){return e.height})),s=Ke((function(e){return e.nodes})),f=Xe((function(e){return e.updateNodeDimensions})),d=e.onlyRenderVisibleElements?mt(s,{x:0,y:0,width:u,height:l},t,!0):s,p=Object(r.useMemo)((function(){return{transform:"translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")")}}),[t[0],t[1],t[2]]),b=Object(r.useMemo)((function(){return"undefined"==typeof ResizeObserver?null:new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target}}));f(t)}))}),[]);return o.a.createElement("div",{className:"react-flow__nodes",style:p},d.map((function(r){var u=r.type||"default",l=e.nodeTypes[u]||e.nodeTypes.default;e.nodeTypes[u]||console.warn('Node type "'.concat(u,'" not found. Using fallback type "default".'));var s=!!(r.draggable||a&&void 0===r.draggable),f=!!(r.selectable||c&&void 0===r.selectable),d=!!(r.connectable||i&&void 0===r.connectable);return o.a.createElement(l,{key:r.id,id:r.id,className:r.className,style:r.style,type:u,data:r.data,sourcePosition:r.sourcePosition,targetPosition:r.targetPosition,isHidden:r.isHidden,xPos:r.__rf.position.x,yPos:r.__rf.position.y,isDragging:r.__rf.isDragging,isInitialized:null!==r.__rf.width&&null!==r.__rf.height,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:(null==n?void 0:n.some((function(e){return e.id===r.id})))||!1,isDraggable:s,isSelectable:f,isConnectable:d,resizeObserver:b,dragHandle:r.dragHandle})})))};Ei.displayName="NodeRenderer";var _i=Object(r.memo)(Ei),Si=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ki=function(e){var t=e.x,n=e.y,a=e.label,i=e.labelStyle,s=void 0===i?{}:i,f=e.labelShowBg,d=void 0===f||f,p=e.labelBgStyle,b=void 0===p?{}:p,h=e.labelBgPadding,m=void 0===h?[2,4]:h,y=e.labelBgBorderRadius,v=void 0===y?2:y,g=e.children,O=e.className,w=u(e,Si),j=Object(r.useRef)(null),E=Qe(Object(r.useState)({x:0,y:0,width:0,height:0}),2),_=E[0],S=E[1],x=l(["react-flow__edge-textwrapper",O]);return Object(r.useEffect)((function(){if(j.current){var e=j.current.getBBox();S({x:e.x,y:e.y,width:e.width,height:e.height})}}),[a]),void 0!==a&&a?o.a.createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-_.width/2," ").concat(n-_.height/2,")"),className:x},w),d&&o.a.createElement("rect",{width:_.width+2*m[0],x:-m[0],y:-m[1],height:_.height+2*m[1],className:"react-flow__edge-textbg",style:b,rx:v,ry:v}),o.a.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:j,style:s},a),g):null},Ci=Object(r.memo)(ki),Ni=function(e,t){return void 0!==t&&t?"url(#".concat(t,")"):void 0!==e?"url(#react-flow__".concat(e,")"):"none"},Pi=[ra.Left,ra.Right],Ti=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=void 0===a?ra.Bottom:a,c=e.targetPosition,u=void 0===c?ra.Top:c,l=Pi.includes(i),s=Pi.includes(u);if(l&&!s||s&&!l){var f=l?Math.abs(r-t):0,d=t>r?t-f:t+f,p=l?0:Math.abs(o-n);return[d,n<o?n+p:n-p,f,p]}var b=Math.abs(r-t)/2,h=r<t?r+b:r-b,m=Math.abs(o-n)/2;return[h,o<n?o+m:o-m,b,m]};function Di(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?ra.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?ra.Top:c,l=e.centerX,s=e.centerY,f=Qe(Ti({sourceX:t,sourceY:n,targetX:a,targetY:i}),2),d=f[0],p=f[1],b=[ra.Left,ra.Right],h=void 0!==l?l:d,m=void 0!==s?s:p,y="M".concat(t,",").concat(n," C").concat(t,",").concat(m," ").concat(a,",").concat(m," ").concat(a,",").concat(i);return b.includes(o)&&b.includes(u)?y="M".concat(t,",").concat(n," C").concat(h,",").concat(n," ").concat(h,",").concat(i," ").concat(a,",").concat(i):b.includes(u)?y="M".concat(t,",").concat(n," Q").concat(t,",").concat(i," ").concat(a,",").concat(i):b.includes(o)&&(y="M".concat(t,",").concat(n," Q").concat(a,",").concat(n," ").concat(a,",").concat(i)),y}var Mi=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.sourcePosition,c=void 0===i?ra.Bottom:i,u=e.targetPosition,l=void 0===u?ra.Top:u,s=e.label,f=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,b=e.labelBgPadding,h=e.labelBgBorderRadius,m=e.style,y=e.arrowHeadType,v=e.markerEndId,g=Qe(Ti({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:c,targetPosition:l}),2),O=g[0],w=g[1],j=Di({sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:a,targetPosition:l}),E=s?o.a.createElement(Ci,{x:O,y:w,label:s,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:h}):null,_=Ni(y,v);return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:m,d:j,className:"react-flow__edge-path",markerEnd:_}),E)})),Ri=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},Ii=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Ai=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Fi=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Bi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},Li=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},zi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},qi=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function Yi(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?ra.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?ra.Top:c,l=e.borderRadius,s=void 0===l?5:l,f=e.centerX,d=e.centerY,p=Qe(Ti({sourceX:t,sourceY:n,targetX:a,targetY:i}),4),b=p[0],h=p[1],m=p[2],y=p[3],v=Math.min(s,Math.abs(a-t)),g=Math.min(s,Math.abs(i-n)),O=Math.min(v,g,m,y),w=[ra.Left,ra.Right],j=void 0!==f?f:b,E=void 0!==d?d:h,_=null,S=null;return t<=a?(_=n<=i?Ri(t,E,O):Li(t,E,O),S=n<=i?qi(a,E,O):Fi(a,E,O)):(_=n<i?Ai(t,E,O):zi(t,E,O),S=n<i?Bi(a,E,O):Ii(a,E,O)),w.includes(o)&&w.includes(u)?t<=a?(_=n<=i?qi(j,n,O):Fi(j,n,O),S=n<=i?Ri(j,i,O):Li(j,i,O)):(o===ra.Right&&u===ra.Left||o===ra.Left&&u===ra.Right||o===ra.Left&&u===ra.Left)&&(_=n<=i?Bi(j,n,O):Ii(j,n,O),S=n<=i?Ai(j,i,O):zi(j,i,O)):w.includes(o)&&!w.includes(u)?(_=t<=a?n<=i?qi(a,n,O):Fi(a,n,O):n<=i?Bi(a,n,O):Ii(a,n,O),S=""):!w.includes(o)&&w.includes(u)&&(_=t<=a?n<=i?Ri(t,i,O):Li(t,i,O):n<=i?Ai(t,i,O):zi(t,i,O),S=""),"M ".concat(t,",").concat(n).concat(_).concat(S,"L ").concat(a,",").concat(i)}var Ui=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.sourcePosition,b=void 0===p?ra.Bottom:p,h=e.targetPosition,m=void 0===h?ra.Top:h,y=e.arrowHeadType,v=e.markerEndId,g=e.borderRadius,O=void 0===g?5:g,w=Qe(Ti({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:b,targetPosition:m}),2),j=w[0],E=w[1],_=Yi({sourceX:t,sourceY:n,sourcePosition:b,targetX:r,targetY:a,targetPosition:m,borderRadius:O}),S=Ni(y,v),x=i?o.a.createElement(Ci,{x:j,y:E,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:d,className:"react-flow__edge-path",d:_,markerEnd:S}),x)})),Vi=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,a=e.connectionHandleType,i=e.connectionLineStyle,c=e.connectionPositionX,u=e.connectionPositionY,l=e.connectionLineType,s=void 0===l?ca.Bezier:l,f=e.nodes,d=void 0===f?[]:f,p=e.transform,b=e.isConnectable,h=e.CustomConnectionLineComponent,m=Qe(Object(r.useState)(null),2),y=m[0],v=m[1],g=t,O=n;if(Object(r.useEffect)((function(){var e=d.find((function(e){return e.id===g}))||null;v(e)}),[]),!y||!b)return null;var w=function(e,t,n){var r="source"===n?"target":"source",o=t.__rf.handleBounds[n]||t.__rf.handleBounds[r];return e?o.find((function(t){return t.id===e})):o[0]}(O,y,a),j=w?w.x+w.width/2:y.__rf.width/2,E=w?w.y+w.height/2:y.__rf.height,_=y.__rf.position.x+j,S=y.__rf.position.y+E,x=(c-p[0])/p[2],k=(u-p[1])/p[2],C=(null==w?void 0:w.position)===ra.Left||(null==w?void 0:w.position)===ra.Right?ra.Left:ra.Top;if(h)return o.a.createElement("g",{className:"react-flow__connection"},o.a.createElement(h,{sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C,connectionLineType:s,connectionLineStyle:i,sourceNode:y,sourceHandle:w}));var N="";return N=s===ca.Bezier?Di({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C}):s===ca.Step?Yi({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C,borderRadius:0}):s===ca.SmoothStep?Yi({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:C}):"M".concat(_,",").concat(S," ").concat(x,",").concat(k),o.a.createElement("g",{className:"react-flow__connection"},o.a.createElement("path",{d:N,className:"react-flow__connection-path",style:i}))},Hi=function(e){var t=e.id,n=e.children;return o.a.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},n)},Xi=function(e){var t=e.color;return o.a.createElement("defs",null,o.a.createElement(Hi,{id:"react-flow__arrowclosed"},o.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:t,points:"-5,-4 0,0 -5,4 -5,-4"})),o.a.createElement(Hi,{id:"react-flow__arrow"},o.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};function Ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ki(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Xi.displayName="MarkerDefinitions";var $i=Object(r.memo)((function(e){return o.a.createElement(Ui,Gi(Gi({},e),{},{borderRadius:0}))})),Wi=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.arrowHeadType,b=e.markerEndId,h=Math.abs(a-n)/2,m=a<n?a+h:a-h,y=Math.abs(r-t)/2,v=r<t?r+y:r-y,g=Ni(p,b),O=i?o.a.createElement(Ci,{x:v,y:m,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:d,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(a),markerEnd:g}),O)}));function Zi(e,t,n,r,o,a,i){var c=i.elementFromPoint(e.clientX,e.clientY),u=(null==c?void 0:c.classList.contains("target"))||!1,l=(null==c?void 0:c.classList.contains("source"))||!1,s={elementBelow:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(u||l)&&(s.isHoveringHandle=!0,t!==ia.Strict||(n&&l||!n&&u))){var f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:d};s.connection=p,s.isValid=a(p)}return s}function Qi(e){null==e||e.classList.remove("react-flow__handle-valid"),null==e||e.classList.remove("react-flow__handle-connecting")}function Ji(e,t,n,r,o,a,i,c,u,l,s,f,d,p){var b,h,m,y=e.target.closest(".react-flow"),v=(b=e.target,(null===(h=b.getRootNode)||void 0===h?void 0:h.call(b))||(null===(m=window)||void 0===m?void 0:m.document));if(v){var g=v.elementFromPoint(e.clientX,e.clientY),O=null==g?void 0:g.classList.contains("target"),w=null==g?void 0:g.classList.contains("source");if(y&&(O||w||l)){var j,E=l||(O?"target":"source"),_=y.getBoundingClientRect();o({x:e.clientX-_.left,y:e.clientY-_.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:E}),null==f||f(e,{nodeId:n,handleId:t,handleType:E}),v.addEventListener("mousemove",S),v.addEventListener("mouseup",(function e(o){var f=Zi(o,u,i,n,t,c,v),b=f.connection,h=f.isValid;null==d||d(o),h&&(null==a||a(b)),null==p||p(o),l&&s&&s(o),Qi(j),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",S),v.removeEventListener("mouseup",e)}))}}function S(e){o({x:e.clientX-_.left,y:e.clientY-_.top});var r=Zi(e,u,i,n,t,c,v),a=r.connection,l=r.elementBelow,s=r.isValid;if(!r.isHoveringHandle)return Qi(j);!(a.source===a.target)&&l&&(j=l,l.classList.add("react-flow__handle-connecting"),l.classList.toggle("react-flow__handle-valid",s))}}var ec=function(e,t,n){return n===ra.Left?e-t:n===ra.Right?e+t:e},tc=function(e,t,n){return n===ra.Top?e-t:n===ra.Bottom?e+t:e},nc=function(e){var t=e.className,n=e.position,r=e.centerX,a=e.centerY,i=e.radius,c=void 0===i?10:i;return o.a.createElement("circle",{className:l(["react-flow__edgeupdater",t]),cx:ec(r,c,n),cy:tc(a,c,n),r:c,stroke:"transparent",fill:"transparent"})},rc=function(e){var t=function(t){var n=t.id,a=t.className,i=t.type,c=t.data,u=t.onClick,s=t.onEdgeDoubleClick,f=t.selected,d=t.animated,p=t.label,b=t.labelStyle,h=t.labelShowBg,m=t.labelBgStyle,y=t.labelBgPadding,v=t.labelBgBorderRadius,g=t.style,O=t.arrowHeadType,w=t.source,j=t.target,E=t.sourceX,_=t.sourceY,S=t.targetX,x=t.targetY,k=t.sourcePosition,C=t.targetPosition,N=t.elementsSelectable,P=t.markerEndId,T=t.isHidden,D=t.sourceHandleId,M=t.targetHandleId,R=t.handleEdgeUpdate,I=t.onConnectEdge,A=t.onContextMenu,F=t.onMouseEnter,B=t.onMouseMove,L=t.onMouseLeave,z=t.edgeUpdaterRadius,q=t.onEdgeUpdateStart,Y=t.onEdgeUpdateEnd,U=Xe((function(e){return e.addSelectedElements})),V=Xe((function(e){return e.setConnectionNodeId})),H=Xe((function(e){return e.unsetNodesSelection})),X=Xe((function(e){return e.setConnectionPosition})),K=Ke((function(e){return e.connectionMode})),G=Qe(Object(r.useState)(!1),2),$=G[0],W=G[1],Z=!N&&!u,Q=l(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:f,animated:d,inactive:Z,updating:$}]),J=Object(r.useMemo)((function(){var e={id:n,source:w,target:j,type:i};return D&&(e.sourceHandle=D),M&&(e.targetHandle=M),void 0!==c&&(e.data=c),e}),[n,w,j,i,D,M,c]),ee=Object(r.useCallback)((function(e){N&&(H(),U(J)),null==u||u(e,J)}),[N,J,u]),te=Object(r.useCallback)((function(e){null==s||s(e,J)}),[J,s]),ne=Object(r.useCallback)((function(e){null==A||A(e,J)}),[J,A]),re=Object(r.useCallback)((function(e){null==F||F(e,J)}),[J,A]),oe=Object(r.useCallback)((function(e){null==B||B(e,J)}),[J,A]),ae=Object(r.useCallback)((function(e){null==L||L(e,J)}),[J,A]),ie=Object(r.useCallback)((function(e,t){var n=t?j:w,r=t?M:D,o=t;null==q||q(e,J),Ji(e,r,n,V,X,I,o,(function(){return!0}),K,t?"target":"source",Y?function(e){return Y(e,J)}:void 0)}),[n,w,j,i,D,M,V,X,J,I]),ce=Object(r.useCallback)((function(e){ie(e,!0)}),[n,w,D,ie]),ue=Object(r.useCallback)((function(e){ie(e,!1)}),[n,j,M,ie]),le=Object(r.useCallback)((function(){return W(!0)}),[W]),se=Object(r.useCallback)((function(){return W(!1)}),[W]);return T?null:o.a.createElement("g",{className:Q,onClick:ee,onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae},o.a.createElement(e,{id:n,source:w,target:j,selected:f,animated:d,label:p,labelStyle:b,labelShowBg:h,labelBgStyle:m,labelBgPadding:y,labelBgBorderRadius:v,data:c,style:g,arrowHeadType:O,sourceX:E,sourceY:_,targetX:S,targetY:x,sourcePosition:k,targetPosition:C,markerEndId:P,sourceHandleId:D,targetHandleId:M}),R&&o.a.createElement("g",{onMouseDown:ce,onMouseEnter:le,onMouseOut:se},o.a.createElement(nc,{position:k,centerX:E,centerY:_,radius:z})),R&&o.a.createElement("g",{onMouseDown:ue,onMouseEnter:le,onMouseOut:se},o.a.createElement(nc,{position:C,centerX:S,centerY:x,radius:z})))};return t.displayName="EdgeWrapper",Object(r.memo)(t)};function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null==n?void 0:n.x)||0)+t.__rf.position.x,o=((null==n?void 0:n.y)||0)+t.__rf.position.y,a=(null==n?void 0:n.width)||t.__rf.width,i=(null==n?void 0:n.height)||t.__rf.height;switch(e){case ra.Top:return{x:r+a/2,y:o};case ra.Right:return{x:r+a,y:o+i/2};case ra.Bottom:return{x:r+a/2,y:o+i};case ra.Left:return{x:r,y:o+i/2}}}function cc(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],void 0===n?null:n}var uc=function(e){var t=e.edge,n=e.props,a=e.nodes,i=e.selectedElements,c=e.elementsSelectable,u=e.transform,l=e.width,s=e.height,f=e.onlyRenderVisibleElements,d=e.connectionMode,p=t.sourceHandle||null,b=t.targetHandle||null,h=function(e,t){return t.reduce((function(t,n){return n.id===e.source&&(t.sourceNode=n),n.id===e.target&&(t.targetNode=n),t}),{sourceNode:null,targetNode:null})}(t,a),m=h.sourceNode,y=h.targetNode,v=Object(r.useCallback)((function(e){var r;null===(r=n.onEdgeUpdate)||void 0===r||r.call(n,t,e)}),[t,n.onEdgeUpdate]);if(!m)return console.warn("couldn't create edge for source id: ".concat(t.source,"; edge id: ").concat(t.id)),null;if(!y)return console.warn("couldn't create edge for target id: ".concat(t.target,"; edge id: ").concat(t.id)),null;if(!m.__rf.width||!y.__rf.width)return null;var g=t.type||"default",O=n.edgeTypes[g]||n.edgeTypes.default,w=y.__rf.handleBounds,j=d===ia.Strict?w.target:w.target||w.source,E=cc(m.__rf.handleBounds.source,p),_=cc(j,b),S=E?E.position:ra.Bottom,x=_?_.position:ra.Top;if(!E)return console.warn("couldn't create edge for source handle id: ".concat(p,"; edge id: ").concat(t.id)),null;if(!_)return console.warn("couldn't create edge for target handle id: ".concat(b,"; edge id: ").concat(t.id)),null;var k=function(e,t,n,r,o,a){var i=ic(n,e,t),c=ic(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:c.x,targetY:c.y}}(m,E,S,y,_,x),C=k.sourceX,N=k.sourceY,P=k.targetX,T=k.targetY;if(!(!f||function(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,a=e.transform,i={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);var c=pt({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:r/a[2],height:o/a[2]}),u=Math.max(0,Math.min(c.x2,i.x2)-Math.max(c.x,i.x)),l=Math.max(0,Math.min(c.y2,i.y2)-Math.max(c.y,i.y));return Math.ceil(u*l)>0}({sourcePos:{x:C,y:N},targetPos:{x:P,y:T},width:l,height:s,transform:u})))return null;var D=(null==i?void 0:i.some((function(e){return it(e)&&e.id===t.id})))||!1;return o.a.createElement(O,{key:t.id,id:t.id,className:t.className,type:t.type,data:t.data,onClick:n.onElementClick,selected:D,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,arrowHeadType:t.arrowHeadType,source:t.source,target:t.target,sourceHandleId:p,targetHandleId:b,sourceX:C,sourceY:N,targetX:P,targetY:T,sourcePosition:S,targetPosition:x,elementsSelectable:c,markerEndId:n.markerEndId,isHidden:t.isHidden,onConnectEdge:v,handleEdgeUpdate:void 0!==n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd})},lc=function(e){var t=Ke((function(e){return e.transform})),n=Ke((function(e){return e.nodes})),r=Ke((function(e){return e.edges})),a=Ke((function(e){return e.connectionNodeId})),i=Ke((function(e){return e.connectionHandleId})),c=Ke((function(e){return e.connectionHandleType})),u=Ke((function(e){return e.connectionPosition})),l=Ke((function(e){return e.selectedElements})),s=Ke((function(e){return e.nodesConnectable})),f=Ke((function(e){return e.elementsSelectable})),d=Ke((function(e){return e.width})),p=Ke((function(e){return e.height}));if(!d)return null;var b=e.connectionLineType,h=e.arrowHeadColor,m=e.connectionLineStyle,y=e.connectionLineComponent,v=e.onlyRenderVisibleElements,g="translate(".concat(t[0],",").concat(t[1],") scale(").concat(t[2],")"),O=a&&c;return o.a.createElement("svg",{width:d,height:p,className:"react-flow__edges"},o.a.createElement(Xi,{color:h}),o.a.createElement("g",{transform:g},r.map((function(r){return o.a.createElement(uc,{key:r.id,edge:r,props:e,nodes:n,selectedElements:l,elementsSelectable:f,transform:t,width:d,height:p,onlyRenderVisibleElements:v})})),O&&o.a.createElement(Vi,{nodes:n,connectionNodeId:a,connectionHandleId:i,connectionHandleType:c,connectionPositionX:u.x,connectionPositionY:u.y,transform:t,connectionLineStyle:m,connectionLineType:b,isConnectable:s,CustomConnectionLineComponent:y})))};lc.displayName="EdgeRenderer";var sc=Object(r.memo)(lc),fc={zoomIn:function(){},zoomOut:function(){},zoomTo:function(e){},transform:function(e){},fitView:function(){},setCenter:function(e,t){},fitBounds:function(e){},project:function(e){return e},initialized:!1},dc=function(){var e=Ge(),t=Ke((function(e){return e.d3Zoom})),n=Ke((function(e){return e.d3Selection}));return Object(r.useMemo)((function(){return n&&t?{zoomIn:function(){return t.scaleBy(n,1.2)},zoomOut:function(){return t.scaleBy(n,1/1.2)},zoomTo:function(e){return t.scaleTo(n,e)},transform:function(e){var r=Go.translate(e.x,e.y).scale(e.zoom);t.transform(n,r)},fitView:function(){var r,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1,includeHiddenNodes:!1},c=e.getState(),u=c.nodes,l=c.width,s=c.height,f=c.minZoom,d=c.maxZoom;if(u.length){var p=ht(i.includeHiddenNodes?u:u.filter((function(e){return!e.isHidden}))),b=wt(p,l,s,null!==(r=i.minZoom)&&void 0!==r?r:f,null!==(o=i.maxZoom)&&void 0!==o?o:d,null!==(a=i.padding)&&void 0!==a?a:.1),h=Qe(b,3),m=h[0],y=h[1],v=h[2],g=Go.translate(m,y).scale(v);t.transform(n,g)}},setCenter:function(r,o,a){var i=e.getState(),c=i.width,u=i.height,l=i.maxZoom,s=void 0!==a?a:l,f=c/2-r*s,d=u/2-o*s,p=Go.translate(f,d).scale(s);t.transform(n,p)},fitBounds:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=e.getState(),i=a.width,c=a.height,u=a.minZoom,l=a.maxZoom,s=wt(r,i,c,u,l,o),f=Qe(s,3),d=f[0],p=f[1],b=f[2],h=Go.translate(d,p).scale(b);t.transform(n,h)},project:function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)},initialized:!0}:fc}),[t,n])},pc=function(e){var t=e.nodeTypes,n=e.edgeTypes,a=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,u=e.onLoad,l=e.onElementClick,s=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,d=e.onNodeMouseEnter,p=e.onNodeMouseMove,b=e.onNodeMouseLeave,h=e.onNodeContextMenu,m=e.onNodeDragStart,y=e.onNodeDrag,v=e.onNodeDragStop,g=e.onSelectionDragStart,O=e.onSelectionDrag,w=e.onSelectionDragStop,j=e.onSelectionContextMenu,E=e.connectionMode,_=e.connectionLineType,S=e.connectionLineStyle,x=e.connectionLineComponent,k=e.selectionKeyCode,C=e.multiSelectionKeyCode,N=e.zoomActivationKeyCode,P=e.onElementsRemove,T=e.deleteKeyCode,D=e.onConnect,M=e.onConnectStart,R=e.onConnectStop,I=e.onConnectEnd,A=e.snapToGrid,F=e.snapGrid,B=e.onlyRenderVisibleElements,L=e.nodesDraggable,z=e.nodesConnectable,q=e.elementsSelectable,Y=e.selectNodesOnDrag,U=e.minZoom,V=e.maxZoom,H=e.defaultZoom,X=e.defaultPosition,K=e.translateExtent,G=e.preventScrolling,$=e.nodeExtent,W=e.arrowHeadColor,Z=e.markerEndId,Q=e.zoomOnScroll,J=e.zoomOnPinch,ee=e.panOnScroll,te=e.panOnScrollSpeed,ne=e.panOnScrollMode,re=e.zoomOnDoubleClick,oe=e.paneMoveable,ae=e.onPaneClick,ie=e.onPaneScroll,ce=e.onPaneContextMenu,ue=e.onEdgeUpdate,le=e.onEdgeContextMenu,se=e.onEdgeMouseEnter,fe=e.onEdgeMouseMove,de=e.onEdgeMouseLeave,pe=e.edgeUpdaterRadius,be=e.onEdgeUpdateStart,he=e.onEdgeUpdateEnd,me=Object(r.useRef)(!1),ye=Xe((function(e){return e.setOnConnect})),ve=Xe((function(e){return e.setOnConnectStart})),ge=Xe((function(e){return e.setOnConnectStop})),Oe=Xe((function(e){return e.setOnConnectEnd})),we=Xe((function(e){return e.setSnapGrid})),je=Xe((function(e){return e.setSnapToGrid})),Ee=Xe((function(e){return e.setNodesDraggable})),_e=Xe((function(e){return e.setNodesConnectable})),Se=Xe((function(e){return e.setElementsSelectable})),xe=Xe((function(e){return e.setMinZoom})),ke=Xe((function(e){return e.setMaxZoom})),Ce=Xe((function(e){return e.setTranslateExtent})),Ne=Xe((function(e){return e.setNodeExtent})),Pe=Xe((function(e){return e.setConnectionMode})),Te=Ge(),De=dc(),Me=De.zoomIn,Re=De.zoomOut,Ie=De.zoomTo,Ae=De.transform,Fe=De.fitView,Be=De.initialized;return Object(r.useEffect)((function(){!me.current&&Be&&(u&&u({fitView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1};return Fe(e)},zoomIn:Me,zoomOut:Re,zoomTo:Ie,setTransform:Ae,project:lt(Te),getElements:gt(Te),toObject:Ot(Te)}),me.current=!0)}),[u,Me,Re,Ie,Ae,Fe,Be]),Object(r.useEffect)((function(){D&&ye(D)}),[D]),Object(r.useEffect)((function(){M&&ve(M)}),[M]),Object(r.useEffect)((function(){R&&ge(R)}),[R]),Object(r.useEffect)((function(){I&&Oe(I)}),[I]),Object(r.useEffect)((function(){void 0!==A&&je(A)}),[A]),Object(r.useEffect)((function(){void 0!==F&&we(F)}),[F]),Object(r.useEffect)((function(){void 0!==L&&Ee(L)}),[L]),Object(r.useEffect)((function(){void 0!==z&&_e(z)}),[z]),Object(r.useEffect)((function(){void 0!==q&&Se(q)}),[q]),Object(r.useEffect)((function(){void 0!==U&&xe(U)}),[U]),Object(r.useEffect)((function(){void 0!==V&&ke(V)}),[V]),Object(r.useEffect)((function(){void 0!==K&&Ce(K)}),[K]),Object(r.useEffect)((function(){void 0!==$&&Ne($)}),[$]),Object(r.useEffect)((function(){void 0!==E&&Pe(E)}),[E]),o.a.createElement(ji,{onPaneClick:ae,onPaneContextMenu:ce,onPaneScroll:ie,onElementsRemove:P,deleteKeyCode:T,selectionKeyCode:k,multiSelectionKeyCode:C,zoomActivationKeyCode:N,elementsSelectable:q,onMove:a,onMoveStart:i,onMoveEnd:c,zoomOnScroll:Q,zoomOnPinch:J,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:X,defaultZoom:H,translateExtent:K,onSelectionDragStart:g,onSelectionDrag:O,onSelectionDragStop:w,onSelectionContextMenu:j,preventScrolling:G},o.a.createElement(_i,{nodeTypes:t,onElementClick:l,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:h,onNodeDragStop:v,onNodeDrag:y,onNodeDragStart:m,selectNodesOnDrag:Y,snapToGrid:A,snapGrid:F,onlyRenderVisibleElements:B}),o.a.createElement(sc,{edgeTypes:n,onElementClick:l,onEdgeDoubleClick:f,connectionLineType:_,connectionLineStyle:S,connectionLineComponent:x,connectionMode:E,arrowHeadColor:W,markerEndId:Z,onEdgeUpdate:ue,onlyRenderVisibleElements:B,onEdgeContextMenu:le,onEdgeMouseEnter:se,onEdgeMouseMove:fe,onEdgeMouseLeave:de,onEdgeUpdateStart:be,onEdgeUpdateEnd:he,edgeUpdaterRadius:pe}))};pc.displayName="GraphView";var bc=Object(r.memo)(pc),hc=function(e){var t=e.elements,n=Xe((function(e){return e.setElements}));return Object(r.useEffect)((function(){n(t)}),[t]),null},mc=Object(r.createContext)(null),yc=mc.Provider;mc.Consumer;var vc=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function gc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Oc=function(){return!0},wc=Object(r.forwardRef)((function(e,t){var n=e.type,a=void 0===n?"source":n,i=e.position,s=void 0===i?ra.Top:i,f=e.isValidConnection,d=void 0===f?Oc:f,p=e.isConnectable,b=void 0===p||p,h=e.id,m=e.onConnect,y=e.children,v=e.className,g=u(e,vc),O=Object(r.useContext)(mc),w=Xe((function(e){return e.setConnectionPosition})),j=Xe((function(e){return e.setConnectionNodeId})),E=Ke((function(e){return e.onConnect})),_=Ke((function(e){return e.onConnectStart})),S=Ke((function(e){return e.onConnectStop})),x=Ke((function(e){return e.onConnectEnd})),k=Ke((function(e){return e.connectionMode})),C=h||null,N="target"===a,P=Object(r.useCallback)((function(e){null==E||E(e),null==m||m(e)}),[E,m]),T=Object(r.useCallback)((function(e){Ji(e,C,O,j,w,P,N,d,k,void 0,void 0,_,S,x)}),[C,O,j,w,P,N,d,k,_,S,x]),D=l(["react-flow__handle","react-flow__handle-".concat(s),"nodrag",v,{source:!N,target:N,connectable:b}]);return o.a.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-handleid":C,"data-nodeid":O,"data-handlepos":s,className:D,onMouseDown:T,ref:t},g),y)}));wc.displayName="Handle";var jc=Object(r.memo)(wc),Ec=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?ra.Top:r,i=e.sourcePosition,c=void 0===i?ra.Bottom:i;return o.a.createElement(o.a.Fragment,null,o.a.createElement(jc,{type:"target",position:a,isConnectable:n}),t.label,o.a.createElement(jc,{type:"source",position:c,isConnectable:n}))};Ec.displayName="DefaultNode";var _c=Object(r.memo)(Ec),Sc=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,a=void 0===r?ra.Bottom:r;return o.a.createElement(o.a.Fragment,null,t.label,o.a.createElement(jc,{type:"source",position:a,isConnectable:n}))};Sc.displayName="InputNode";var xc=Object(r.memo)(Sc),kc=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?ra.Top:r;return o.a.createElement(o.a.Fragment,null,o.a.createElement(jc,{type:"target",position:a,isConnectable:n}),t.label)};kc.displayName="OutputNode";var Cc=Object(r.memo)(kc);function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Pc=function(e){var t=function(t){var n=t.id,a=t.type,i=t.data,u=t.scale,s=t.xPos,f=t.yPos,d=t.selected,p=t.onClick,b=t.onMouseEnter,h=t.onMouseMove,m=t.onMouseLeave,y=t.onContextMenu,v=t.onNodeDoubleClick,g=t.onNodeDragStart,O=t.onNodeDrag,w=t.onNodeDragStop,j=t.style,E=t.className,_=t.isDraggable,S=t.isSelectable,x=t.isConnectable,k=t.selectNodesOnDrag,C=t.sourcePosition,N=t.targetPosition,P=t.isHidden,T=t.isInitialized,D=t.snapToGrid,M=t.snapGrid,R=t.isDragging,I=t.resizeObserver,A=t.dragHandle,F=Xe((function(e){return e.updateNodeDimensions})),B=Xe((function(e){return e.addSelectedElements})),L=Xe((function(e){return e.updateNodePosDiff})),z=Xe((function(e){return e.unsetNodesSelection})),q=Object(r.useRef)(null),Y=Object(r.useMemo)((function(){return{id:n,type:a,position:{x:s,y:f},data:i}}),[n,a,s,f,i]),U=Object(r.useMemo)((function(){return D?M:[1,1]}),[D,M]),V=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:d?10:3,transform:"translate(".concat(s,"px,").concat(f,"px)"),pointerEvents:S||_||p||b||h||m?"all":"none",opacity:T?1:0},j)}),[d,s,f,S,_,p,T,j,b,h,m]),H=Object(r.useMemo)((function(){if(b&&!R)return function(e){return b(e,Y)}}),[b,R,Y]),X=Object(r.useMemo)((function(){if(h&&!R)return function(e){return h(e,Y)}}),[h,R,Y]),K=Object(r.useMemo)((function(){if(m&&!R)return function(e){return m(e,Y)}}),[m,R,Y]),G=Object(r.useMemo)((function(){if(y)return function(e){return y(e,Y)}}),[y,Y]),$=Object(r.useCallback)((function(e){_||(S&&(z(),d||B(Y)),null==p||p(e,Y))}),[S,d,_,p,Y]),W=Object(r.useCallback)((function(e){null==g||g(e,Y),k&&S?(z(),d||B(Y)):k||d||!S||(z(),B([]))}),[Y,d,k,S,g]),Z=Object(r.useCallback)((function(e,t){O&&(Y.position.x+=t.deltaX,Y.position.y+=t.deltaY,O(e,Y)),L({id:n,diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,Y,O]),Q=Object(r.useCallback)((function(e){if(!R)return!S||k||d||B(Y),void(null==p||p(e,Y));L({id:Y.id,isDragging:!1}),null==w||w(e,Y)}),[Y,S,k,p,w,R,d]),J=Object(r.useCallback)((function(e){null==v||v(e,Y)}),[Y,v]);if(Object(r.useLayoutEffect)((function(){q.current&&!P&&F([{id:n,nodeElement:q.current,forceUpdate:!0}])}),[n,P,C,N]),Object(r.useEffect)((function(){if(q.current){var e=q.current;return null==I||I.observe(e),function(){return null==I?void 0:I.unobserve(e)}}}),[]),P)return null;var ee=l(["react-flow__node","react-flow__node-".concat(a),E,{selected:d,selectable:S}]);return o.a.createElement(mi,{onStart:W,onDrag:Z,onStop:Q,scale:u,disabled:!_,cancel:".nodrag",nodeRef:q,grid:U,enableUserSelectHack:!1,handle:A},o.a.createElement("div",{className:ee,ref:q,style:V,onMouseEnter:H,onMouseMove:X,onMouseLeave:K,onContextMenu:G,onClick:$,onDoubleClick:J,"data-id":n},o.a.createElement(yc,{value:n},o.a.createElement(e,{id:n,data:i,type:a,xPos:s,yPos:f,selected:d,isConnectable:x,sourcePosition:C,targetPosition:N,isDragging:R,dragHandle:A}))))};return t.displayName="NodeWrapper",Object(r.memo)(t)};function Tc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mc=function(e){var t=e.onSelectionChange,n=Ke((function(e){return e.selectedElements}));return Object(r.useEffect)((function(){t(n)}),[n]),null},Rc=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n};function Ic(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Ac=function(e,t){var n=e.getBoundingClientRect();return{source:Fc(".source",e,n,t),target:Fc(".target",e,n,t)}},Fc=function(e,t,n,r){var o=t.querySelectorAll(e);return o&&o.length?Array.from(o).map((function(e){var t=e.getBoundingClientRect(),o=et(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ic(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ic(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/r,y:(t.top-n.top)/r},o)})):null};function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ELEMENTS":var n=t.payload,r={nextNodes:[],nextEdges:[]},o=n.reduce((function(t,n){if(ct(n)){var r=e.nodes.find((function(e){return e.id===n.id}));if(r){var o=Lc(Lc({},r),n);r.position.x===n.position.x&&r.position.y===n.position.y||(o.__rf.position=n.position),void 0!==n.type&&n.type!==r.type&&(o.__rf.width=null),t.nextNodes.push(o)}else t.nextNodes.push(st(n,e.nodeExtent))}else if(it(n)){var a=e.edges.find((function(e){return e.id===n.id}));a?t.nextEdges.push(Lc(Lc({},a),n)):t.nextEdges.push(ft(n))}return t}),r),a=o.nextNodes,i=o.nextEdges;return Lc(Lc({},e),{},{nodes:a,edges:i});case"UPDATE_NODE_DIMENSIONS":var c=e.nodes.map((function(n){var r=t.payload.find((function(e){return e.id===n.id}));if(r){var o=et(r.nodeElement);if(o.width&&o.height&&(n.__rf.width!==o.width||n.__rf.height!==o.height||r.forceUpdate)){var a=Ac(r.nodeElement,e.transform[2]);return Lc(Lc({},n),{},{__rf:Lc(Lc(Lc({},n.__rf),o),{},{handleBounds:a})})}}return n}));return Lc(Lc({},e),{},{nodes:c});case"UPDATE_NODE_POS":var u=t.payload,l=u.id,s=u.pos,f=s;if(e.snapToGrid){var d=Qe(e.snapGrid,2),p=d[0],b=d[1];f={x:p*Math.round(s.x/p),y:b*Math.round(s.y/b)}}var h=e.nodes.map((function(e){return e.id===l?Lc(Lc({},e),{},{__rf:Lc(Lc({},e.__rf),{},{position:f})}):e}));return Lc(Lc({},e),{},{nodes:h});case"UPDATE_NODE_POS_DIFF":var m=t.payload,y=m.id,v=m.diff,g=m.isDragging,O=e.nodes.map((function(t){var n;if(y===t.id||null!==(n=e.selectedElements)&&void 0!==n&&n.find((function(e){return e.id===t.id}))){var r=Lc(Lc({},t),{},{__rf:Lc(Lc({},t.__rf),{},{isDragging:g})});return v&&(r.__rf.position={x:t.__rf.position.x+v.x,y:t.__rf.position.y+v.y}),r}return t}));return Lc(Lc({},e),{},{nodes:O});case"SET_USER_SELECTION":var w=t.payload;return Lc(Lc({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:w.x,startY:w.y,x:w.x,y:w.y,draw:!0}});case"UPDATE_USER_SELECTION":var j,E,_=t.payload,S=null!==(j=e.userSelectionRect.startX)&&void 0!==j?j:0,x=null!==(E=e.userSelectionRect.startY)&&void 0!==E?E:0,k=Lc(Lc({},e.userSelectionRect),{},{x:_.x<S?_.x:e.userSelectionRect.x,y:_.y<x?_.y:e.userSelectionRect.y,width:Math.abs(_.x-S),height:Math.abs(_.y-x)}),C=mt(e.nodes,k,e.transform,!1,!0),N=yt(C,e.edges),P=[].concat(Ze(C),Ze(N)),T=!Rc(P,e.selectedElements),D=T?{selectedElements:P.length>0?P:null}:{};return Lc(Lc(Lc({},e),D),{},{userSelectionRect:k});case"UNSET_USER_SELECTION":var M,R=null===(M=e.selectedElements)||void 0===M?void 0:M.filter((function(e){return ct(e)&&e.__rf})),I=Lc(Lc({},e),{},{selectionActive:!1,userSelectionRect:Lc(Lc({},e.userSelectionRect),{},{draw:!1})});if(R&&0!==R.length){var A=ht(R);I.selectedNodesBbox=A,I.nodesSelectionActive=!0}else I.selectedElements=null,I.nodesSelectionActive=!1;return I;case"SET_SELECTED_ELEMENTS":var F=t.payload,B=Array.isArray(F)?F:[F],L=!Rc(B,e.selectedElements),z=L?B:e.selectedElements;return Lc(Lc({},e),{},{selectedElements:z});case"ADD_SELECTED_ELEMENTS":var q=e.multiSelectionActive,Y=e.selectedElements,U=t.payload,V=Array.isArray(U)?U:[U],H=V;q&&(H=Y?[].concat(Ze(Y),Ze(V)):V);var X=!Rc(H,e.selectedElements),K=X?H:e.selectedElements;return Lc(Lc({},e),{},{selectedElements:K});case"INIT_D3ZOOM":var G=t.payload,$=G.d3Zoom,W=G.d3Selection,Z=G.d3ZoomHandler,Q=G.transform;return Lc(Lc({},e),{},{d3Zoom:$,d3Selection:W,d3ZoomHandler:Z,transform:Q});case"SET_MINZOOM":var J,ee=t.payload;return null===(J=e.d3Zoom)||void 0===J||J.scaleExtent([ee,e.maxZoom]),Lc(Lc({},e),{},{minZoom:ee});case"SET_MAXZOOM":var te,ne=t.payload;return null===(te=e.d3Zoom)||void 0===te||te.scaleExtent([e.minZoom,ne]),Lc(Lc({},e),{},{maxZoom:ne});case"SET_TRANSLATEEXTENT":var re,oe=t.payload;return null===(re=e.d3Zoom)||void 0===re||re.translateExtent(oe),Lc(Lc({},e),{},{translateExtent:oe});case"SET_NODE_EXTENT":var ae=t.payload;return Lc(Lc({},e),{},{nodeExtent:ae,nodes:e.nodes.map((function(e){return Lc(Lc({},e),{},{__rf:Lc(Lc({},e.__rf),{},{position:nt(e.__rf.position,ae)})})}))});case"SET_ON_CONNECT":case"SET_ON_CONNECT_START":case"SET_ON_CONNECT_STOP":case"SET_ON_CONNECT_END":case"RESET_SELECTED_ELEMENTS":case"UNSET_NODES_SELECTION":case"UPDATE_TRANSFORM":case"UPDATE_SIZE":case"SET_CONNECTION_POSITION":case"SET_CONNECTION_NODEID":case"SET_SNAPTOGRID":case"SET_SNAPGRID":case"SET_INTERACTIVE":case"SET_NODES_DRAGGABLE":case"SET_NODES_CONNECTABLE":case"SET_ELEMENTS_SELECTABLE":case"SET_MULTI_SELECTION_ACTIVE":case"SET_CONNECTION_MODE":return Lc(Lc({},e),t.payload);default:return e}}function qc(e){return h(zc,e)}var Yc={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:ia.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.6.11"},Uc=qc(Yc),Vc=function(e){var t=e.children,n=Object(r.useContext)(W);return Object(r.useMemo)((function(){var e,t;return null==n||null===(e=n.store)||void 0===e||null===(t=e.getState())||void 0===t?void 0:t.reactFlowVersion}),[n])?o.a.createElement(o.a.Fragment,null,t):o.a.createElement(ne,{store:Uc},t)};function Hc(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Vc.displayName="ReactFlowWrapper";Hc(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}");Hc(".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var Xc=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function Kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var $c={input:xc,default:_c,output:Cc},Wc={default:Mi,straight:Wi,step:$i,smoothstep:Ui},Zc=Object(r.forwardRef)((function(e,t){var n=e.elements,a=void 0===n?[]:n,i=e.className,c=e.nodeTypes,s=void 0===c?$c:c,f=e.edgeTypes,d=void 0===f?Wc:f,p=e.onElementClick,b=e.onLoad,h=e.onMove,m=e.onMoveStart,y=e.onMoveEnd,v=e.onElementsRemove,g=e.onConnect,O=e.onConnectStart,w=e.onConnectStop,j=e.onConnectEnd,E=e.onNodeMouseEnter,_=e.onNodeMouseMove,S=e.onNodeMouseLeave,x=e.onNodeContextMenu,k=e.onNodeDoubleClick,C=e.onNodeDragStart,N=e.onNodeDrag,P=e.onNodeDragStop,T=e.onSelectionChange,D=e.onSelectionDragStart,M=e.onSelectionDrag,R=e.onSelectionDragStop,I=e.onSelectionContextMenu,A=e.connectionMode,F=void 0===A?ia.Strict:A,B=e.connectionLineType,L=void 0===B?ca.Bezier:B,z=e.connectionLineStyle,q=e.connectionLineComponent,Y=e.deleteKeyCode,U=void 0===Y?"Backspace":Y,V=e.selectionKeyCode,H=void 0===V?"Shift":V,X=e.multiSelectionKeyCode,K=void 0===X?"Meta":X,G=e.zoomActivationKeyCode,$=void 0===G?"Meta":G,W=e.snapToGrid,Z=void 0!==W&&W,Q=e.snapGrid,J=void 0===Q?[15,15]:Q,ee=e.onlyRenderVisibleElements,te=void 0!==ee&&ee,ne=e.selectNodesOnDrag,re=void 0===ne||ne,oe=e.nodesDraggable,ae=e.nodesConnectable,ie=e.elementsSelectable,ce=e.minZoom,ue=e.maxZoom,le=e.defaultZoom,se=void 0===le?1:le,fe=e.defaultPosition,de=void 0===fe?[0,0]:fe,pe=e.translateExtent,be=e.preventScrolling,he=void 0===be||be,me=e.nodeExtent,ye=e.arrowHeadColor,ve=void 0===ye?"#b1b1b7":ye,ge=e.markerEndId,Oe=e.zoomOnScroll,we=void 0===Oe||Oe,je=e.zoomOnPinch,Ee=void 0===je||je,_e=e.panOnScroll,Se=void 0!==_e&&_e,xe=e.panOnScrollSpeed,ke=void 0===xe?.5:xe,Ce=e.panOnScrollMode,Ne=void 0===Ce?ua.Free:Ce,Pe=e.zoomOnDoubleClick,Te=void 0===Pe||Pe,De=e.paneMoveable,Me=void 0===De||De,Re=e.onPaneClick,Ie=e.onPaneScroll,Ae=e.onPaneContextMenu,Fe=e.children,Be=e.onEdgeUpdate,Le=e.onEdgeContextMenu,ze=e.onEdgeDoubleClick,qe=e.onEdgeMouseEnter,Ye=e.onEdgeMouseMove,Ue=e.onEdgeMouseLeave,Ve=e.onEdgeUpdateStart,He=e.onEdgeUpdateEnd,Xe=e.edgeUpdaterRadius,Ke=void 0===Xe?10:Xe,Ge=e.nodeTypesId,$e=void 0===Ge?"1":Ge,We=e.edgeTypesId,Ze=void 0===We?"1":We,Qe=u(e,Xc),Je=Object(r.useMemo)((function(){return function(e){var t={input:Pc(e.input||xc),default:Pc(e.default||_c),output:Pc(e.output||Cc)},n=Object.keys(e).filter((function(e){return!["input","default","output"].includes(e)})).reduce((function(t,n){return t[n]=Pc(e[n]||_c),t}),{});return Dc(Dc({},t),n)}(s)}),[$e]),et=Object(r.useMemo)((function(){return function(e){var t={default:rc(e.default||Mi),straight:rc(e.bezier||Wi),step:rc(e.step||$i),smoothstep:rc(e.step||Ui)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=rc(e[n]||Mi),t}),{});return ac(ac({},t),n)}(d)}),[Ze]),tt=l(["react-flow",i]);return o.a.createElement("div",Gc(Gc({},Qe),{},{ref:t,className:tt}),o.a.createElement(Vc,null,o.a.createElement(bc,{onLoad:b,onMove:h,onMoveStart:m,onMoveEnd:y,onElementClick:p,onNodeMouseEnter:E,onNodeMouseMove:_,onNodeMouseLeave:S,onNodeContextMenu:x,onNodeDoubleClick:k,onNodeDragStart:C,onNodeDrag:N,onNodeDragStop:P,nodeTypes:Je,edgeTypes:et,connectionMode:F,connectionLineType:L,connectionLineStyle:z,connectionLineComponent:q,selectionKeyCode:H,onElementsRemove:v,deleteKeyCode:U,multiSelectionKeyCode:K,zoomActivationKeyCode:$,onConnect:g,onConnectStart:O,onConnectStop:w,onConnectEnd:j,snapToGrid:Z,snapGrid:J,onlyRenderVisibleElements:te,nodesDraggable:oe,nodesConnectable:ae,elementsSelectable:ie,selectNodesOnDrag:re,minZoom:ce,maxZoom:ue,defaultZoom:se,defaultPosition:de,translateExtent:pe,preventScrolling:he,nodeExtent:me,arrowHeadColor:ve,markerEndId:ge,zoomOnScroll:we,zoomOnPinch:Ee,zoomOnDoubleClick:Te,panOnScroll:Se,panOnScrollSpeed:ke,panOnScrollMode:Ne,paneMoveable:Me,onPaneClick:Re,onPaneScroll:Ie,onPaneContextMenu:Ae,onSelectionDragStart:D,onSelectionDrag:M,onSelectionDragStop:R,onSelectionContextMenu:I,onEdgeUpdate:Be,onEdgeContextMenu:Le,onEdgeDoubleClick:ze,onEdgeMouseEnter:qe,onEdgeMouseMove:Ye,onEdgeMouseLeave:Ue,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:He,edgeUpdaterRadius:Ke}),o.a.createElement(hc,{elements:a}),T&&o.a.createElement(Mc,{onSelectionChange:T}),Fe))}));Zc.displayName="ReactFlow";var Qc=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.style,c=e.color,u=e.strokeColor,s=e.strokeWidth,f=e.className,d=e.borderRadius,p=e.shapeRendering,b=i||{},h=b.background,m=b.backgroundColor,y=c||h||m;return o.a.createElement("rect",{className:l(["react-flow__minimap-node",f]),x:t,y:n,rx:d,ry:d,width:r,height:a,fill:y,stroke:u,strokeWidth:s,shapeRendering:p})};Qc.displayName="MiniMapNode";var Jc=Object(r.memo)(Qc),eu=function(e){var t,n=e.style,r=e.className,a=e.nodeStrokeColor,i=void 0===a?"#555":a,c=e.nodeColor,u=void 0===c?"#fff":c,s=e.nodeClassName,f=void 0===s?"":s,d=e.nodeBorderRadius,p=void 0===d?5:d,b=e.nodeStrokeWidth,h=void 0===b?2:b,m=e.maskColor,y=void 0===m?"rgb(240, 242, 243, 0.7)":m,v=Ke((function(e){return e.width})),g=Ke((function(e){return e.height})),O=Qe(Ke((function(e){return e.transform})),3),w=O[0],j=O[1],E=O[2],_=Ke((function(e){return e.nodes})),S=l(["react-flow__minimap",r]),x=(null==n?void 0:n.width)||200,k=(null==n?void 0:n.height)||150,C=u instanceof Function?u:function(){return u},N=i instanceof Function?i:function(){return i},P=f instanceof Function?f:function(){return f},T=_&&_.length,D=ht(_),M={x:-w/E,y:-j/E,width:v/E,height:g/E},R=T?(t=M,bt(dt(pt(D),pt(t)))):M,I=R.width/x,A=R.height/k,F=Math.max(I,A),B=F*x,L=F*k,z=5*F,q=R.x-(B-R.width)/2-z,Y=R.y-(L-R.height)/2-z,U=B+2*z,V=L+2*z,H="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return o.a.createElement("svg",{width:x,height:k,viewBox:"".concat(q," ").concat(Y," ").concat(U," ").concat(V),style:n,className:S},_.filter((function(e){return!e.isHidden})).map((function(e){return o.a.createElement(Jc,{key:e.id,x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height,style:e.style,className:P(e),color:C(e),borderRadius:p,strokeColor:N(e),strokeWidth:h,shapeRendering:H})})),o.a.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(q-z,",").concat(Y-z,"h").concat(U+2*z,"v").concat(V+2*z,"h").concat(-U-2*z,"z\n        M").concat(M.x,",").concat(M.y,"h").concat(M.width,"v").concat(M.height,"h").concat(-M.width,"z"),fill:y,fillRule:"evenodd"}))};eu.displayName="MiniMap";var tu,nu,ru,ou,au;function iu(){return(iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function cu(e){return r.createElement("svg",iu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),tu||(tu=r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))}function uu(){return(uu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lu(e){return r.createElement("svg",uu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},e),nu||(nu=r.createElement("path",{d:"M0 0h32v4.2H0z"})))}function su(){return(su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fu(e){return r.createElement("svg",su({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},e),ru||(ru=r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 01-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))}function du(){return(du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pu(e){return r.createElement("svg",du({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),ou||(ou=r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))}function bu(){return(bu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hu(e){return r.createElement("svg",bu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),au||(au=r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})))}var mu=["children","className"];function yu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var vu=function(e){var t=e.children,n=e.className,r=u(e,mu);return o.a.createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yu(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"button",className:l(["react-flow__controls-button",n])},r),t)},gu=function(e){var t=e.style,n=e.showZoom,a=void 0===n||n,i=e.showFitView,c=void 0===i||i,u=e.showInteractive,s=void 0===u||u,f=e.fitViewParams,d=e.onZoomIn,p=e.onZoomOut,b=e.onFitView,h=e.onInteractiveChange,m=e.className,y=e.children,v=Qe(Object(r.useState)(!1),2),g=v[0],O=v[1],w=Xe((function(e){return e.setInteractive})),j=dc(),E=j.zoomIn,_=j.zoomOut,S=j.fitView,x=Ke((function(e){return e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable})),k=l(["react-flow__controls",m]),C=Object(r.useCallback)((function(){null==E||E(),null==d||d()}),[E,d]),N=Object(r.useCallback)((function(){null==_||_(),null==p||p()}),[_,p]),P=Object(r.useCallback)((function(){null==S||S(f),null==b||b()}),[S,f,b]),T=Object(r.useCallback)((function(){null==w||w(!x),null==h||h(!x)}),[x,w,h]);return Object(r.useEffect)((function(){O(!0)}),[]),g?o.a.createElement("div",{className:k,style:t},a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(vu,{onClick:C,className:"react-flow__controls-zoomin"},o.a.createElement(cu,null)),o.a.createElement(vu,{onClick:N,className:"react-flow__controls-zoomout"},o.a.createElement(lu,null))),c&&o.a.createElement(vu,{className:"react-flow__controls-fitview",onClick:P},o.a.createElement(fu,null)),s&&o.a.createElement(vu,{className:"react-flow__controls-interactive",onClick:T},x?o.a.createElement(hu,null):o.a.createElement(pu,null)),y):null};gu.displayName="Controls";var Ou,wu=Object(r.memo)(gu);function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eu(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _u=(c(Ou={},aa.Dots,"#81818a"),c(Ou,aa.Lines,"#eee"),Ou),Su=function(e){var t=e.variant,n=void 0===t?aa.Dots:t,a=e.gap,i=void 0===a?15:a,c=e.size,u=void 0===c?.4:c,s=e.color,f=e.style,d=e.className,p=Qe(Ke((function(e){return e.transform})),3),b=p[0],h=p[1],m=p[2],y=Object(r.useMemo)((function(){return"pattern-".concat(Math.floor(1e5*Math.random()))}),[]),v=l(["react-flow__background",d]),g=i*m,O=b%g,w=h%g,j=n===aa.Lines,E=s||_u[n],_=j?function(e,t,n){return o.a.createElement("path",{stroke:n,strokeWidth:t,d:"M".concat(e/2," 0 V").concat(e," M0 ").concat(e/2," H").concat(e)})}(g,u,E):function(e,t){return o.a.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(u*m,E);return o.a.createElement("svg",{className:v,style:Eu(Eu({},f),{},{width:"100%",height:"100%"})},o.a.createElement("pattern",{id:y,x:O,y:w,width:g,height:g,patternUnits:"userSpaceOnUse"},_),o.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(y,")")}))};Su.displayName="Background";var xu=Object(r.memo)(Su),ku=function(e){var t=e.children,n=Object(r.useMemo)((function(){return qc(Yc)}),[]);return o.a.createElement(ne,{store:n},t)};ku.displayName="ReactFlowProvider"},function(e,t,n){var r;try{r=n(365)}catch(e){}r||(r=window.graphlib),e.exports=r},function(e,t,n){"use strict";var r=n(0),o=n(14),a=n.n(o),i=n(5),c=n(9),u=n.n(c);n(171),n(172);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t,n,o,c,u,f,d=e.renderContent,p=e.renderToggle,b=e.position,h=void 0===b?"bottom right":b,m=e.className,y=e.contentClassName,v=e.expandOnMobile,g=e.headerTitle,O=e.focusOnMount,w=e.popoverProps,j=e.onClose,E=e.onToggle,_=Object(r.useRef)(),S=(n=!1,o=E,c=s(Object(r.useState)(n),2),u=c[0],f=c[1],[u,function(e){f(e),o&&o(e)}]),x=s(S,2),k=x[0],C=x[1];function N(){j&&j(),C(!1)}Object(r.useEffect)((function(){return function(){E&&E(!1)}}),[]);var P={isOpen:k,onToggle:function(){C(!k)},onClose:N};return Object(r.createElement)("div",{className:a()("components-dropdown",m),ref:_,tabIndex:"-1"},p(P),k&&Object(r.createElement)(i.Popover,l({position:h,onClose:N,onFocusOutside:function(){var e=_.current.ownerDocument,t=e.activeElement.closest('[role="dialog"]');_.current.contains(e.activeElement)||t&&!t.contains(_.current)||N()},expandOnMobile:v,headerTitle:g,focusOnMount:O},w,{anchorRef:null!==(t=null==w?void 0:w.anchorRef)&&void 0!==t?t:_.current,className:a()("components-dropdown__content",w?w.className:void 0,y)}),d(P)))}var p=n(8);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,o,c=v(u);function u(){return h(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this.props,t=e.label,n=e.renderContent,o=e.classes,c=e.buttonIcon,u=e.buttonLabel,l=e.dropdownClasses,s=e.menuPosition,f=void 0===s?"bottom left":s;return n?Object(r.createElement)("div",{className:"bwf-ellipsis-menu"},Object(r.createElement)(d,{contentClassName:a()("bwf-ellipsis-menu__popover",l),position:f,renderToggle:function(e){var n=e.onToggle,l=e.isOpen,s=a()("bwf-ellipsis-menu__toggle",o,{"is-opened":l});return Object(r.createElement)(i.Button,{className:s,onClick:n,icon:c,title:t,"aria-expanded":l},u||!c&&Object(r.createElement)(p.a,{icon:"ellipsis",size:20}))},renderContent:function(e){return Object(r.createElement)(i.NavigableMenu,{className:"bwf-ellipsis-menu__content"},n(e))}})):null}}])&&m(t.prototype,n),o&&m(t,o),u}(r.Component);w.propTypes={label:u.a.string.isRequired,renderContent:u.a.func};t.a=w},,function(e,t,n){"use strict";var r=n(0),o=n(6),a=n(9),i=n.n(a),c=n(14),u=n.n(c),l=(n(166),n(159)),s=n(1);function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,n,o,a=y(i);function i(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e),n=g(t),o=!0,(r="mounted")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(g(t)),t.fetchOptions=t.fetchOptions.bind(g(t)),t.updateSelected=t.updateSelected.bind(g(t)),t}return t=i,(n=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===b(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var o={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(o)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return t?this.getAutocompleter().options(t).then(function(){var e,r=(e=regeneratorRuntime.mark((function e(r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mounted){e.next=4;break}return o=n.getFormattedOptions(r,t),n.setState({options:o}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){p(a,r,o,i,c,"next",e)}function c(e){p(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return e.value?n.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props,r=n.allowFreeTextSearch,o=n.emptySearchText,a=void 0===o?Object(s.__)("Not Found","funnel-builder"):o;if(!t||!t.length)return[];if(!r)return e.length>0?e:[{label:a,key:"",notFound:!0}];if(!r)return e;var i=this.getAutocompleter();return[].concat(f(i.getFreeTextOptions(t,e)),f(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,o=t.inlineTags,a=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,d=(t.multiple,this.state.options),p=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(l.a,{className:u()("bwf-search",n,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:o,isSearchable:!0,label:a,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:a,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:d,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:p,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&h(t.prototype,n),o&&h(t,o),i}(r.Component);w.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool},w.defaultProps={allowFreeTextSearch:!1,onChange:o.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1},t.a=w},function(e,t,n){var r=n(393),o=n(403),a=n(157),i=n(135),c=n(406);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},,,function(e,t,n){},function(e,t,n){var r=n(267),o=n(317),a=n(154);e.exports=function(e){return a(e)?r(e):o(e)}},function(e,t,n){"use strict";var r=n(0),o=n(14),a=n.n(o),i=n(9),c=n.n(i),u=(n(144),n(138));n(188),n(208);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,o,i=p(c);function c(){return s(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.children,o=e.description,i=e.isInactive,c=e.menu,l=e.title,s=e.hideHeader,f=a()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(r.createElement)("div",{className:f},s&&"no"==s&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-header"},!!l&&Object(r.createElement)("div",{className:"bwf-card-title-wrapper"},Object(r.createElement)(u.a,{className:"bwf-card-title bwf-card-header-item"},l),o&&Object(r.createElement)(u.a,{className:"bwf-card-description bwf-card-header-item"},o)),t&&Object(r.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(r.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(r.createElement)(u.b,{className:"bwf-card-body"},n))}}])&&f(t.prototype,n),o&&f(t,o),c}(r.Component);m.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])},t.a=m},function(e,t,n){"use strict";var r=n(0),o=n(5),a=n(62),i=n(9),c=n.n(i);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return b(e)}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,i,c=d(u);function u(){var e;return l(this,u),(e=c.apply(this,arguments)).onClick=e.onClick.bind(b(e)),e.onFocusFormToggle=e.onFocusFormToggle.bind(b(e)),e.onKeyDown=e.onKeyDown.bind(b(e)),e.container=Object(r.createRef)(),e}return t=u,(n=[{key:"onClick",value:function(e){var t=this.props,n=t.isClickable,r=t.onInvoke;n&&(e.preventDefault(),r())}},{key:"onKeyDown",value:function(e){e.target.isSameNode(e.currentTarget)&&(e.keyCode!==a.ENTER&&e.keyCode!==a.SPACE||(e.preventDefault(),this.props.onInvoke()),e.keyCode===a.UP&&e.preventDefault(),e.keyCode===a.DOWN&&(e.preventDefault(),(e.target.nextSibling||e.target.parentNode.querySelector(".bwf-ellipsis-menu__item")).focus()))}},{key:"onFocusFormToggle",value:function(){this.container.current.focus()}},{key:"render",value:function(){var e=this.props,t=e.checked,n=e.children;return e.isCheckbox?Object(r.createElement)("div",{"aria-checked":t,ref:this.container,role:"menuitemcheckbox",tabIndex:"0",onKeyDown:this.onKeyDown,onClick:this.onClick,className:"bwf-ellipsis-menu__item"},Object(r.createElement)(o.BaseControl,{className:"components-toggle-control"},Object(r.createElement)(o.FormToggle,{"aria-hidden":"true",checked:t,onChange:this.props.onInvoke,onFocus:this.onFocusFormToggle,onClick:function(e){return e.stopPropagation()},tabIndex:"-1"}),n)):Object(r.createElement)("div",{role:"menuitem",tabIndex:"0",onKeyDown:this.onKeyDown,onClick:this.onClick,className:"bwf-ellipsis-menu__item"},n)}}])&&s(t.prototype,n),i&&s(t,i),u}(r.Component);m.propTypes={checked:c.a.bool,children:c.a.node,isCheckbox:c.a.bool,isClickable:c.a.bool},m.defaultProps={isClickable:!1,isCheckbox:!1},t.a=m},,,function(e,t,n){var r=n(267),o=n(376),a=n(154);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t){e.exports=function(e){return e}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(14),i=n.n(a),c=n(6),u=n(9),l=n.n(u),s=n(5),f=n(61),d=n(62);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,o,a=y(u);function u(){var e;return b(this,u),(e=a.apply(this,arguments)).handleKeyDown=e.handleKeyDown.bind(g(e)),e.select=e.select.bind(g(e)),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return t=u,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,a=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case d.UP:n(),e.preventDefault(),e.stopPropagation();break;case d.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case d.ENTER:this.select(o[i]),e.preventDefault(),e.stopPropagation();break;case d.LEFT:case d.RIGHT:c(!1);break;case d.ESCAPE:return c(!1),void a(null);case d.TAB:this.select(o[i]),c(!1),a(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,a=t.options,c=t.selectedIndex,u=t.staticList,l=i()("bwf-select-control-listbox",{"is-static":u});return Object(r.createElement)("div",{ref:this.listbox,id:o,role:"listbox",className:l,tabIndex:"-1"},a.map((function(t,o){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===c,disabled:t.isDisabled,className:i()("bwf-select-control-option",{"is-selected":o===c}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&h(t.prototype,n),o&&h(t,o),u}(r.Component);w.propTypes={instanceId:l.a.number,listboxId:l.a.string,node:l.a.instanceOf(Element).isRequired,onSelect:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,selectedIndex:l.a.number,staticList:l.a.bool};var j=w,E=n(337);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return T(e)}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(u,e);var t,n,a,i=N(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).removeAll=t.removeAll.bind(T(t)),t.removeResult=t.removeResult.bind(T(t)),t}return t=u,(n=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,o=n.onChange,a=Object(c.findIndex)(r,{key:e});o([].concat(S(r.slice(0,a)),S(r.slice(a+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,a=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,a){if(!t.label)return null;var i=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,a+1,n.length);return Object(r.createElement)(E.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),a&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&k(t.prototype,n),a&&k(t,a),u}(r.Component);M.propTypes={onChange:l.a.func,onSelect:l.a.func,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showClearButton:l.a.bool};var R=M,I=n(8);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(u,e);var t,n,a,c=q(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).state={isActive:!1},t.input=Object(r.createRef)(),t.updateSearch=t.updateSearch.bind(U(t)),t.onFocus=t.onFocus.bind(U(t)),t.onBlur=t.onBlur.bind(U(t)),t.onKeyDown=t.onKeyDown.bind(U(t)),t}return t=u,(n=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,a=n.showAllOnFocus,i=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&a?(n.target.select(),i("")):r?e(n.target.value):o(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,a=t.onChange,i=t.query,c=t.setExpanded;d.BACKSPACE===e.keyCode&&!i&&o.length&&a(F(o.slice(0,-1))),d.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),d.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,o=e.inlineTags,a=e.instanceId,i=e.isExpanded,c=e.isSearchable,u=e.listboxId,l=e.onSearch,s=e.placeholder,f=e.searchInputType,d=this.state.isActive,p=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(a,"-control-input"),ref:this.input,type:c?f:"button",value:this.getInputValue(),placeholder:d&&!p?s:"",onChange:this.updateSearch(l),onFocus:this.onFocus(l),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-haspopup":"true","aria-owns":u,"aria-controls":u,"aria-activedescendant":t,"aria-describedby":n&&o?"search-inline-input-".concat(a):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,o=e.query,a=e.selected,i=a.length?a[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&o?o:"":i}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.hasTags,c=t.help,u=t.inlineTags,l=t.instanceId,s=t.isSearchable,f=t.label,d=t.query,p=this.state.isActive;return Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control-control",n,{empty:!d||0===d.length,"is-active":p,"has-tags":u&&a,"with-value":this.getInputValue().length,"has-error":!!c}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(I.a,{icon:"search",size:18}),u&&Object(r.createElement)(R,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(l,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),u&&Object(r.createElement)("span",{id:"search-inline-input-".concat(l),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!c&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(l,"__help"),className:"components-base-control__help"},c)))}}])&&L(t.prototype,n),a&&L(t,a),u}(r.Component);H.propTypes={hasTags:l.a.bool,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,instanceId:l.a.number,label:l.a.string,listboxId:l.a.string,onBlur:l.a.func,onChange:l.a.func,onSearch:l.a.func,placeholder:l.a.string,query:l.a.string,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showAllOnFocus:l.a.bool,bwfMaintainSingleTerm:l.a.bool};var X=H;n(356);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e){return function(e){if(Array.isArray(e))return W(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=oe(e);if(t){var o=oe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return re(e)}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(l,e);var t,n,a,u=te(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),ae(re(t=u.call(this,e)),"mounted",!0),t.state=Q(Q({},t.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),t.bindNode=t.bindNode.bind(re(t)),t.decrementSelectedIndex=t.decrementSelectedIndex.bind(re(t)),t.incrementSelectedIndex=t.incrementSelectedIndex.bind(re(t)),t.onAutofillChange=t.onAutofillChange.bind(re(t)),t.updateFilteredOptions=Object(c.debounce)(t.updateFilteredOptions.bind(re(t)),e.searchDebounceTime),t.search=t.search.bind(re(t)),t.selectOption=t.selectOption.bind(re(t)),t.setExpanded=t.setExpanded.bind(re(t)),t}return t=l,a=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(n=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,a=this.state.query,i=n?[].concat($(o),[e]):[e];this.reset(i),Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(i,a):o!==e.key&&r(e.key,a)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e,t){for(var n=this.props,r=n.excludeSelectedOptions,o=n.getSearchExpression,a=n.maxResults,i=n.onFilter,u=this.getSelected().map((function(e){return e.key})),l=[],s=o(Object(c.escapeRegExp)(t?t.trim():"")),f=s?new RegExp(s,"i"):/^$/,d=0;d<e.length;d++){var p=e[d];if(!r||!u.includes(p.key)){var b=p.keywords,h=void 0===b?[]:b;if("string"==typeof p.label&&(h=[].concat($(h),[p.label])),h.some((function(e){return f.test(e)}))&&(l.push(p),a&&l.length===a))break}}return i(l,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,a=n.onSearch,i=this.activePromise=Promise.resolve(a(o,e)).then((function(n){if(i===t.activePromise&&t.mounted){var o=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:o,isExpanded:Boolean(o.length)},(function(){return t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,a=e.controlClassName,c=e.inlineTags,u=e.instanceId,l=e.isSearchable,s=e.options,f=this.state,d=f.isExpanded,p=f.isFocused,b=f.selectedIndex,h=this.hasTags(),m=(s[b]||{}).key,y=void 0===m?"":m,v=d?"bwf-select-control-listbox-".concat(u):null,g=d?"bwf-select-control-option-".concat(u,"-").concat(y):null;return Object(r.createElement)("div",{className:i()("bwf-select-control",o,{"has-inline-tags":h&&c,"is-focused":p,"is-searchable":l}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)(X,G({},this.props,this.state,{activeId:g,className:a,hasTags:h,isExpanded:d,listboxId:v,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!c&&h&&Object(r.createElement)(R,G({},this.props,{selected:this.getSelected()})),d&&Object(r.createElement)(j,G({},this.props,this.state,{activeId:g,listboxId:v,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&J(t.prototype,n),a&&J(t,a),l}(r.Component);ie.propTypes={autofill:l.a.string,children:l.a.node,className:l.a.string,controlClassName:l.a.string,excludeSelectedOptions:l.a.bool,onFilter:l.a.func,getSearchExpression:l.a.func,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,label:l.a.string,onChange:l.a.func,onSearch:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,placeholder:l.a.string,searchDebounceTime:l.a.number,selected:l.a.oneOfType([l.a.string,l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string}))]),maxResults:l.a.number,multiple:l.a.bool,showClearButton:l.a.bool,searchInputType:l.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:l.a.bool,showAllOnFocus:l.a.bool,staticList:l.a.bool,bwfMaintainSingleTerm:l.a.bool},ie.defaultProps={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1};t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(ie)},,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(14),i=n.n(a),c=n(5),u=n(6),l=n(9),s=n.n(l),f=n(61),d=n(511),p=n(654),b=n(655);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,e);var t,n,a,l=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},t.container=Object(r.createRef)(),t.sortBy=t.sortBy.bind(w(t)),t.updateTableShadow=t.updateTableShadow.bind(w(t)),t}return t=s,(n=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query;return function(){var n=o.orderby||Object(u.get)(Object(u.find)(r,{defaultSort:!0}),"key",!1),a=o.order||Object(u.get)(Object(u.find)(r,{key:n}),"defaultOrder","desc"),i="desc";e===n&&(i="desc"===a?"asc":"desc"),t.props.onSort(e,i)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,n=t.isScrollableRight,r=t.isScrollableLeft,o=e.scrollWidth-e.scrollLeft<=e.offsetWidth;o&&n?this.setState({isScrollableRight:!1}):o||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var a=e.scrollLeft<=0;a&&r?this.setState({isScrollableLeft:!1}):a||r||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.ariaHidden,a=t.caption,l=t.classNames,s=t.headers,f=t.instanceId,h=t.query,y=t.rowHeader,v=t.rows,g=t.rowClasses,O=t.emptyMessage,w=this.state,j=w.isScrollableRight,E=w.isScrollableLeft,_=w.tabIndex,S=i()("bwf-table-table",l,{"is-scrollable-right":j,"is-scrollable-left":E}),x=h.orderby||Object(u.get)(Object(u.find)(s,{defaultSort:!0}),"key",!1),k=h.order||Object(u.get)(Object(u.find)(s,{key:x}),"defaultOrder","desc"),C=!!v.length;return Object(r.createElement)("div",{className:S,ref:this.container,tabIndex:_,"aria-hidden":n,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(r.createElement)("table",null,Object(r.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},a,"0"===_&&Object(r.createElement)("small",null,Object(o.__)("(scroll to see more)","funnel-builder"))),Object(r.createElement)("tbody",null,Object(r.createElement)("tr",null,s.map((function(t,n){var a=t.cellClassName,l=t.isSortable,s=t.isNumeric,h=t.key,y=t.label,v=t.screenReaderLabel,g="header-".concat(f,"-").concat(n),O={className:i()("bwf-table-header",a,{"is-sortable":l,"is-sorted":x===h,"is-numeric":s})};l&&(O["aria-sort"]="none",x===h&&(O["aria-sort"]="asc"===k?"ascending":"descending"));var w=x===h&&"asc"!==k?Object(o.sprintf)(Object(o.__)("Sort by %s in ascending order","funnel-builder"),v):Object(o.sprintf)(Object(o.__)("Sort by %s in descending order","funnel-builder"),v),j=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{"aria-hidden":Boolean(v)},y),v&&Object(r.createElement)("span",{className:"screen-reader-text"},v));return Object(r.createElement)("th",m({role:"columnheader",scope:"col",key:n},O),l?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Button,{"aria-describedby":g,onClick:C?e.sortBy(h):u.noop},j,x===h&&"asc"===k?Object(r.createElement)(d.a,{icon:p.a}):Object(r.createElement)(d.a,{icon:b.a})),Object(r.createElement)("span",{className:"screen-reader-text",id:g},w)):j)}))),C?v.map((function(e,t){return Object(r.createElement)("tr",{key:t,className:g[t]},e.map((function(e,t){var n=s[t],o=n.cellClassName,a=(n.isLeftAligned,n.isNumeric),c=y===t,u=c?"th":"td",l=i()("bwf-table-item",o,{"is-numeric":a,"is-sorted":x===s[t].key});return Object(r.createElement)(u,{scope:c?"row":null,key:t,className:l},function(e){return e.display||null}(e))})))})):Object(r.createElement)("tr",null,Object(r.createElement)("td",{className:"bwf-table-empty-item",colSpan:s.length},O||Object(o.__)("No data to display","funnel-builder"))))))}}])&&y(t.prototype,n),a&&y(t,a),s}(r.Component);E.propTypes={ariaHidden:s.a.bool,className:s.a.string,headers:s.a.arrayOf(s.a.shape({defaultSort:s.a.bool,defaultOrder:s.a.string,isLeftAligned:s.a.bool,isNumeric:s.a.bool,isSortable:s.a.bool,key:s.a.string,label:s.a.node,required:s.a.bool,screenReaderLabel:s.a.string})),onSort:s.a.func,query:s.a.object,rows:s.a.arrayOf(s.a.arrayOf(s.a.shape({display:s.a.node,value:s.a.oneOfType([s.a.string,s.a.number,s.a.bool])}))).isRequired,rowHeader:s.a.oneOfType([s.a.number,s.a.bool]),rowClasses:s.a.arrayOf(s.a.string)},E.defaultProps={ariaHidden:!1,headers:[],onSort:u.noop,query:{},rowHeader:0,rowClasses:[]},t.a=Object(f.withInstanceId)(E)},function(e,t,n){"use strict";var r=n(0),o=n(5),a=n(14),i=n.n(a),c=n(6),u=n(9),l=n.n(u),s=n(8),f=(n(150),function(e){var t=e.disabled,n=e.value,a=e.onChange,u=e.dateFormat,l=e.label,f=e.describedBy,d=e.error,p=e.onFocus,b=e.onKeyDown,h=e.errorPosition,m=i()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":d}),y=Object(c.uniqueId)("_woo-dates-input");return Object(r.createElement)("div",{className:m},Object(r.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:n,onChange:a,"aria-label":l,id:y,"aria-describedby":"".concat(y,"-message"),placeholder:u.toLowerCase(),onFocus:p,onKeyDown:b,disabled:t}),d&&Object(r.createElement)(o.Popover,{className:"bwf-calendar-input-error",focusOnMount:!1,position:h},d),Object(r.createElement)("span",{className:"bwf-calender-custom-icon"},Object(r.createElement)(s.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(y,"-message")},d||f))});f.propTypes={disabled:l.a.bool,value:l.a.string,onChange:l.a.func.isRequired,dateFormat:l.a.string.isRequired,label:l.a.string.isRequired,describedBy:l.a.string.isRequired,error:l.a.string,errorPosition:l.a.string,onFocus:l.a.func,onKeyDown:l.a.func},f.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:c.noop},t.a=f},function(e,t,n){"use strict";var r=n(0),o=n(5),a=n(26),i=n(9),c=n.n(i),u=n(14),l=n.n(u),s=(n(205),["labels","isOpen"]);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=function(e){var t=e.labels,n=e.isOpen,i=d(e,s),c=l()("bwf-dropdown-button",{"is-open":n,"is-multi-line":t.length>1});return Object(r.createElement)(o.Button,f({className:c,"aria-expanded":n},i),Object(r.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(r.createElement)("span",{key:t},Object(a.decodeEntities)(e))}))))};p.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=p},function(e,t,n){},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(14),a=n.n(o),i=n(900),c=n(893),u=n(9),l=n.n(u);n(182);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,n,o,u=b(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=u.call(this)).state={animate:null},e.container=Object(r.createRef)(),e.onExited=e.onExited.bind(m(e)),e}return t=l,(n=[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.animationKey,o=e.animate,u=a()("bwf-slide-animation",o&&"animate-".concat(o));return Object(r.createElement)("div",{className:u,ref:this.container},Object(r.createElement)(i.a,null,Object(r.createElement)(c.a,f({timeout:200,classNames:"slide",key:n},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])&&d(t.prototype,n),o&&d(t,o),l}(r.Component);v.propTypes={children:l.a.func.isRequired,animationKey:l.a.any.isRequired,animate:l.a.oneOf([null,"left","right"]),onExited:l.a.func},t.a=v},function(e,t,n){var r=n(192),o=n(193);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var l=t[c],s=a?a(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),i?o(n,l,s):r(n,l,s)}return n}},,,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(14),i=n.n(a),c=n(6),u=n(9),l=n.n(u),s=n(152),f=n(144),d=n(153),p=function(e){var t=e.children;return Object(r.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};p.propTypes={children:l.a.node};var b=p,h=n(5),m=n(511),y=n(652),v=n(653);n(209);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=[10,25,50,75,100],k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,a,u=j(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).state={inputValue:t.props.page},t.previousPage=t.previousPage.bind(_(t)),t.nextPage=t.nextPage.bind(_(t)),t.onInputChange=t.onInputChange.bind(_(t)),t.onInputBlur=t.onInputBlur.bind(_(t)),t.perPageChange=t.perPageChange.bind(_(t)),t.selectInputValue=t.selectInputValue.bind(_(t)),t}return t=l,(n=[{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,o=t.total,a=t.page;n(parseInt(e,10));var i=Math.ceil(o/parseInt(e,10));a>i&&r(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,o=parseInt(e.target.value,10);o!==r&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&n(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var a=i()("bwf-pagination-link",{"is-active":t>1}),c=i()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(h.Button,{className:a,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(r.createElement)(m.a,{icon:y.a})),Object(r.createElement)(h.Button,{className:c,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(r.createElement)(m.a,{icon:v.a}))))}},{key:"renderPagePicker",value:function(){var e=this.props.page,t=this.state.inputValue,n=e<1||e>this.pageCount,a=i()("bwf-pagination-page-picker-input",{"has-error":n}),u=Object(c.uniqueId)("bwf-pagination-page-picker-");return Object(r.createElement)("div",{className:"bwf-pagination-page-picker"},Object(r.createElement)("label",{htmlFor:u,className:"bwf-pagination-page-picker-label"},Object(o.__)("Go to page","funnel-builder"),Object(r.createElement)("input",{id:u,className:a,"aria-invalid":n,type:"number",onClick:this.selectInputValue,onChange:this.onInputChange,onBlur:this.onInputBlur,value:t,min:1,max:this.pageCount})))}},{key:"renderPerPagePicker",value:function(){var e=x.map((function(e){return{value:e,label:e}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(h.SelectControl,{label:Object(o.__)("Rows per page","funnel-builder"),value:this.props.perPage,onChange:this.perPageChange,options:e,labelPosition:"side"}))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,o=e.className,a=e.showPagePicker,c=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var u=i()("bwf-pagination",o);return this.pageCount<=1?t>x[0]&&Object(r.createElement)("div",{className:u},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:u},this.renderPageArrows(),a&&this.renderPagePicker(),c&&this.renderPerPagePicker())}}])&&O(t.prototype,n),a&&O(t,a),l}(r.Component);k.propTypes={page:l.a.number.isRequired,onPageChange:l.a.func,perPage:l.a.number.isRequired,onPerPageChange:l.a.func,total:l.a.number.isRequired,className:l.a.string,showPagePicker:l.a.bool,showPerPagePicker:l.a.bool,showPageArrowsLabel:l.a.bool},k.defaultProps={onPageChange:c.noop,onPerPageChange:c.noop,showPagePicker:!0,showPerPagePicker:!0,showPageArrowsLabel:!0};var C=k,N=n(163),P=n(189),T=function(e){var t=e.data;return Object(r.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var n=e.label,o=e.value;return Object(r.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(r.createElement)("span",{className:"bwf-table-summary-value"},o),Object(r.createElement)("span",{className:"bwf-table-summary-label"},n))})))};T.propTypes={data:l.a.array};var D=T;n(210);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return L(this,n)}}function L(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return z(e)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(l,e);var t,n,a,u=B(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=(t=u.call(this,e)).getShowCols(e.headers);return t.state={showCols:n},t.onColumnToggle=t.onColumnToggle.bind(z(t)),t.onPageChange=t.onPageChange.bind(z(t)),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=e.headers,n=e.query,r=this.props,o=r.headers,a=r.onColumnsChange,i=r.query,u=this.state.showCols;if(Object(c.isEqual)(o,t)||this.setState({showCols:this.getShowCols(o)}),i.orderby!==n.orderby&&!u.includes(i.orderby)){var l=u.concat(i.orderby);this.setState({showCols:l}),a(l)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,n=e.visible;return!(void 0!==n&&!n)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var n=e.key;return t.includes(n)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,n=e.rows,r=this.state.showCols;return n.map((function(e){return t.map((function(t,n){var o=t.key;return r.includes(o)&&e[n]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query,a=n.onQueryChange,i=n.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(o.orderby===e){var n=Object(c.find)(r,{defaultSort:!0})||Object(c.first)(r)||{};a("sort")(n.key,"desc")}var u=Object(c.without)(t.showCols,e);return i(u,e),{showCols:u}}var l=[].concat(R(t.showCols),[e]);return i(l,e),{showCols:l}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,n=e.onQueryChange;t&&t.apply(void 0,arguments),n&&n("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.className,c=t.isLoading,u=t.onQueryChange,l=t.onSort,p=t.query,h=t.rowHeader,m=t.rowsPerPage,y=t.showMenu,v=t.summary,g=t.title,O=t.totalRows,w=t.rowClasses,j=t.emptyMessage,E=t.filterColumnIcon,_=void 0===E?"":E,S=t.extraSectionBeforefilterCol,x=void 0===S?Object(r.createElement)(r.Fragment,null):S,k=t.hideHeader,T=this.state.showCols,M=this.props.headers,R=this.getVisibleHeaders(),I=this.getVisibleRows(),A=i()("bwf-table","bwf-analytics-card",a);return Object(r.createElement)(s.a,{className:A,title:g,action:n,hideHeader:k&&"yes"==k?"yes":"no",menu:Object(r.createElement)("div",{className:"bwf-display-flex"},x,y&&Object(r.createElement)(f.a,{label:Object(o.__)("Choose which values to display","funnel-builder"),buttonIcon:_,renderContent:function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,null,Object(o.__)("Columns:","funnel-builder")),M.map((function(t){var n=t.key,o=t.label;return t.required?null:Object(r.createElement)(d.a,{checked:T.includes(n),isCheckbox:!0,isClickable:!0,key:n,onInvoke:e.onColumnToggle(n)},o)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(P.a,{numberOfRows:m,headers:R,rowHeader:h,caption:g,query:p})):Object(r.createElement)(N.a,{rows:I,headers:R,rowHeader:h,caption:g,query:p,emptyMessage:j,onSort:l||u("sort"),rowClasses:w}),Object(r.createElement)(C,{key:parseInt(p.paged,10)||1,page:parseInt(p.paged,10)||1,perPage:m,total:O,onPageChange:this.onPageChange,onPerPageChange:u("per_page")}),v&&Object(r.createElement)(D,{data:v}))}}])&&A(t.prototype,n),a&&A(t,a),l}(r.Component);Y.propTypes={headers:l.a.arrayOf(l.a.shape({hiddenByDefault:l.a.bool,defaultSort:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.oneOfType([l.a.string,l.a.node]),required:l.a.bool})),ids:l.a.arrayOf(l.a.number),isLoading:l.a.bool,onQueryChange:l.a.func,onColumnsChange:l.a.func,onSort:l.a.func,query:l.a.object,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowsPerPage:l.a.number.isRequired,showMenu:l.a.bool,summary:l.a.arrayOf(l.a.shape({label:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number])})),totalRows:l.a.number.isRequired,rowClasses:l.a.arrayOf(l.a.string)},Y.defaultProps={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[]};t.a=Y},,function(e,t,n){"use strict";var r=n(0),o=n(14),a=n.n(o),i=n(60),c=(n(321),n(8)),u=n(6),l=n(7),s=n(5);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,o=e.className,p=e.center,b=void 0!==p&&p,h=e.isDismissive,m=void 0!==h&&h,y=e.onDismisal,v=void 0===y?function(){}:y;if(Object(u.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":b})},m&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return v()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(c.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(i.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(i.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(i.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(i.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),!Object(l.x)()&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(c.a,{icon:"lock2",width:"22",height:"22"}))))})));case"buttons":return Object(r.createElement)(i.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(s.Button,d({isPrimary:!0,key:t,onClick:e.onClick,className:e.className},e.props),e.text,!1!==e.proCheck&&!Object(l.x)()&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(c.a,{icon:"lock2",width:"22",height:"22"})))})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content&&("object"===f(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(5),i=n(14),c=n.n(i),u=n(9),l=n.n(u),s=(n(167),n(40)),f=n.n(s),d=n(6);n(201);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,n,o,a=v(i);function i(){return h(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.options,o=e.selected,a=e.onSelect,i=e.name,u=e.legend;return Object(r.createElement)("fieldset",{className:"bwf-segment-selection"},Object(r.createElement)("legend",{className:"screen-reader-text"},u),Object(r.createElement)("div",{className:c()(t,"bwf-segment-selection-container")},n.map((function(e){var t=e.value,n=e.label;if(!t||!n)return null;var c=Object(d.uniqueId)("".concat(t,"_"));return Object(r.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(r.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:i,id:c,checked:o===t,onChange:Object(d.partial)(a,b({},i,t))}),Object(r.createElement)("label",{htmlFor:c},Object(r.createElement)("span",{className:"bwf-segment-selection-label"},n)))}))))}}])&&m(t.prototype,n),o&&m(t,o),i}(r.Component);w.propTypes={className:l.a.string,options:l.a.arrayOf(l.a.shape({value:l.a.string.isRequired,label:l.a.string.isRequired})).isRequired,selected:l.a.string,onSelect:l.a.func.isRequired,name:l.a.string.isRequired,legend:l.a.string.isRequired};var j=w;function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(c,e);var t,n,a,i=k(c);function c(){return _(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.compare;return Object(r.createElement)(j,{options:D,selected:n,onSelect:t,name:"compare",legend:Object(o.__)("compare to","funnel-builder")})}}])&&S(t.prototype,n),a&&S(t,a),c}(r.Component);P.propTypes={onSelect:l.a.func.isRequired,compare:l.a.string};var T=P,D=[{value:"previous_period",label:Object(o.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(o.__)("Previous Year","funnel-builder")}],M=(Object(o.__)("Invalid date","funnel-builder"),Object(o.__)("Select a date in the past","funnel-builder"),Object(o.__)("Start date must be before end date","funnel-builder"),Object(o.__)("Start date must be before end date","funnel-builder"),n(202),n(203),n(312)),R=n(88),I=n(141),A=(n(150),n(164)),F={calendarLabel:Object(o.__)("Calendar","funnel-builder"),closeDatePicker:Object(o.__)("Close","funnel-builder"),focusStartDate:Object(o.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(o.__)("Clear Date","funnel-builder"),clearDates:Object(o.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(o.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(o.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(o.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(o.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(o.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(o.__)("page up and page down keys","funnel-builder"),homeEnd:Object(o.__)("Home and end keys","funnel-builder"),escape:Object(o.__)("Escape key","funnel-builder"),questionMark:Object(o.__)("Question mark","funnel-builder"),selectFocusedDate:Object(o.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(o.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(o.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(o.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(o.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(o.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(o.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(o.sprintf)(Object(o.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(o.sprintf)(Object(o.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(o.sprintf)(Object(o.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(o.sprintf)(Object(o.__)("Selected. %s","funnel-builder"),t)}};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(u,e);var t,n,a,i=Y(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e)).onDatesChange=t.onDatesChange.bind(V(t)),t.onFocusChange=t.onFocusChange.bind(V(t)),t.onInputChange=t.onInputChange.bind(V(t)),t.nodeRef=Object(r.createRef)(),t.keepFocusInside=t.keepFocusInside.bind(V(t)),t}return t=u,(n=[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var n=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var r=this.nodeRef.current.querySelector(".DayPickerNavigation_button");r&&r.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&n&&n.contains(t.relatedTarget))return;var o=this.nodeRef.current.querySelector(".DayPicker_focusRegion");o&&o.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,n=e.endDate,r=this.props,o=r.onUpdate,a=r.shortDateFormat;o({after:t,before:n,afterText:t?t.format(a):"",beforeText:n?n.format(a):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var n,r=t.target.value,o=this.props,a=o.after,i=o.before,c=o.shortDateFormat,u=Object(I.j)(e,r,i,a,c),l=u.date,s=u.error;this.props.onUpdate((L(n={},e,l),L(n,e+"Text",r),L(n,e+"Error",r.length>0?s:null),n))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var n=t||f()();return e?n.clone().subtract(1,"month"):n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.after,a=t.before,i=t.focusedInput,u=t.afterText,l=t.beforeText,s=t.afterError,f=t.beforeError,p=t.shortDateFormat,b=t.isViewportMobile,h=t.isViewportSmall,m=t.isInvalidDate,y=b&&!h;return Object(r.createElement)("div",{className:c()("bwf-calendar",{"is-mobile":b})},Object(r.createElement)("div",{className:"bwf-calendar-inputs"},Object(r.createElement)(A.a,{value:u,onChange:Object(d.partial)(this.onInputChange,"after"),dateFormat:p,label:Object(o.__)("Start Date","funnel-builder"),error:s,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("startDate")}}),Object(r.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(o.__)("to","funnel-builder")),Object(r.createElement)(A.a,{value:l,onChange:Object(d.partial)(this.onInputChange,"before"),dateFormat:p,label:Object(o.__)("End Date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("endDate")}})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(d.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(r.createElement)(M.DayPickerRangeController,{onNextMonthClick:Object(d.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(d.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:i,startDate:n,endDate:a,orientation:"horizontal",numberOfMonths:y?2:1,isOutsideRange:function(e){return m&&m(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:"rtl"===document.documentElement.dir,initialVisibleMonth:this.setTnitialVisibleMonth(y,a),phrases:F})))}}])&&z(t.prototype,n),a&&z(t,a),u}(r.Component);X.propTypes={after:l.a.object,afterError:l.a.string,afterText:l.a.string,before:l.a.object,beforeError:l.a.string,beforeText:l.a.string,focusedInput:l.a.string,isInvalidDate:l.a.func,onUpdate:l.a.func.isRequired,shortDateFormat:l.a.string.isRequired,losesFocusTo:l.a.instanceOf(Element)};var K=Object(R.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(X),G=n(138);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(c,e);var t,n,a,i=J(c);function c(){return W(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.period;return Object(r.createElement)(j,{options:Object(d.filter)(oe,(function(e){return"custom"!==e.value})),selected:n,onSelect:t,name:"period",legend:Object(o.__)("select a preset period","funnel-builder")})}}])&&Z(t.prototype,n),a&&Z(t,a),c}(r.Component);ne.propTypes={onSelect:l.a.func.isRequired,period:l.a.string};var re=ne,oe=[{value:"today",label:Object(o.__)("Today","funnel-builder")},{value:"yesterday",label:Object(o.__)("Yesterday","funnel-builder")},{value:"week",label:Object(o.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(o.__)("Last Week","funnel-builder")},{value:"month",label:Object(o.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(o.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(o.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(o.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(o.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(o.__)("Last Year","funnel-builder")},{value:"custom",label:Object(o.__)("Custom","funnel-builder")}];function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fe(e);if(t){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){if(t&&("object"===ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(l,e);var t,n,i,u=ue(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=u.call(this)).onTabSelect=e.onTabSelect.bind(se(e)),e.controlsRef=Object(r.createRef)(),e}return t=l,(n=[{key:"onTabSelect",value:function(e){var t=this.props,n=t.onUpdate,r=t.period;"period"===e&&"custom"===r&&n({period:"today"})}},{key:"isFutureDate",value:function(e){return f()().isBefore(f()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,i=t.compare,u=t.hideCompare,l=t.after,s=t.before,f=t.onUpdate,d=t.onClose,p=t.onSelect,b=t.isValidSelection,h=t.resetCustomValues,m=t.focusedInput,y=t.afterText,v=t.beforeText,g=t.afterError,O=t.beforeError,w=t.shortDateFormat,j=t.disablePresets;return Object(r.createElement)("div",null,Object(r.createElement)(G.a,{className:"screen-reader-text",tabIndex:"0"},Object(o.__)("Select date range and comparison","funnel-builder")),Object(r.createElement)(G.b,{component:!1},Object(r.createElement)(G.a,{className:"bwf-filters-date-text"},Object(o.__)("select a date range","funnel-builder")),Object(r.createElement)(a.TabPanel,{tabs:[{name:"period",title:Object(o.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(o.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===n||j?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(r.createElement)(r.Fragment,null,"period"===t.name&&Object(r.createElement)(re,{onSelect:f,period:n}),"custom"===t.name&&Object(r.createElement)(K,{after:l,before:s,onUpdate:f,isInvalidDate:e.isFutureDate,focusedInput:m,afterText:y,beforeText:v,afterError:g,beforeError:O,shortDateFormat:w,losesFocusTo:e.controlsRef.current}),Object(r.createElement)("div",{className:c()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!u&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(G.a,{className:"bwf-filters-date-text"},Object(o.__)("compare to","funnel-builder")),Object(r.createElement)(T,{onSelect:f,compare:i})),Object(r.createElement)("div",{className:c()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(r.createElement)(a.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn",onClick:h,disabled:!(l||s)},Object(o.__)("Reset","funnel-builder")),b(t.name)?Object(r.createElement)(a.Button,{className:"bwf-filters-date-button",onClick:p(t.name,d),isPrimary:!0},Object(o.__)("Update","funnel-builder")):Object(r.createElement)(a.Button,{className:"bwf-filters-date-button",isPrimary:!0,disabled:!0},Object(o.__)("Update","funnel-builder")))))}))))}}])&&ie(t.prototype,n),i&&ie(t,i),l}(r.Component);de.propTypes={period:l.a.string.isRequired,compare:l.a.string.isRequired,onUpdate:l.a.func.isRequired,onClose:l.a.func.isRequired,onSelect:l.a.func.isRequired,resetCustomValues:l.a.func.isRequired,focusedInput:l.a.string,afterText:l.a.string,beforeText:l.a.string,afterError:l.a.string,beforeError:l.a.string,shortDateFormat:l.a.string.isRequired};var pe=de,be=n(165);n(206);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var o=we(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ge(this,n)}}function ge(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oe(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=Object(o.__)("MM/DD/YYYY","funnel-builder"),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(l,e);var t,n,i,u=ve(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=u.call(this,e)).state=t.getResetState(),t.update=t.update.bind(Oe(t)),t.onSelect=t.onSelect.bind(Oe(t)),t.isValidSelection=t.isValidSelection.bind(Oe(t)),t.resetCustomValues=t.resetCustomValues.bind(Oe(t)),t}return t=l,(n=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,n=e.compare,r=e.before,o=e.after;return{period:t,compare:n,before:r,after:o,focusedInput:"startDate",afterText:this.formatDate(o,je),beforeText:this.formatDate(r,je),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var n=this,r=this.props,o=r.isoDateFormat,a=r.onRangeSelect;return function(r){var i=n.state,c=i.period,u=i.compare,l=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:u};"custom"===e?(f.after=n.formatDate(l,o),f.before=n.formatDate(s,o)):(f.after=void 0,f.before=void 0),a(f),t(r)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,n=e.secondaryDate,r=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||r.push("".concat(Object(o.__)("vs.","funnel-builder")," ").concat(n.label," (").concat(n.range,")")),r}},{key:"isValidSelection",value:function(e){var t=this.state,n=t.compare,r=t.after,o=t.before;return"custom"!==e||n&&r&&o}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.period,o=t.compare,i=t.after,u=t.before,l=t.focusedInput,s=t.afterText,f=t.beforeText,d=t.afterError,p=t.beforeError,b=this.props.disablePresets;return Object(r.createElement)("div",{className:c()("bwf-filters-filter",{"bwf-presets-disable":b})},Object(r.createElement)(a.Dropdown,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(be.a,{onClick:o,isOpen:n,labels:e.getButtonLabel()})},renderContent:function(t){var a=t.onClose;return Object(r.createElement)(pe,{period:n,compare:o,hideCompare:e.props.hideCompare,after:i,before:u,onUpdate:e.update,onClose:a,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:l,afterText:s,beforeText:f,afterError:d,beforeError:p,shortDateFormat:je,disablePresets:b})}}))}}])&&me(t.prototype,n),i&&me(t,i),l}(r.Component);Ee.propTypes={onRangeSelect:l.a.func.isRequired,dateQuery:l.a.shape({period:l.a.string.isRequired,compare:l.a.string.isRequired,before:l.a.object,after:l.a.object,primaryDate:l.a.shape({label:l.a.string.isRequired,range:l.a.string.isRequired}).isRequired,secondaryDate:l.a.shape({label:l.a.string.isRequired,range:l.a.string.isRequired}).isRequired}).isRequired},Ee.defaultProps={disablePresets:!1};t.a=Ee},,,,,function(e,t,n){"use strict";function r(e){return function(t,n,r){if(t[n])return t[n].type&&t[n].type===e?void 0:new Error("Invalid ".concat(n," passed to ").concat(r,". Must be ")+"`"+e.name+"`")}}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(0),o=n(6),a=n(9),i=n.n(a),c=n(163);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["numberOfRows"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,a,i=h(u);function u(){return d(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.numberOfRows,a=f(t,l),i=Object(o.range)(n).map((function(){return e.props.headers.map((function(){return{display:Object(r.createElement)("span",{className:"is-placeholder"})}}))}));return Object(r.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:i},a))}}])&&p(t.prototype,n),a&&p(t,a),u}(r.Component);v.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},v.defaultProps={numberOfRows:5},t.a=v},,function(e,t,n){var r=n(243),o=n(368),a=n(369),i=n(370),c=n(371),u=n(372);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=c,l.prototype.set=u,e.exports=l},function(e,t,n){var r=n(193),o=n(178),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(266);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(512)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(232),o=n(391)(r);e.exports=o},function(e,t,n){var r=n(242),o=n(212);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){var r=n(157),o=n(295),a=n(296);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(178),o=n(154),a=n(245),i=n(140);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&a(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(134);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(o){var a=e.node(o);if(r.has(t,o))return a.rank;t[o]=!0;var i=r.min(r.map(e.outEdges(o),(function(t){return n(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),a.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},,function(e,t,n){},,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){"use strict";var r=n(0),o=n(61),a=n(9),i=n.n(a),c=n(5),u=n(14),l=n.n(u);n(214);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled"];function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,n,o,a=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=a.call(this,e)).state={isFocused:!1},t}return t=i,(n=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,o=t.value,a=t.help,i=t.className,u=t.instanceId,s=t.onChange,b=t.onClick,h=t.prefix,m=t.suffix,y=t.type,v=t.disabled,g=p(t,f),O=this.state.isFocused,w="inspector-text-control-with-affixes-".concat(u),j=[];a&&j.push("".concat(w,"__help")),h&&j.push("".concat(w,"__prefix")),m&&j.push("".concat(w,"__suffix"));var E=l()(i,{"with-value":""!==o,empty:""===o,active:O&&!v}),_=l()("text-control-with-affixes",{"text-control-with-prefix":h,"text-control-with-suffix":m,disabled:v});return Object(r.createElement)(c.BaseControl,{label:n,id:w,help:a,className:E,onClick:function(t){return e.handleOnClick(t,b)}},Object(r.createElement)("div",{className:_},h&&Object(r.createElement)("span",{id:"".concat(w,"__prefix"),className:"text-control-with-affixes__prefix"},h),Object(r.createElement)("input",d({className:"components-text-control__input",type:y,id:w,value:o,onChange:function(e){return s(e.target.value)},"aria-describedby":j.join(" "),disabled:v,onFocus:function(){return e.setState({isFocused:!0})}},g)),m&&Object(r.createElement)("span",{id:"".concat(w,"__suffix"),className:"text-control-with-affixes__suffix"},m)))}}])&&b(t.prototype,n),o&&b(t,o),i}(r.Component);g.defaultProps={type:"text"},g.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(o.compose)([o.withInstanceId,c.withFocusOutside])(g)},function(e,t,n){},,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";var r=n(139);e.exports=o;function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function i(e,t){--e[t]||delete e[t]}function c(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var c=a;a=i,i=c}return a+""+i+""+(r.isUndefined(o)?"\0":o)}function u(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}var c={v:o,w:a};return r&&(c.name=r),c}function l(e,t){return c(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},o.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,(function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,function e(r){var a=n.parent(r);return void 0===a||t.hasNode(a)?(o[r]=a,a):a in o?o[a]:e(a)}(e))})),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,(function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},o.prototype.setEdge=function(){var e,t,n,o,i=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2===arguments.length&&(o=arguments[1],i=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=i?o:this._defaultEdgeLabelFn(e,t,n);var f=u(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[s]=f,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][s]=f,this._out[e][s]=f,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var o=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],i(this._preds[t],e),i(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.v===t})):o}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.w===t})):o}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},function(e,t,n){var r=n(270),o=n(271),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(275);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(233),o=n(151);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){var r=n(390)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(229),o=n(417);e.exports=function e(t,n,a,i,c){var u=-1,l=t.length;for(a||(a=o),c||(c=[]);++u<l;){var s=t[u];n>0&&a(s)?n>1?e(s,n-1,a,i,c):r(c,s):i||(c[c.length]=s)}return c}},function(e,t,n){var r=n(186);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===u?c==c&&!r(c):n(c,u)))var u=c,l=i}return l}},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(14),i=n.n(a),c=n(888),u=n(6),l=n(170),s=n.n(l),f=n(5),d=n(901),p=n(338),b=n(9),h=n.n(b),m=n(88),y=n(10);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(i,e);var t,n,o,a=j(i);function i(){return g(this,i),a.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){var e=this.props.height;return Object(r.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:e}},Object(r.createElement)(f.Spinner,null))}}])&&O(t.prototype,n),o&&O(t,o),i}(r.Component);S.propTypes={height:h.a.number},S.defaultProps={height:0};var x=S,k=n(138),C=(n(223),n(898)),N=n(882);n(224);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){if(t&&("object"===P(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(c,e);var t,n,o,a=M(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).chartRef=Object(r.createRef)(),t}return t=c,(n=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(u.isEqual)(this.props.data,e.data)||!Object(u.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(u.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(N.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,n=e.height,r=e.width;this.deleteChart();var o=Object(N.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(r," ").concat(n)).attr("height",n).attr("width",r).attr("preserveAspectRatio","xMidYMid meet");return t&&o.attr("class","".concat(t,"__viewbox")),o.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(r.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&T(t.prototype,n),o&&T(t,o),c}(r.Component);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}A.propTypes={className:h.a.string,data:h.a.array,orderedKeys:h.a.array,tooltip:h.a.object,chartType:h.a.string};var q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},Y=function(e){return B(new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]))).filter((function(e){return"date"!==e}))},U=n(896),V=n(887),H=n(894),X=n(40),K=n.n(X);function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(U.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(n?0:.07)},Z=function(e,t){return Object(V.a)().domain([K()(e[0],"YYYY-MM-DD HH:mm").toDate(),K()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},Q=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var r=0,o=Object.entries(e);r<o.length;r++){var a=G(o[r],2),i=a[0],c=a[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<n&&(n=c.value)}})),{upper:t,lower:n}}(e),n=t.lower,r=t.upper,o=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;var n=4/3*Math.max(-e,t),r=3*Math.pow(10,(Math.log(n)*Math.LOG10E+1|0)-2),o=Math.ceil(n/r)*r/3;return t<1&&e>-1?Math.round(4*o)/4:Math.ceil(o)}(n,r),a={lower:0,upper:0,step:o};return(Number.isFinite(n)||n<0)&&(a.lower=Math.floor(n/o)*o,a.lower===n&&0!==n&&(a.lower-=o)),(Number.isFinite(r)||r>0)&&(a.upper=Math.ceil(r/o)*o,a.upper===r&&0!==r&&(a.upper+=o)),a},J=n(897),ee=function(e){for(var t=[],n=1;n<=Math.floor(Math.sqrt(e));n++)e%n==0&&(t.push(n),e/n!==n&&t.push(e/n));return t.sort((function(e,t){return e-t})),t},te=function(e,t,n,r){var o,a=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,n);return(e.length>=63&&"day"===r||e.length>=9&&"week"===r)&&(e=(o=e).filter((function(e,t){return 0===t||K()(e).toDate().getMonth()!==K()(o[t-1]).toDate().getMonth()}))),e.length<=a||"hour"===r&&function(e){var t=K()(e[0]).toDate(),n=K()(e[e.length-1]).toDate();return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}(e)&&t>783?e:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n[0]!==e[0]&&n.unshift(e[0]),n}(e,function(e,t){for(var n=[],r=1;n.length<=3;)n=ee(e.length-r),r+=1;return n.find((function(n){return e.length/n<t}))}(e,a))},ne=function(e,t,n,r){var o=K()(e).toDate(),a=0!==t?n[t-1]:n[t];return a=a instanceof Date?a:K()(a).toDate(),0===t?r(o):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),r=e.split(n),o=t.split(n),a=new Array,i=e.length>t.length?r:o,c=0;c<i.length;c++)r[c]!==o[c]&&a.push(o[c]);return a}(r(a),r(o)).join(" ")};function re(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ae=function(e,t,n){for(var r=[],o=0;o<e;o++){var a=(o+1)/e*t,i=n?Math.round(a):a;r[r.length-1]!==i&&r.push(i)}return r},ie=function(e,t,n){return[0].concat(re(function(e,t){if(e>=0)return[];var n=Math.ceil(-e/t);return ae(n,e,e<-1)}(e,n)),re(function(e,t){if(e<=0)return[];var n=Math.ceil(e/t);return ae(n,e,e>1)}(t,n)))},ce=function(e,t,n,r,o,a){!function(e,t,n,r){var o=n.yScale.range()[0],a=te(t.uniqueDates,n.xScale.range()[1],t.mode,t.interval);"line"===t.chartType&&(a=a.map((function(e){return K()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o,")")).call(Object(J.a)(n.xScale).tickValues(a).tickFormat((function(e,n){return"hour"===t.interval?r.xFormat(e instanceof Date?e:K()(e).toDate()):ne(e,n,a,r.xFormat)}))),e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+14,")")).call(Object(J.a)(n.xScale).tickValues(a).tickFormat((function(e,t){return ne(e,t,a,r.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(o,")")).call(Object(J.a)(n.xScale).tickValues(a).tickSize(5).tickFormat(""))}(e,t,n,r),function(e,t,n,r,o){var a=ie(t.yScale.domain()[0],t.yScale.domain()[1],t.step),i=t.xScale.range()[1],c=o?i+r.left+r.right/2-15:-r.left/2-15,u=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+u).attr("transform","translate(-".concat(r.left,", 0)")).call(Object(J.b)(t.yScale).tickValues(a).tickSize(-i-r.left-r.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+c+", 12)").attr("text-anchor","start").call(Object(J.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[a[0]]:a).tickFormat((function(e){return e>-1&&e<1&&n.yBelow1Format?n.yBelow1Format(e):n.yFormat(e)})))}(e,n,r,o,a),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},ue=n(854),le=n(892);function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(e,t,n,r,o,a){var i,c,l=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(le.a)().x((function(e){return i(K()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(u.first)(e.filter((function(e){return e.date===n}))),l=o(K()(n).toDate()),s=o(i>=1?K()(t[i-1]).toDate():K()(t[0]).toDate()),f=i<t.length-1?o(K()(t[i+1]).toDate()):o(K()(t[t.length-1]).toDate()),d=0===i?f-l:l-s,p=0===i?0:l-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),h=s<=1365||n.uniqueDates.length>50?2:3;h=s<=783?1.25:h;var m=s<=1365?4:6;n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",h).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return n.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return fe(fe({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",m).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),r[n].parentNode,ue.b.target)})).on("blur",(function(){return a.hide()}));var y=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),v=y.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y2",l),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",m+2).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+2).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),y.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",l).attr("opacity",0).on("mouseover",(function(e,r,o){var i=(0===r||r===b.length-1)&&n.uniqueDates.length>1?0:.5;a.show(t.find((function(t){return t.date===e.date})),ue.b.target,o[r].parentNode,i)})).on("mouseout",(function(){return a.hide()}))},be=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],he=function(e,t){return function(n){var r=e.length>5?5:e.length,o=Object(u.findIndex)(e,(function(e){return e.key===n})),a=o<=4?be[r][o]:0;return t(a)}};function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ye=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24}var t,n,r;return t=e,(n=[{key:"calculateXPosition",value:function(e,t,n){var r=this.ref.getBoundingClientRect(),o=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),a=Math.max(o.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-r.width/2-a,o.width-r.width-this.margin));var i=e.left+e.width*n+this.margin-a;return i+r.width+this.margin>o.width?Math.max(this.margin,e.left+e.width*(1-n)-r.width-this.margin-a):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var n=this.ref.getBoundingClientRect(),r=e.top+this.margin-t.top;return r+n.height+this.margin>t.height?Math.max(0,e.top-n.height-this.margin-t.top):r}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.getBoundingClientRect(),r=this.chart.getBoundingClientRect();return"below"===this.position&&(t=0),{x:this.calculateXPosition(n,r,t),y:this.calculateYPosition(n,r)}}},{key:"hide",value:function(){Object(N.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(N.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(K()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,n){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(this.visibleKeys.length){Object(N.a)(n).select(".focus-grid, .barfocus").attr("opacity","1");var i=this.calculatePosition(t,a),c=this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(r.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(r.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(r.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),u=this.title?this.title:this.labelFormat(K()(e.date).toDate());Object(N.a)(this.ref).style("left",i.x+"px").style("top",i.y+"px").style("visibility","visible").html("\n\t\t\t\t<div>\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t".concat("week"===this.interval?Object(o.__)("Week of "):"month"===this.interval?Object(o.__)("Month of "):"","\n\t\t\t\t\t\t").concat(u,"\n\t\t\t\t\t</h4>\n\t\t\t\t\t<ul>\n\t\t\t\t\t").concat(c.join(""),"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t"))}}}])&&me(t.prototype,n),r&&me(t,r),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Se=function(){return"rtl"===document.documentElement.dir},xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(c,e);var t,n,o,a=we(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=a.call(this,e)).drawChart=t.drawChart.bind(Ee(t)),t.getParams=t.getParams.bind(Ee(t)),t.tooltipRef=Object(r.createRef)(),t}return t=c,(n=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,n=e.xFormat,r=e.x2Format,o=e.yFormat,a=e.yBelow1Format;return{screenReaderFormat:q(t,C.a),xFormat:q(n,C.a),x2Format:q(r,C.a),yBelow1Format:q(a),yFormat:q(o)}}},{key:"getScaleParams",value:function(e){var t=this.props,n=t.data,r=t.height,o=t.orderedKeys,a=t.chartType,i=this.getMargin(),c=r-i.top-i.bottom,u=this.getWidth()-i.left-i.right,l=Q(n),s=l.upper,f=l.lower,d=l.step,p=function(e,t,n){return Object(H.a)().domain([Math.min(t,0),0===n&&0===t?1:Math.max(n,0)]).rangeRound([e,0])}(c,f,s);if("line"===a)return{step:d,xScale:Z(e,u),yMax:s,yMin:f,yScale:p};var b=this.shouldBeCompact(),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(U.a)().domain(e).range([0,t]).paddingInner(n?0:.1)}(e,u,b);return{step:d,xGroupScale:W(o,h,b),xScale:h,yMax:s,yMin:f,yScale:p}}},{key:"getParams",value:function(e){var t=this.props,n=t.chartType,r=t.colorScheme,o=t.data,a=t.interval,i=t.mode,c=t.orderedKeys||function(e){return Y(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,n){return e+n[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(o),u=c.filter((function(e){return e.visible})),l=c.length>5?u:c;return{getColor:he(l,r),interval:a,mode:i,chartType:n,uniqueDates:e,visibleKeys:u}}},{key:"createTooltip",value:function(e,t,n){var r=this.props,o=r.tooltipLabelFormat,a=r.tooltipPosition,i=r.tooltipTitle,c=r.tooltipValueFormat,u=r.interval,l=new ye;l.ref=this.tooltipRef.current,l.chart=e,l.position=a,l.title=i,l.labelFormat=q(o,C.a),l.valueFormat=q(c),l.visibleKeys=n,l.getColor=t,l.interval=u,this.tooltip=l}},{key:"drawChart",value:function(e){var t=this.props,n=t.data,r=t.dateParser,o=t.chartType,a=this.getMargin(),i=function(e,t){var n=Object(C.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return n(e)-n(t)}))}(n,r),c=this.getFormatParams(),u=this.getParams(i),l=this.getScaleParams(i),s=e.attr("id","chart").append("g").attr("transform","translate(".concat(a.left,", ").concat(a.top,")"));this.createTooltip(s.node(),u.getColor,u.visibleKeys),ce(s,u,l,c,a,Se()),"line"===o&&pe(s,n,u,l,c,this.tooltip),"bar"===o&&function(e,t,n,r,o,a){var i=r.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(r.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===n.mode?o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",r.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),ue.b.target,r[n].parentNode)})).on("mouseout",(function(){return a.hide()}));var u=r.yScale(0);c.selectAll(".bar").data((function(e){return n.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return r.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(u,r.yScale(e.value))})).attr("width",r.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(u-r.yScale(e.value))})).attr("fill",(function(e){return n.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var r=e.label||e.key;if("time-comparison"===n.mode){var i=t.find((function(t){return t.date===e.date}));r=o.screenReaderFormat(K()(i[e.key].labelDate).toDate())}return"".concat(r," ").concat(a.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,n,r){var o=e.value>0?ue.b.target:ue.b.target.parentNode;a.show(t.find((function(t){return t.date===e.date})),o,r[n].parentNode)})).on("blur",(function(){return a.hide()}))}(s,n,u,l,c,this.tooltip)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return!1;var o=this.getMargin(),a=r-o.left-o.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return a<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return Se()?{bottom:e.bottom,left:e.right,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return r;var o=this.getMargin(),a=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*a:t.length*(a+1);return Math.max(r,i+o.left+o.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,n=e.data,o=e.emptyMessage;if(o&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++)for(var r=0,o=Object.entries(e[n]);r<o.length;r++){var a=F(o[r],2),i=a[0],c=a[1];if("date"!==i&&!Object(u.isNil)(c.value)&&c.value!==t)return!1}return!0}(n,t))return Object(r.createElement)("div",{className:"d3-chart__empty-message"},o)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,o=e.height,a=e.orderedKeys,c=e.chartType,u=this.getWidth();return Object(r.createElement)("div",{className:i()("d3-chart__container",t),style:{height:o}},this.getEmptyMessage(),Object(r.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(r.createElement)(A,{className:i()(t),data:n,drawChart:this.drawChart,height:o,orderedKeys:a,tooltip:this.tooltip,chartType:c,width:u}))}}])&&ge(t.prototype,n),o&&ge(t,o),c}(r.Component);xe.propTypes={baseValue:h.a.number,className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,dateParser:h.a.string.isRequired,emptyMessage:h.a.string,height:h.a.number,interval:h.a.oneOf(["hour","day","week","month","quarter","year"]),margin:h.a.shape({bottom:h.a.number,left:h.a.number,right:h.a.number,top:h.a.number}),mode:h.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:h.a.oneOfType([h.a.string,h.a.func]),orderedKeys:h.a.array,tooltipLabelFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipValueFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipPosition:h.a.oneOf(["below","over"]),tooltipTitle:h.a.string,chartType:h.a.oneOf(["bar","line"]),width:h.a.number,xFormat:h.a.oneOfType([h.a.string,h.a.func]),x2Format:h.a.oneOfType([h.a.string,h.a.func]),yBelow1Format:h.a.oneOfType([h.a.string,h.a.func]),yFormat:h.a.oneOfType([h.a.string,h.a.func])},xe.defaultProps={baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"};var ke=xe,Ce=n(61);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Re(e);if(t){var o=Re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Me(this,n)}}function Me(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(u,e);var t,n,a,c=De(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=c.call(this)).listRef=Object(r.createRef)(),e.state={isScrollable:!1},e}return t=u,(n=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=e.colorScheme,n=e.data,a=e.handleLegendHover,c=e.handleLegendToggle,u=e.interactive,l=e.legendDirection,s=e.legendValueFormat,f=e.instanceId,d=e.totalLabel,p=this.state.isScrollable,b=n.filter((function(e){return e.visible})),h=b.length,m="column"===l&&n.length>5&&d,y=n.length>5?b:n;return Object(r.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(l),{"has-total":m,"is-scrollable":p},this.props.className)},Object(r.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:m?this.updateListScroll:null},n.map((function(e){return Object(r.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(f,"__item__").concat(e.key),onMouseEnter:a,onMouseLeave:a,onBlur:a,onFocus:a},Object(r.createElement)("button",{onClick:c,id:"bwf-legend-".concat(f,"__item-button__").concat(e.key),disabled:e.visible&&h<=1||!e.visible&&h>=5||!u,title:h>=5?Object(o.sprintf)(Object(o.__)("You may select up to %d items.","funnel-builder"),5):""},Object(r.createElement)("div",{className:"bwf-legend-item-container"},Object(r.createElement)("span",{className:i()("bwf-legend-item-checkmark",{"bwf-legend-item-checkmark-checked":e.visible}),style:e.visible?{color:he(y,t)(e.key)}:null}),Object(r.createElement)("span",{className:"bwf-legend-item-title"},e.label),Object(r.createElement)("span",{className:"bwf-legend-item-total"},q(s)(e.total)))))}))),m&&Object(r.createElement)("div",{className:"bwf-legend-total"},d))}}])&&Pe(t.prototype,n),a&&Pe(t,a),u}(r.Component);Ie.propTypes={className:h.a.string,colorScheme:h.a.func,data:h.a.array.isRequired,handleLegendToggle:h.a.func,handleLegendHover:h.a.func,interactive:h.a.bool,legendDirection:h.a.oneOf(["row","column"]),legendValueFormat:h.a.oneOfType([h.a.string,h.a.func]),totalLabel:h.a.string,instanceId:h.a.number},Ie.defaultProps={interactive:!0,legendDirection:"row",legendValueFormat:","};var Ae=Object(Ce.withInstanceId)(Ie);n(225);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=He(e);if(t){var o=He(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ue(this,n)}}function Ue(e,t){if(t&&("object"===Fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ve(e)}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var Ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(b,e);var t,n,a,l=Ye(b);function b(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),(t=l.call(this,e)).chartBodyRef=Object(r.createRef)();var n=t.getDataKeys();return t.state={focusedKeys:[],visibleKeys:n.slice(0,5),width:0},t.prevDataKeys=n.sort(),t.handleTypeToggle=t.handleTypeToggle.bind(Ve(t)),t.handleLegendToggle=t.handleLegendToggle.bind(Ve(t)),t.handleLegendHover=t.handleLegendHover.bind(Ve(t)),t.updateDimensions=t.updateDimensions.bind(Ve(t)),t.getVisibleData=Object(p.a)(t.getVisibleData),t.getOrderedKeys=Object(p.a)(t.getOrderedKeys),t.setInterval=t.setInterval.bind(Ve(t)),t}return t=b,(n=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,n=e.filterParam,r=e.mode,o=e.query;if("item-comparison"===r){var a=n?Object(y.e)(o[n]):[];return this.getOrderedKeys([],[],a).map((function(e){return e.key}))}return Y(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=Y(e).sort();if(!Object(u.isEqual)(t,this.prevDataKeys)){var n=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:n.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,n=e.symbolPosition,r=e.decimalSeparator,o=e.thousandSeparator;Object(c.a)({decimal:r,thousands:o,grouping:[3],currency:Xe(t,n)})}},{key:"getOrderedKeys",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.props,o=r.data,a=r.legendTotals,i=r.mode;if(!o||0===o.length)return[];var c=o.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=Be(t,2),r=n[0],o=n[1];"date"===r||e[r]||(e[r]=o.label)})),e}),{}),u=Object.entries(c).map((function(n){var r=Be(n,2),i=r[0],c=r[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:a&&void 0!==a[i]?a[i]:"conversion_rate"!==i?o.reduce((function(e,t){return e+t[i].value}),0):0!==o.reduce((function(e,t){return e+t.conversion.value}),0)?o.reduce((function(e,t){return e+t.conversion.value}),0)/o.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?u.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||n.includes(parseInt(e.key,10))})):u}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,n=t.path,r=t.query,o=t.onChartChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({chartType:e},n,r),a(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),n=this.state,r=n.focusedKeys,o=n.visibleKeys;o.includes(t)?this.setState({focusedKeys:Object(u.without)(r,t),visibleKeys:Object(u.without)(o,t)}):this.setState({focusedKeys:r.concat([t]),visibleKeys:o.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var n=t.filter((function(e){return e.visible}));return e.map((function(e){var t={date:e.date};return n.forEach((function(n){t[n.key]=e[n.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,n=t.path,r=t.query,o=t.onIntervalChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(y.k)({interval:e},n,r),a(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,n=e.allowedIntervals;if(!n||n.length<1)return null;!0===n.includes("quarter")&&n.splice(n.indexOf("quarter"),1);var a={hour:Object(o.__)("By hour","funnel-builder"),day:Object(o.__)("By day","funnel-builder"),week:Object(o.__)("By week","funnel-builder"),month:Object(o.__)("By month","funnel-builder"),quarter:Object(o.__)("By quarter","funnel-builder"),year:Object(o.__)("By year","funnel-builder")};return Object(r.createElement)(f.SelectControl,{value:t,options:n.map((function(e){return{value:e,label:a[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,n=e.mode,r=e.isViewportWide;return t||(r&&"time-comparison"===n?"top":r&&"item-comparison"===n?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,n=e.visibleKeys,a=e.width,c=this.props,l=c.baseValue,p=c.chartType,b=c.data,h=c.dateParser,m=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,w=c.isRequesting,j=c.isViewportLarge,E=c.itemsLabel,_=c.mode,S=c.query,C=c.screenReaderFormat,N=c.showHeaderControls,P=c.title,T=c.tooltipLabelFormat,D=c.tooltipValueFormat,M=c.tooltipTitle,R=c.valueType,I=c.xFormat,A=c.x2Format,F=c.yBelow1Format,B=c.yFormat,L=c.hideTypeSelect,z=c.className,q=c.customHeaderItem,Y=v?Object(y.e)(S[v]):[],U=this.getOrderedKeys(t,n,Y),V=w?null:this.getVisibleData(b,U),H=this.getLegendPosition(),X="top"===H?"row":"column",K="side"===H?"row":"column",G=this.getChartHeight(),$=w?null:Object(r.createElement)(Ae,{colorScheme:d.a,data:U,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:X,legendValueFormat:D,totalLabel:Object(o.sprintf)(E,U.length)}),W=B,Z=F;if(!B)switch(R){case"average":W=",.0f";break;case"currency":W="$.3~s",Z="$.3~f";break;case"number":W=",.0f"}return Object(r.createElement)("div",{className:i()("bwf-chart",z)},N&&Object(r.createElement)("div",{className:"bwf-chart-header"},Object(r.createElement)(k.a,{className:"bwf-chart-title"},P),"top"===H&&$,q,this.renderIntervalSelector(),!L&&Object(r.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===p}),title:Object(o.__)("Line chart","funnel-builder"),"aria-checked":"line"===p,role:"menuitemradio",tabIndex:"line"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"line")},Object(r.createElement)(s.a,{icon:"line-graph"})),Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===p}),title:Object(o.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===p,role:"menuitemradio",tabIndex:"bar"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"bar")},Object(r.createElement)(s.a,{icon:"stats-alt"})))),Object(r.createElement)(k.b,{component:!1},Object(r.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(K)),ref:this.chartBodyRef},"side"===H&&$,w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(x,{height:G})),!w&&a>0&&Object(r.createElement)(ke,{baseValue:l,chartType:p,colorScheme:d.a,data:V,dateParser:h,height:G,emptyMessage:m,interval:O,margin:{bottom:50,left:80,right:30,top:0},mode:_,orderedKeys:U,screenReaderFormat:C,tooltipLabelFormat:T,tooltipValueFormat:D,tooltipPosition:j?"over":"below",tooltipTitle:M,valueType:R,width:"row"===K?a-320:a,xFormat:I,x2Format:A,yBelow1Format:Z,yFormat:W})),"bottom"===H&&Object(r.createElement)("div",{className:"bwf-chart-footer"},$)))}}])&&ze(t.prototype,n),a&&ze(t,a),b}(r.Component);Ke.propTypes={allowedIntervals:h.a.array,baseValue:h.a.number,chartType:h.a.oneOf(["bar","line"]),data:h.a.array.isRequired,dateParser:h.a.string.isRequired,emptyMessage:h.a.string,filterParam:h.a.string,itemsLabel:h.a.string,mode:h.a.oneOf(["item-comparison","time-comparison"]),path:h.a.string,query:h.a.object,interactiveLegend:h.a.bool,interval:h.a.oneOf(["hour","day","week","month","quarter","year"]),intervalData:h.a.object,isRequesting:h.a.bool,legendPosition:h.a.oneOf(["bottom","side","top"]),legendTotals:h.a.object,screenReaderFormat:h.a.oneOfType([h.a.string,h.a.func]),showHeaderControls:h.a.bool,title:h.a.string,tooltipLabelFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipValueFormat:h.a.oneOfType([h.a.string,h.a.func]),tooltipTitle:h.a.string,valueType:h.a.string,xFormat:h.a.string,x2Format:h.a.string,yBelow1Format:h.a.string,yFormat:h.a.string,currency:h.a.object},Ke.defaultProps={baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:""};t.a=Object(m.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(Ke)},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(6),i=n(9),c=n.n(i),u=n(10),l=n(141),s=n(64),f=n.n(s),d=n(5),p=n(170),b=n.n(p),h=n(137),m=n.n(h),y=n(14),v=n.n(y),g=n(152),O=n(16);function w(e){var t="";return function e(n){if(Object(a.isString)(n)||Object(a.isNumber)(n))t+=n;else if(Object(a.isArray)(n))n.forEach(e);else if(n&&n.props){var r=n.props.children;Object(a.isArray)(r)?r.forEach(e):e(r)}}(e),t}function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var o=N(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(c,e);var t,n,o,i=x(c);function c(e){var t,n=e.filter,r=e.config,o=e.onFilterChange;E(this,c),t=i.apply(this,arguments);var a=r.input.options;return t.state={options:a},t.updateOptions=t.updateOptions.bind(C(t)),!a&&r.input.getOptions&&r.input.getOptions().then(t.updateOptions).then((function(e){if(!n.value){var t=Object(u.c)(r,e);o(n.key,"value",t)}})),t}return t=c,(n=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(a.find)(t.rules,{value:e.rule})||{},o=Object(a.find)(t.input.options,{value:e.value})||{};return w(m()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,o.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,i=e.onFilterChange,c=e.isEnglish,u=this.state.options,l=o.key,s=o.rule,f=o.value,p=n.labels,b=n.rules,h=m()({mixedString:p.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:b,value:s,onChange:Object(a.partial)(i,l,"rule"),"aria-label":p.rule}),filter:u?Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-input"),options:u,value:f,onChange:Object(a.partial)(i,o.key,"value"),"aria-label":p.filter}):Object(r.createElement)(d.Spinner,null)}}),y=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},p.add||""),Object(r.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},h),y&&Object(r.createElement)("span",{className:"screen-reader-text"},y))}}])&&_(t.prototype,n),o&&_(t,o),c}(r.Component);P.propTypes={config:c.a.shape({labels:c.a.shape({rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.string}).isRequired,onFilterChange:c.a.func.isRequired};var T=P,D=n(146);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){if(t&&("object"===M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(c,e);var t,n,o,i=z(c);function c(e){var t,n=e.filter,r=e.config,o=e.query;return F(this,c),(t=i.apply(this,arguments)).onSearchChange=t.onSearchChange.bind(Y(t)),t.state={selected:[]},t.updateLabels=t.updateLabels.bind(Y(t)),n.value.length&&r.input.getLabels(n.value,o).then((function(e){var n=e.map((function(e){return I({key:e.id},e)}));t.updateLabels(n)})),t}return t=c,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,o=t.query,i=e.filter;if(r.value.length&&!Object(a.isEqual)(i,r)){var c=this.state.selected.map((function(e){return e.key}));Object(u.e)(r.value).every((function(e){return!c.includes(e)}))&&n.input.getLabels(r.value,o).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(a.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,n=t.filter,r=t.onFilterChange,o=e.map((function(e){return e.key})).join(",");r(n.key,"value",o)}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var o=Object(a.find)(t.rules,{value:e.rule})||{},i=n.map((function(e){return e.label})).join(", ");return w(m()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,i),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,i=e.onFilterChange,c=e.isEnglish,u=this.state.selected,l=o.key,s=o.rule,f=n.input,p=n.labels,b=n.rules,h=m()({mixedString:p.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:b,value:s,onChange:Object(a.partial)(i,l,"rule"),"aria-label":p.rule}),filter:Object(r.createElement)(D.a,{className:v()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:f.type,placeholder:p.placeholder,selected:u,inlineTags:!0,"aria-label":p.filter})}}),y=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},p.add||""),Object(r.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},h),y&&Object(r.createElement)("span",{className:"screen-reader-text"},y))}}])&&B(t.prototype,n),o&&B(t,o),c}(r.Component);V.propTypes={config:c.a.shape({labels:c.a.shape({placeholder:c.a.string,rule:c.a.string,title:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.string}).isRequired,onFilterChange:c.a.func.isRequired,query:c.a.object};var H=V,X=n(213);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ee(this,n)}}function ee(e,t){if(t&&("object"===K(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(u,e);var t,n,i,c=J(u);function u(){return W(this,u),c.apply(this,arguments)}return t=u,(n=[{key:"getBetweenString",value:function(){return Object(o._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,o=Object(a.find)(t.rules,{value:e.rule})||{},i=G(Object(a.isArray)(e.value)?e.value:[e.value],2),c=i[0],u=i[1];if(!c||"between"===o.value&&!u)return"";if("currency"===Object(a.get)(t,["input","type"],"number")){var l=f()(n).formatAmount;c=l(c),u=l(u)}var s=c;return"between"===o.value&&(s=m()({mixedString:this.getBetweenString(),components:{rangeStart:Object(r.createElement)(r.Fragment,null,c),rangeEnd:Object(r.createElement)(r.Fragment,null,u),span:Object(r.createElement)(r.Fragment,null)}})),w(m()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,s),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,o=e.label,a=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(r.createElement)(X.a,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(X.a,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(d.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,i=e.currency,c=i.symbol,u=i.symbolPosition;if("between"===n.rule)return this.getRangeInput();var l=Object(a.get)(t,["input","type"],"number"),s=G(Object(a.isArray)(n.value)?n.value:[n.value],2),f=s[0],d=s[1];Boolean(d)&&r(n.key,"value",f||d);var p="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return p="lessthan"===n.rule?Object(o._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(o._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:l,value:f||d,label:Object(o.sprintf)(p,{field:Object(a.get)(t,["labels","add"])}),onChange:Object(a.partial)(r,n.key,"value"),currencySymbol:c,symbolPosition:u})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,i=e.onFilterChange,c=e.currency,u=c.symbol,l=c.symbolPosition,s=Object(a.get)(t,["input","type"],"number"),f=G(Object(a.isArray)(n.value)?n.value:[n.value],2),d=f[0],p=f[1];return m()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:s,value:d||"",label:Object(o.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(o.__)("%(field)s range start","funnel-builder"),{field:Object(a.get)(t,["labels","add"])}),onChange:function(e){i(n.key,"value",[e,p])},currencySymbol:u,symbolPosition:l}),rangeEnd:this.getFormControl({type:s,value:p||"",label:Object(o.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(o.__)("%(field)s range end","funnel-builder"),{field:Object(a.get)(t,["labels","add"])}),onChange:function(e){i(n.key,"value",[d,e])},currencySymbol:u,symbolPosition:l}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,i=e.onFilterChange,c=e.isEnglish,u=o.key,l=o.rule,s=n.labels,f=n.rules,p=m()({mixedString:s.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:f,value:l,onChange:Object(a.partial)(i,u,"rule"),"aria-label":s.rule}),filter:Object(r.createElement)("div",{className:v()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===l})},this.getFilterInputs())}}),b=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},s.add||""),Object(r.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},p),b&&Object(r.createElement)("span",{className:"screen-reader-text"},b))}}])&&Z(t.prototype,n),i&&Z(t,i),u}(r.Component),re=n(40),oe=n.n(re),ae=(n(202),n(203),n(62)),ie=(n(150),n(164)),ce=n(138);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=be(e);if(t){var o=be(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return de(this,n)}}function de(e,t){if(t&&("object"===ue(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return pe(e)}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(u,e);var t,n,i,c=fe(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=c.call(this,e)).onDateChange=t.onDateChange.bind(pe(t)),t.onInputChange=t.onInputChange.bind(pe(t)),t}return t=u,(n=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;ae.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.dateFormat,a=oe()(t);r({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(l.i)(n,t),o=r?null:l.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,i=t.disabled,c=t.text,u=t.dateFormat,l=t.error,s=t.isInvalidDate;return Object(r.createElement)(d.Dropdown,{position:"bottom center",focusOnMount:!1,renderToggle:function(t){var n=t.isOpen,s=t.onToggle;return Object(r.createElement)(ie.a,{disabled:i,value:c,onChange:e.onInputChange,dateFormat:u,label:Object(o.__)("Choose a date","funnel-builder"),error:l,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),u),onFocus:Object(a.partial)(e.handleFocus,n,s),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(a.partial)(e.handleKeyDown,n,s),errorPosition:"top center"})},renderContent:function(t){var i=t.onToggle;return Object(r.createElement)(ce.b,{component:!1},Object(r.createElement)(ce.a,{className:"bwf-calendar-date-picker-title"},Object(o.__)("select a date","funnel-builder")),Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(d.DatePicker,{currentDate:n,onChange:Object(a.partial)(e.onDateChange,i),isInvalidDate:s})))}})}}])&&le(t.prototype,n),i&&le(t,i),u}(r.Component);he.propTypes={date:c.a.object,disabled:c.a.bool,text:c.a.string,error:c.a.string,onUpdate:c.a.func.isRequired,dateFormat:c.a.string.isRequired,isInvalidDate:c.a.func};var me=he;function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ke(e);if(t){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xe(e)}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=Object(o.__)("MMM D, YYYY","funnel-builder"),Ne=Object(o.__)("MM/DD/YYYY","funnel-builder"),Pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(u,e);var t,n,i,c=_e(u);function u(e){var t,n=e.filter;we(this,u),t=c.apply(this,arguments);var r=Array.isArray(n.value)?n.value:[null,n.value],o=ge(r,2),a=o[0],i=o[1],s=a?Object(l.i)(l.h,a):null,f=i?Object(l.i)(l.h,i):null;return t.state={before:f,beforeText:f?f.format(Ne):"",beforeError:null,after:s,afterText:s?s.format(Ne):"",afterError:null},t.onSingleDateChange=t.onSingleDateChange.bind(xe(t)),t.onRangeDateChange=t.onRangeDateChange.bind(xe(t)),t.onRuleChange=t.onRuleChange.bind(xe(t)),t}return t=u,(n=[{key:"getBetweenString",value:function(){return Object(o._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(a.find)(t.rules,{value:e.rule})||{},o=this.state,i=o.before,c=o.after;if(!i||"between"===n.value&&!c)return"";var u=i.format(Ce);return"between"===n.value&&(u=m()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,c.format(Ce)),before:Object(r.createElement)(r.Fragment,null,i.format(Ce)),span:Object(r.createElement)(r.Fragment,null)}})),w(m()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,u),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,o=this.props,a=o.filter,i=o.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&i(a.key,"value",t.format(l.h))}},{key:"onRangeDateChange",value:function(e,t){var n,r=t.date,o=t.text,a=t.error,i=this.props,c=i.filter,u=i.onFilterChange;if(this.setState((ve(n={},e,r),ve(n,e+"Text",o),ve(n,e+"Error",a),n)),r){var s=this.state,f=s.before,d=s.after,p=null,b=null;"after"===e&&(p=r.format(l.h),b=f?f.format(l.h):null),"before"===e&&(p=d?d.format(l.h):null,b=r.format(l.h)),p&&b&&u(c.key,"value",[p,b])}}},{key:"isFutureDate",value:function(e){return oe()().isBefore(oe()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,o=t.beforeText,i=t.beforeError,c=t.after,u=t.afterText,l=t.afterError;return"between"===e.rule?m()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(me,{date:c,text:u,error:l,onUpdate:Object(a.partial)(this.onRangeDateChange,"after"),dateFormat:Ne,isInvalidDate:this.isFutureDate}),before:Object(r.createElement)(me,{date:n,text:o,error:i,onUpdate:Object(a.partial)(this.onRangeDateChange,"before"),dateFormat:Ne,isInvalidDate:this.isFutureDate}),span:Object(r.createElement)("span",{className:"separator"})}}):Object(r.createElement)(me,{date:n,text:o,error:i,onUpdate:this.onSingleDateChange,dateFormat:Ne,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.filter,o=t.updateFilter,a=this.state.before;"between"===r.rule&&"between"!==e?o({key:r.key,rule:e,value:a?a.format(l.h):void 0}):n(r.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=o.rule,c=n.labels,u=n.rules,l=this.getScreenReaderText(o,n),s=m()({mixedString:c.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:u,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(r.createElement)("div",{className:v()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(r.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":a})},s),l&&Object(r.createElement)("span",{className:"screen-reader-text"},l))}}])&&je(t.prototype,n),i&&je(t,i),u}(r.Component),Te=n(11),De=n.n(Te),Me=n(159);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t=e.className,n=e.config,i=e.filter,c=e.isEnglish,u=e.onFilterChange,l=i.key,s=i.rule,f=i.value,p=n.labels,b=n.rules,h=Re(Object(r.useState)([]),2),y=h[0],g=h[1];Object(r.useEffect)((function(){De()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(g)}),[]);var O=Re(Object(r.useState)(Array.isArray(f)?f[0]:""),2),j=O[0],E=O[1];Object(r.useEffect)((function(){Array.isArray(f)&&E(f[0])}),[f]);var _=Re(Object(r.useState)([]),2),S=_[0],x=_[1];Object(r.useEffect)((function(){j&&(x([]),De()({path:"/wc/v3/products/attributes/".concat(j,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(x))}),[j]);var k=Re(Object(r.useState)(Array.isArray(f)&&f[1]||""),2),C=k[0],N=k[1],P=function(e){var t=e.attributes,n=e.attributeTerms,a=e.config,i=e.filter,c=e.selectedAttribute,u=e.selectedAttributeTerm;if(0===t.length||0===n.length||""===c||""===u)return"";var l=Array.isArray(a.rules)&&a.rules.find((function(e){return e.value===i.rule}))||{},s=t.find((function(e){return e.key===c})).label,f=n.find((function(e){return e.key===u})).label,d=m()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(o.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(r.createElement)(r.Fragment,null,s),equals:Object(r.createElement)(r.Fragment,null,l.label),value:Object(r.createElement)(r.Fragment,null,f)}});return w(m()({mixedString:a.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,d),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:y,attributeTerms:S,config:n,filter:i,selectedAttribute:j,selectedAttributeTerm:C});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},p.add||""),Object(r.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},m()({mixedString:p.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(d.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:b,value:s,onChange:Object(a.partial)(u,l,"rule"),"aria-label":p.rule}),filter:Object(r.createElement)("div",{className:v()(t,"bwf-filters-advanced-attribute-fieldset")},y.length>0?Object(r.createElement)(Me.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(o.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:y,selected:j,onChange:function(e){"string"!=typeof e&&(e=""),E(e),N(""),u(l,"value",[e])}}):Object(r.createElement)(d.Spinner,null),y.length>0&&""!==j&&(S.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(Me.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(o.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:S,selected:C,onChange:function(e){"string"!=typeof e&&(e=""),N(e),u(l,"value",[j,e])}})):Object(r.createElement)(d.Spinner,null)))}})),P&&Object(r.createElement)("span",{className:"screen-reader-text"},P))};Ae.propTypes={config:c.a.shape({labels:c.a.shape({rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number]))}).isRequired,onFilterChange:c.a.func.isRequired};var Fe=Ae;n(221);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Ue(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=We(e);if(t){var o=We(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ge(this,n)}}function Ge(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze=[{value:"all",label:Object(o.__)("All","funnel-builder")},{value:"any",label:Object(o.__)("Any","funnel-builder")}],Qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}(l,e);var t,n,i,c=Ke(l);function l(e){var t,n=e.query,o=e.config;return Ve(this,l),(t=c.apply(this,arguments)).state={match:n.match||"all",activeFilters:Object(u.b)(n,o.filters)},t.filterListRef=Object(r.createRef)(),t.onMatchChange=t.onMatchChange.bind($e(t)),t.onFilterChange=t.onFilterChange.bind($e(t)),t.getAvailableFilterKeys=t.getAvailableFilterKeys.bind($e(t)),t.addFilter=t.addFilter.bind($e(t)),t.removeFilter=t.removeFilter.bind($e(t)),t.clearFilters=t.clearFilters.bind($e(t)),t.getUpdateHref=t.getUpdateHref.bind($e(t)),t.updateFilter=t.updateFilter.bind($e(t)),t.onFilter=t.onFilter.bind($e(t)),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.query,o=e.query;Object(a.isEqual)(o,r)||this.setState({activeFilters:Object(u.b)(r,n.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=this.state.activeFilters.map((function(r){return e===r.key?Object.assign({},r,Ue({},t,n)):r}));this.setState({activeFilters:r})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=qe(this.state.activeFilters),r=Object(a.findIndex)(n,(function(t){return t.key===e}));t("remove",n[r]),n.splice(r,1),this.setState({activeFilters:n}),0===n.length&&Object(u.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return m()({mixedString:t.title,components:{select:Object(r.createElement)(d.SelectControl,{className:"bwf-filters-advanced-title-select",options:Ze,value:e,onChange:this.onMatchChange,"aria-label":Object(o.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(a.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,o=r.onAdvancedFilterAction,a=r.config.filters[e],i={key:e};Array.isArray(a.rules)&&a.rules.length&&(i.rule=a.rules[0].value),a.input&&a.input.options&&(i.value=Object(u.c)(a,a.input.options)),a.input&&"Search"===a.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(qe(e.activeFilters),[i])}})),o("add",i),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,o=n.query,a=n.config,i=Object(u.j)(e,o,a.filters),c="all"===t?void 0:t;return Object(u.f)(ze(ze({},i),{},{match:c}),r,o)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,o=this.state,a=o.activeFilters,i=o.match;t("filter",ze(ze({},Object(u.j)(a,n,r.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),o=n.indexOf(t.key);return-1===r||-1===o?0:r-o}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,i=t.query,c=t.currency,u=this.state,l=u.activeFilters,s=u.match,f=this.getAvailableFilterKeys(),p=this.getUpdateHref(l,s),h="admin.php"+window.location.search===p||0===l.length,m=this.isEnglish();return Object(r.createElement)(g.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},l.sort(this.orderFilters).map((function(t){var o=t.key,u=n.filters[o],l=u.input,s=u.labels;return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item",key:o},"SelectControl"===l.component&&Object(r.createElement)(T,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[o],onFilterChange:e.onFilterChange,isEnglish:m}),"Search"===l.component&&Object(r.createElement)(H,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[o],onFilterChange:e.onFilterChange,isEnglish:m,query:i}),"Number"===l.component&&Object(r.createElement)(ne,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[o],onFilterChange:e.onFilterChange,isEnglish:m,query:i,currency:c}),"Currency"===l.component&&Object(r.createElement)(ne,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:ze(ze({},n.filters[o]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:m,query:i,currency:c}),"Date"===l.component&&Object(r.createElement)(Pe,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[o],onFilterChange:e.onFilterChange,isEnglish:m,query:i,updateFilter:e.updateFilter}),"ProductAttribute"===l.component&&Object(r.createElement)(Fe,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[o],onFilterChange:e.onFilterChange,isEnglish:m,query:i,updateFilter:e.updateFilter}),Object(r.createElement)(d.Button,{className:v()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:s.remove,onClick:Object(a.partial)(e.removeFilter,o)},Object(r.createElement)(b.a,{icon:"cross-small"})))}))),f.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(d.Dropdown,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(d.Button,{className:"bwf-filters-advanced-add-button",onClick:n,"aria-expanded":t},Object(r.createElement)(b.a,{icon:"add-outline"}),Object(o.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var o=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},f.map((function(t){return Object(r.createElement)("li",{key:t},Object(r.createElement)(d.Button,{onClick:Object(a.partial)(e.addFilter,t,o)},n.filters[t].labels.add))})))}})),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},h&&Object(r.createElement)(d.Button,{isPrimary:!0,disabled:!0},Object(o.__)("Filter","funnel-builder")),!h&&Object(r.createElement)(O.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:p,onClick:this.onFilter},Object(o.__)("Filter","funnel-builder")),l.length>0&&Object(r.createElement)(O.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(o.__)("Clear all filters","funnel-builder"))))}}])&&He(t.prototype,n),i&&He(t,i),l}(r.Component);Qe.propTypes={config:c.a.shape({title:c.a.string,filters:c.a.objectOf(c.a.shape({labels:c.a.shape({add:c.a.string,remove:c.a.string,rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}))}).isRequired,path:c.a.string.isRequired,query:c.a.object,onAdvancedFilterAction:c.a.func,siteLocale:c.a.string,currency:c.a.object.isRequired},Qe.defaultProps={query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"};var Je=Qe,et=function(e){var t=e.className,n=e.count,o=e.children,a=e.disabled,i=e.helpText,c=e.onClick;return!a&&n<2?Object(r.createElement)(d.Tooltip,{text:i},Object(r.createElement)("span",{className:t},Object(r.createElement)(d.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},o))):Object(r.createElement)(d.Button,{className:v()("bwf-compare-button",t),onClick:c,disabled:a,isSecondary:!0},o)};et.propTypes={className:c.a.string,count:c.a.number.isRequired,children:c.a.node.isRequired,helpText:c.a.string.isRequired,onClick:c.a.func.isRequired,disabled:c.a.bool};var tt=et;function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=st(e);if(t){var o=st(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){if(t&&("object"===nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return lt(e)}function lt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(l,e);var t,n,i,c=ct(l);function l(e){var t,n=e.getLabels,r=e.param,o=e.query;return ot(this,l),(t=c.apply(this,arguments)).state={selected:[]},t.clearQuery=t.clearQuery.bind(lt(t)),t.updateQuery=t.updateQuery.bind(lt(t)),t.updateLabels=t.updateLabels.bind(lt(t)),o[r]&&n(o[r],o).then(t.updateLabels),t}return t=l,(n=[{key:"componentDidUpdate",value:function(e,t){var n=e.param,r=e.query,o=t.selected,i=this.props,c=i.getLabels,l=i.param,s=i.query,f=this.state.selected;if(n!==l||o.length>0&&0===f.length)this.clearQuery();else{var d=Object(u.e)(r[l]),p=Object(u.e)(s[l]);Object(a.isEqual)(d.sort(),p.sort())||c(s[l],s).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query;this.setState({selected:[]}),Object(u.k)(rt({},t,void 0),n,r)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query,o=this.state.selected.map((function(e){return e.key}));Object(u.k)(rt({},t,o.join(",")),n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,a=t.type,i=this.state.selected;return Object(r.createElement)(g.a,{title:n.title,className:"bwf-filters-compare bwf-analytics-card"},Object(r.createElement)("div",{className:"bwf-filters-compare-body"},Object(r.createElement)(D.a,{type:a,selected:i,placeholder:n.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(r.createElement)("div",{className:"bwf-filters-compare-footer"},Object(r.createElement)(tt,{count:i.length,helpText:n.helpText,onClick:this.updateQuery},n.update),i.length>0&&Object(r.createElement)(d.Button,{isLink:!0,onClick:this.clearQuery},Object(o.__)("Clear all","funnel-builder"))))}}])&&at(t.prototype,n),i&&at(t,i),l}(r.Component);ft.propTypes={getLabels:c.a.func.isRequired,labels:c.a.shape({placeholder:c.a.string,title:c.a.string,update:c.a.string}),param:c.a.string.isRequired,path:c.a.string.isRequired,query:c.a.object,type:c.a.string.isRequired},ft.defaultProps={labels:{},query:{}};var dt=n(183),pt=n(130),bt=n(511),ht=n(652),mt=n(173),yt=n(165);n(222);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Et(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return kt(this,n)}}function kt(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(l,e);var t,n,i,c=xt(l);function l(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l);var n=(t=c.call(this,e)).getFilter();if(t.state={nav:n.path||[],animate:null,selectedTag:null},t.selectSubFilter=t.selectSubFilter.bind(Ct(t)),t.getVisibleFilters=t.getVisibleFilters.bind(Ct(t)),t.updateSelectedTag=t.updateSelectedTag.bind(Ct(t)),t.onTagChange=t.onTagChange.bind(Ct(t)),t.onContentMount=t.onContentMount.bind(Ct(t)),t.goBack=t.goBack.bind(Ct(t)),n.settings&&n.settings.getLabels){var r=t.props.query,o=n.settings,a=o.param;(0,o.getLabels)(r[a],r).then(t.updateSelectedTag)}return t}return t=l,(n=[{key:"componentDidUpdate",value:function(e){var t=e.query,n=this.props,r=n.query,o=n.config;if(t[o.param]!==r[[o.param]]){var a=this.getFilter();if(a&&"Search"===a.component){this.setState({nav:a.path||[]});var i=a.settings,c=i.param;(0,i.getLabels)(r[c],r).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,n=t.config,r=t.query,o=Object(u.a)(n.filters);return e=e||r[n.param]||n.defaultValue||"all",Object(a.find)(o,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(a.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var n=t[0],r=Object(a.find)(e,{value:n});return this.getVisibleFilters(r&&r.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(jt(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.path,o=n.query,a=n.config,i=n.onFilterSelect,c=Object(u.h)(o),l=Ot(wt({},a.param,(a.defaultValue||"all")===e?void 0:e),t);a.staticParams.forEach((function(e){l[e]=o[e]})),Object(u.k)(l,r,c),i(l)}},{key:"onTagChange",value:function(e,t,n,r){var o=Object(a.last)(r),i=e.value,c=e.settings.param;o?(this.update(i,wt({},c,o.key)),t()):this.update(n.defaultValue||"all"),this.updateSelectedTag([o])}},{key:"renderButton",value:function(e,t,n){var o=this;if(e.component){var i=e.settings,c=i.type,u=i.labels,l=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(r.createElement)(D.a,{className:"bwf-filters-filter-search",type:c,placeholder:u.placeholder,selected:l?[l]:[],onChange:Object(a.partial)(this.onTagChange,e,t,n),inlineTags:!0,staticResults:!0})}var s=Object(a.partial)(this.selectSubFilter,e.value),f=this.getFilter(),p=f.value===e.value||f.path&&Object(a.includes)(f.path,e.value);return Object(r.createElement)(d.Button,{className:"bwf-filters-filter-button",onClick:function(n){p?t(n):e.subFilters?s(n):function(n){t(n),o.update(e.value,e.query||{}),o.setState({selectedTag:null})}(n)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,n=t.length&&this.getFilter(t[t.length-1])?1:0,r=pt.focus.tabbable.find(e)[n];setTimeout((function(){r.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,n=this.state,i=n.nav,c=n.animate,u=this.getVisibleFilters(t.filters,i),l=!!i.length&&this.getFilter(i[i.length-1]),s=this.getFilter();return Object(r.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(r.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(r.createElement)(d.Dropdown,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(o.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(yt.a,{onClick:o,isOpen:n,labels:e.getButtonLabel(s)})},renderContent:function(n){var o=n.onClose;return Object(r.createElement)(mt.a,{animationKey:i,animate:c,onExited:e.onContentMount},(function(){return Object(r.createElement)("ul",{className:"bwf-filters-filter-content-list"},l&&Object(r.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(r.createElement)(d.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(r.createElement)(bt.a,{icon:ht.a}),l.label)),u.map((function(n){return Object(r.createElement)("li",{key:n.value,className:v()("bwf-filters-filter-content-list-item",{"is-selected":s.value===n.value||s.path&&Object(a.includes)(s.path,n.value)})},e.renderButton(n,o,t))})))}))}}))}}])&&_t(t.prototype,n),i&&_t(t,i),l}(r.Component);Pt.propTypes={config:c.a.shape({label:c.a.string,staticParams:c.a.array.isRequired,param:c.a.string.isRequired,defaultValue:c.a.string,showFilters:c.a.func.isRequired,filters:c.a.arrayOf(c.a.shape({chartMode:c.a.oneOf(["item-comparison","time-comparison"]),component:c.a.string,label:c.a.string,path:c.a.string,subFilters:c.a.array,value:c.a.string.isRequired}))}).isRequired,path:c.a.string.isRequired,query:c.a.object,onFilterSelect:c.a.func},Pt.defaultProps={query:{},onFilterSelect:function(){}};var Tt=Pt;n(207);function Dt(e){return(Dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lt(e);if(t){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ft(this,n)}}function Ft(e,t){if(t&&("object"===Dt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bt(e)}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lt(e){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(s,e);var t,n,i,c=At(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=c.call(this)).renderCard=e.renderCard.bind(Bt(e)),e.onRangeSelect=e.onRangeSelect.bind(Bt(e)),e}return t=s,(n=[{key:"renderCard",value:function(e){var t=this.props,n=t.siteLocale,o=t.advancedFilters,i=t.query,c=t.path,u=t.onAdvancedFilterAction,l=t.currency,s=e.filters,f=e.param;if(!i[f])return null;if(0===i[f].indexOf("compare")){var d=Object(a.find)(s,{value:i[f]});if(!d)return null;var p=d.settings,b=void 0===p?{}:p;return Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(ft,Mt({path:c,query:i},b)))}return"advanced"===i[f]?Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(Je,{siteLocale:n,currency:l,config:o,path:c,query:i,onAdvancedFilterAction:u})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,n=t.query,r=t.path,o=t.onDateSelect,a=t.updateQuery,i=void 0===a||a;e.after&&(e.after=oe()(Object(l.a)(oe()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(oe()(oe()().format("YYYY-MM-DD")).isSame(e.before)?e.before=oe()(Object(l.a)(oe()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=oe()(Object(l.a)(oe()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(u.k)(e,r,n),o(e)}},{key:"getDateQuery",value:function(e){var t=Object(l.f)(e),n=t.period,r=t.compare,o=t.before,a=t.after,i=Object(l.d)(e);return{period:n,compare:r,before:o,after:a,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,n=e.filters,a=e.query,i=e.path,c=e.showDatePicker,u=e.onFilterSelect,l=e.isoDateFormat;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ce.a,{className:"screen-reader-text"},Object(o.__)("Filters","funnel-builder")),Object(r.createElement)(ce.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},c&&Object(r.createElement)(dt.a,{key:JSON.stringify(a),dateQuery:t||this.getDateQuery(a),onRangeSelect:this.onRangeSelect,isoDateFormat:l}),n.map((function(e){return e.showFilters(a)?Object(r.createElement)(Tt,{key:e.param,config:e,query:a,path:i,onFilterSelect:u}):null}))),n.map(this.renderCard)))}}])&&Rt(t.prototype,n),i&&Rt(t,i),s}(r.Component);zt.propTypes={siteLocale:c.a.string,advancedFilters:c.a.object,filters:c.a.array,path:c.a.string.isRequired,query:c.a.object,showDatePicker:c.a.bool,onDateSelect:c.a.func,onFilterSelect:c.a.func,onAdvancedFilterAction:c.a.func,currency:c.a.object,dateQuery:c.a.shape({period:c.a.string.isRequired,compare:c.a.string.isRequired,before:c.a.object,after:c.a.object,primaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired}).isRequired,secondaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired})}),isoDateFormat:c.a.string},zt.defaultProps={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:f()().getCurrencyConfig()};t.a=zt},function(e,t,n){"use strict";var r=n(0),o=n(14),a=n.n(o),i=n(2),c=n.n(i),u=n(5),l=n(1),s=n(60),f=n(8),d=n(9),p=n.n(d),b=(n(323),n(173));function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.images,n=h(Object(r.useState)({img:t[0],index:0}),2),o=n[0],a=n[1],i=h(Object(r.useState)(null),2),c=i[0],l=i[1];return 1===t.length?Object(r.createElement)("img",{src:o.img,alt:"img",className:"bwf-carousel-image"}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b.a,{animate:c,animationKey:Math.floor(100*Math.random())},(function(){return Object(r.createElement)("img",{src:o.img,alt:"img",className:"bwf-carousel-image",onDragStart:function(e){return e.preventDefault()}})})),Object(r.createElement)(s.a,{justify:"center",className:"bwf-carousel-control-wrap"},t.map((function(e,t){return Object(r.createElement)(u.FlexItem,{key:"bwf-carousel-img-"+t},Object(r.createElement)(u.Button,{className:"bwf-carousel-control-btn",onClick:function(){return function(e,t){t!==o.index&&(a({img:e,index:t}),t<o.index?l("right"):l("left"))}(e,t)}},Object(r.createElement)(f.a,{height:"8",width:"8",icon:"circle-xs".concat(t===o.index?"-fill":"")})))}))))};y.prototype={images:p.a.array.isRequired};var v=y;n(324);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,o=e.modalContent,i=o.title,d=o.proLink,p=void 0===d?window.wffn.pro_link:d,b=o.proLabel,h=void 0===b?Object(l.__)("Upgrade to PRO Now","funnel-builder"):b,m=o.content;return t?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-upgrade-pro-modal",isDismissible:!0,onRequestClose:function(){return n()},title:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-upgrade-pro-modal__title"},i),Object(r.createElement)("span",{className:"bwf-upgrade-pro-modal__pro-badge"},"PRO"))},Object(r.createElement)("div",{className:"bwf-upgrade-pro-modal__content-wrap"},m&&("object"!==g(m)||c.a.isValidElement(m)?m:Object(r.createElement)(s.a,{align:"flex-start"},Object(r.createElement)(s.c,{className:a()({"bwf-w-3/5":m.images})},Object(r.createElement)("div",{className:"bwf-upgrade-pro-modal__modal-content"},Object(r.createElement)("div",{className:"bwf-upgrade-pro-modal__desc"},null==m?void 0:m.desc),m.benefits&&Object(r.createElement)("div",{className:"bwf-upgrade-pro-modal__benefits-container"},Object(r.createElement)("h1",{className:"bwf-upgrade-pro-modal__benefits-heading"},Object(l.__)("What will you get ?","funnel-builder")),(null==m?void 0:m.benefits)&&Object(r.createElement)("ul",null,null==m?void 0:m.benefits.map((function(e,t){return Object(r.createElement)("li",{key:"pro-order-bump-".concat(t)},Object(r.createElement)(f.a,{icon:"checkmark-circle",height:"16",width:"16"}),Object(r.createElement)("h1",null,e))})))))),m.images&&Object(r.createElement)(s.c,{className:"bwf-w-2/5"},Object(r.createElement)(v,{images:m.images}))))),Object(r.createElement)("a",{href:p,target:"__blank",rel:"noopener noreferrer",className:"components-button bwf-w-full bwf-upgrade-pro-modal__upgrade-btn"},h))):""}},,,,,,,function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},,,,,,,,,,,,,,,,,,function(e,t,n){var r=n(246),o=n(325),a=n(326);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,o,n)}},function(e,t,n){var r=n(191),o=n(227),a=n(192),i=n(373),c=n(375),u=n(268),l=n(269),s=n(378),f=n(379),d=n(273),p=n(380),b=n(176),h=n(381),m=n(382),y=n(277),v=n(135),g=n(177),O=n(386),w=n(140),j=n(388),E=n(151),_=n(156),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,x,k,C,N){var P,T=1&n,D=2&n,M=4&n;if(x&&(P=C?x(t,k,C,N):x(t)),void 0!==P)return P;if(!w(t))return t;var R=v(t);if(R){if(P=h(t),!T)return l(t,P)}else{var I=b(t),A="[object Function]"==I||"[object GeneratorFunction]"==I;if(g(t))return u(t,T);if("[object Object]"==I||"[object Arguments]"==I||A&&!C){if(P=D||A?{}:y(t),!T)return D?f(t,c(P,t)):s(t,i(P,t))}else{if(!S[I])return C?t:{};P=m(t,I,T)}}N||(N=new r);var F=N.get(t);if(F)return F;N.set(t,P),j(t)?t.forEach((function(r){P.add(e(r,n,x,r,t,N))})):O(t)&&t.forEach((function(r,o){P.set(o,e(r,n,x,o,t,N))}));var B=R?void 0:(M?D?p:d:D?_:E)(t);return o(B||t,(function(r,o){B&&(r=t[o=r]),a(P,o,e(r,n,x,o,t,N))})),P}},function(e,t,n){var r=n(257),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(374),o=n(219),a=n(135),i=n(177),c=n(245),u=n(211),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),d=!n&&!s&&!f&&u(e),p=n||s||f||d,b=p?r(e.length,String):[],h=b.length;for(var m in e)!t&&!l.call(e,m)||p&&("length"==m||f&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||c(m,h))||b.push(m);return b}},function(e,t,n){(function(e){var r=n(158),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(358)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(229),o=n(194),a=n(228),i=n(271),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},function(e,t,n){var r=n(274),o=n(228),a=n(151);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(229),o=n(135);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t,n){var r=n(158).Uint8Array;e.exports=r},function(e,t,n){var r=n(230);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(278),o=n(194),a=n(262);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(140),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){e.exports=n(280)},function(e,t,n){var r=n(227),o=n(195),a=n(281),i=n(135);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},function(e,t,n){var r=n(157);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(270),o=n(392),a=n(147),i=n(135);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},function(e,t,n){var r=n(395),o=n(148);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t,n){var r=n(285),o=n(398),a=n(286);e.exports=function(e,t,n,i,c,u){var l=1&n,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var b=-1,h=!0,m=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++b<s;){var y=e[b],v=t[b];if(i)var g=l?i(v,y,b,t,e,u):i(y,v,b,e,t,u);if(void 0!==g){if(g)continue;h=!1;break}if(m){if(!o(t,(function(e,t){if(!a(m,t)&&(y===e||c(y,e,n,i,u)))return m.push(t)}))){h=!1;break}}else if(y!==v&&!c(y,v,n,i,u)){h=!1;break}}return u.delete(e),u.delete(t),h}},function(e,t,n){var r=n(320),o=n(396),a=n(397);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(140);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(405),o=n(514);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(244),o=n(147),a=n(293),i=n(135);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},function(e,t,n){var r=n(195),o=n(154);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},function(e,t,n){var r=n(408),o=n(195),a=n(147),i=n(409),c=n(135);e.exports=function(e,t,n){var u=c(e)?r:i,l=arguments.length<3;return u(e,a(t,4),n,l,o)}},function(e,t,n){var r=n(418),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),u=Array(c);++i<c;)u[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(u),r(e,this,l)}}},function(e,t,n){var r=n(419),o=n(420)(r);e.exports=o},function(e,t,n){var r=n(154),o=n(148);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(426),o=n(151);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){var r=n(139),o=n(300);e.exports=function(e,t,n,r){return function(e,t,n,r){var a,i,c={},u=new o,l=function(e){var t=e.v!==a?e.v:e.w,r=c[t],o=n(e),l=i.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=a,u.decrease(t,l))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;c[e]={distance:n},u.add(e,n)}));for(;u.size()>0&&(a=u.removeMin(),(i=c[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return c}(e,String(t),n||a,r||function(t){return e.outEdges(t)})};var a=r.constant(1)},function(e,t,n){var r=n(139);function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,a=o.length;return n[e]=a,o.push({key:e,priority:t}),this._decrease(a),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],a=n[t];n[e]=a,n[t]=o,r[a.key]=e,r[o.key]=t}},function(e,t,n){var r=n(139);e.exports=function(e){var t=0,n=[],o={},a=[];return e.nodes().forEach((function(i){r.has(o,i)||function i(c){var u=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach((function(e){r.has(o,e)?o[e].onStack&&(u.lowlink=Math.min(u.lowlink,o[e].index)):(i(e),u.lowlink=Math.min(u.lowlink,o[e].lowlink))})),u.lowlink===u.index){var l,s=[];do{l=n.pop(),o[l].onStack=!1,s.push(l)}while(c!==l);a.push(s)}}(i)})),a}},function(e,t,n){var r=n(139);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),(function i(c){if(r.has(n,c))throw new a;r.has(t,c)||(n[c]=!0,t[c]=!0,r.each(e.predecessors(c),i),delete n[c],o.push(c))})),r.size(t)!==e.nodeCount())throw new a;return o}function a(){}e.exports=o,o.CycleException=a,a.prototype=new Error},function(e,t,n){var r=n(139);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],i={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,o,a,i,c){r.has(a,n)||(a[n]=!0,o||c.push(n),r.each(i(n),(function(n){e(t,n,o,a,i,c)})),o&&c.push(n))}(e,t,"post"===n,i,o,a)})),a}},function(e,t,n){var r=n(350);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(235);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(193),o=n(178);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(134),o=n(143).Graph,a=n(199).slack;function i(e,t){return r.forEach(e.nodes(),(function n(o){r.forEach(t.nodeEdges(o),(function(r){var i=r.v,c=o===i?r.w:i;e.hasNode(c)||a(t,r)||(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))}))})),e.nodeCount()}function c(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return a(t,n)}))}function u(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new o({directed:!1}),l=e.nodes()[0],s=e.nodeCount();r.setNode(l,{});for(;i(r,e)<s;)t=c(r,e),n=r.hasNode(t.v)?a(e,t):-a(e,t),u(r,e,n);return r}},,,,,,,,,,,,function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(14),i=n.n(a),c=n(5),u=n(26),l=n(9),s=n.n(l),f=n(61);n(355);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.id,n=e.instanceId,a=e.label,l=e.popoverContents,s=e.remove,f=e.screenReaderLabel,p=e.className;if(f=f||a,!a)return null;var b=d(Object(r.useState)(!1),2),h=b[0],m=b[1];a=Object(u.decodeEntities)(a);var y=i()("bwf-tag",p,{"has-remove":!!s}),v="bwf-tag-label-".concat(n),g=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},f),Object(r.createElement)("span",{"aria-hidden":"true"},a));return Object(r.createElement)("span",{className:y},l?Object(r.createElement)(c.Button,{className:"bwf-tag-text",id:v,onClick:function(){return m(!0)}},g):Object(r.createElement)("span",{className:"bwf-tag-text",id:v},g),l&&h&&Object(r.createElement)(c.Popover,{onClose:function(){return m(!1)}},l),s&&Object(r.createElement)(c.Button,{className:"bwf-tag-remove",onClick:s(t),label:Object(o.sprintf)(Object(o.__)("Remove %s","funnel-builder"),a),"aria-describedby":v},Object(r.createElement)(c.Dashicon,{icon:"dismiss",size:20})))};b.propTypes={id:s.a.oneOfType([s.a.number,s.a.string]),label:s.a.string.isRequired,popoverContents:s.a.node,remove:s.a.func,screenReaderLabel:s.a.string},t.a=Object(f.withInstanceId)(b)},,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,function(e,t,n){e.exports={graphlib:n(143),layout:n(438),debug:n(495),util:{time:n(136).time,notime:n(136).notime},version:n(496)}},function(e,t,n){var r=n(366);e.exports={Graph:r.Graph,json:n(428),alg:n(429),version:r.version}},function(e,t,n){e.exports={Graph:n(226),version:n(427)}},function(e,t,n){var r=n(265);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(243);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(243),o=n(357),a=n(320);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},function(e,t,n){var r=n(174),o=n(151);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},function(e,t,n){var r=n(174),o=n(156);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(140),o=n(262),a=n(377),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(174),o=n(228);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(174),o=n(272);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(274),o=n(272),a=n(156);e.exports=function(e){return r(e,a,o)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(230),o=n(383),a=n(384),i=n(385),c=n(276);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Set]":return new u;case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(230);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(162),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(387),o=n(240),a=n(318),i=a&&a.isMap,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(176),o=n(148);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(389),o=n(240),a=n(318),i=a&&a.isSet,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(176),o=n(148);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===n(a[u],u,a))break}return t}}},function(e,t,n){var r=n(154);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&!1!==o(c[i],i,c););return n}}},function(e,t,n){var r=n(195);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},function(e,t,n){var r=n(394),o=n(402),a=n(288);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(191),o=n(283);e.exports=function(e,t,n,a){var i=n.length,c=i,u=!a;if(null==e)return!c;for(e=Object(e);i--;){var l=n[i];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<c;){var s=(l=n[i])[0],f=e[s],d=l[1];if(u&&l[2]){if(void 0===f&&!(s in e))return!1}else{var p=new r;if(a)var b=a(f,d,s,e,t,p);if(!(void 0===b?o(d,f,3,a,p):b))return!1}}return!0}},function(e,t,n){var r=n(191),o=n(284),a=n(399),i=n(401),c=n(176),u=n(135),l=n(177),s=n(211),f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,b,h){var m=u(e),y=u(t),v=m?"[object Array]":c(e),g=y?"[object Array]":c(t),O=(v="[object Arguments]"==v?f:v)==f,w=(g="[object Arguments]"==g?f:g)==f,j=v==g;if(j&&l(e)){if(!l(t))return!1;m=!0,O=!1}if(j&&!O)return h||(h=new r),m||s(e)?o(e,t,n,p,b,h):a(e,t,v,n,p,b,h);if(!(1&n)){var E=O&&d.call(e,"__wrapped__"),_=w&&d.call(t,"__wrapped__");if(E||_){var S=E?e.value():e,x=_?t.value():t;return h||(h=new r),b(S,x,n,p,h)}}return!!j&&(h||(h=new r),i(e,t,n,p,b,h))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(162),o=n(275),a=n(178),i=n(284),c=n(400),u=n(234),l=r?r.prototype:void 0,s=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var b=1&r;if(p||(p=u),e.size!=t.size&&!b)return!1;var h=d.get(e);if(h)return h==t;r|=2,d.set(e,t);var m=i(p(e),p(t),r,l,f,d);return d.delete(e),m;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(273),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var u=1&n,l=r(e),s=l.length;if(s!=r(t).length&&!u)return!1;for(var f=s;f--;){var d=l[f];if(!(u?d in t:o.call(t,d)))return!1}var p=c.get(e),b=c.get(t);if(p&&b)return p==t&&b==e;var h=!0;c.set(e,t),c.set(t,e);for(var m=u;++f<s;){var y=e[d=l[f]],v=t[d];if(a)var g=u?a(v,y,d,t,e,c):a(y,v,d,e,t,c);if(!(void 0===g?y===v||i(y,v,n,a,c):g)){h=!1;break}m||(m="constructor"==d)}if(h&&!m){var O=e.constructor,w=t.constructor;O==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof w&&w instanceof w||(h=!1)}return c.delete(e),c.delete(t),h}},function(e,t,n){var r=n(287),o=n(151);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},function(e,t,n){var r=n(283),o=n(404),a=n(289),i=n(319),c=n(287),u=n(288),l=n(212);e.exports=function(e,t){return i(e)&&c(t)?u(l(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},function(e,t,n){var r=n(196);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(290),o=n(407),a=n(319),i=n(212);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,t,n){var r=n(196);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e,t){e.exports=function(e,t,n,r,o){return o(e,(function(e,o,a){n=r?(r=!1,e):t(n,e,o,a)})),n}},function(e,t,n){var r=n(317),o=n(176),a=n(154),i=n(411),c=n(412);e.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?c(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t,n){var r=n(169),o=n(135),a=n(148);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(413),o=n(327),a=n(414);e.exports=function(e){return o(e)?a(e):r(e)}},function(e,t,n){var r=n(290)("length");e.exports=r},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[a,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),s="(?:"+[a+r+"?",r,i,c,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+s+l,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,n){var r=n(227),o=n(278),a=n(232),i=n(147),c=n(194),u=n(135),l=n(177),s=n(218),f=n(140),d=n(211);e.exports=function(e,t,n){var p=u(e),b=p||l(e)||d(e);if(t=i(t,4),null==n){var h=e&&e.constructor;n=b?p?new h:[]:f(e)&&s(h)?o(c(e)):{}}return(b?r:a)(e,(function(e,r,o){return t(n,e,r,o)})),n}},function(e,t,n){var r=n(235),o=n(197),a=n(421),i=n(297),c=o((function(e){return a(r(e,1,i,!0))}));e.exports=c},function(e,t,n){var r=n(162),o=n(219),a=n(135),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(231),o=n(266),a=n(157),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(285),o=n(422),a=n(423),i=n(286),c=n(424),u=n(234);e.exports=function(e,t,n){var l=-1,s=o,f=e.length,d=!0,p=[],b=p;if(n)d=!1,s=a;else if(f>=200){var h=t?null:c(e);if(h)return u(h);d=!1,s=i,b=new r}else b=t?[]:p;e:for(;++l<f;){var m=e[l],y=t?t(m):m;if(m=n||0!==m?m:0,d&&y==y){for(var v=b.length;v--;)if(b[v]===y)continue e;t&&b.push(y),p.push(m)}else s(b,y,n)||(b!==p&&b.push(y),p.push(m))}return p}},function(e,t,n){var r=n(264);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(513),o=n(425),a=n(234),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(244);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(139),o=n(226);function a(e){return r.map(e.nodes(),(function(t){var n=e.node(t),o=e.parent(t),a={v:t};return r.isUndefined(n)||(a.value=n),r.isUndefined(o)||(a.parent=o),a}))}function i(e){return r.map(e.edges(),(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:i(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},function(e,t,n){e.exports={components:n(430),dijkstra:n(299),dijkstraAll:n(431),findCycles:n(432),floydWarshall:n(433),isAcyclic:n(434),postorder:n(435),preorder:n(436),prim:n(437),tarjan:n(301),topsort:n(302)}},function(e,t,n){var r=n(139);e.exports=function(e){var t,n={},o=[];function a(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),a),r.each(e.predecessors(o),a))}return r.each(e.nodes(),(function(e){t=[],a(e),t.length&&o.push(t)})),o}},function(e,t,n){var r=n(299),o=n(139);e.exports=function(e,t,n){return o.transform(e.nodes(),(function(o,a){o[a]=r(e,a,t,n)}),{})}},function(e,t,n){var r=n(139),o=n(301);e.exports=function(e){return r.filter(o(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},function(e,t,n){var r=n(139);e.exports=function(e,t,n){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,a=t(n);r[e][o]={distance:a,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var a=r[n];o.forEach((function(n){var r=a[e],o=t[n],i=a[n],c=r.distance+o.distance;c<i.distance&&(i.distance=c,i.predecessor=o.predecessor)}))}))})),r}(e,t||o,n||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(302);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(e,t,n){var r=n(303);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(303);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(139),o=n(226),a=n(300);e.exports=function(e,t){var n,i=new o,c={},u=new a;function l(e){var r=e.v===n?e.w:e.v,o=u.priority(r);if(void 0!==o){var a=t(e);a<o&&(c[r]=n,u.decrease(r,a))}}if(0===e.nodeCount())return i;r.each(e.nodes(),(function(e){u.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),u.decrease(e.nodes()[0],0);var s=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(c,n))i.setEdge(n,c[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(l)}return i}},function(e,t,n){"use strict";var r=n(134),o=n(474),a=n(477),i=n(478),c=n(136).normalizeRanks,u=n(480),l=n(136).removeEmptyRanks,s=n(481),f=n(482),d=n(483),p=n(484),b=n(493),h=n(136),m=n(143).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?h.time:h.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new m({multigraph:!0,compound:!0}),n=x(e.graph());return t.setGraph(r.merge({},v,S(n,y),r.pick(n,g))),r.forEach(e.nodes(),(function(n){var o=x(e.node(n));t.setNode(n,r.defaults(S(o,O),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var o=x(e.edge(n));t.setEdge(n,r.merge({},E,S(o,j),r.pick(o,_)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){o.run(e)})),t("    nestingGraph.run",(function(){s.run(e)})),t("    rank",(function(){i(h.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};h.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){l(e)})),t("    nestingGraph.cleanup",(function(){s.cleanup(e)})),t("    normalizeRanks",(function(){c(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){a.run(e)})),t("    parentDummyChains",(function(){u(e)})),t("    addBorderSegments",(function(){f(e)})),t("    order",(function(){p(e)})),t("    insertSelfEdges",(function(){!function(e){var t=h.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,o){var a=e.node(t);a.order=o+n,r.forEach(a.selfEdges,(function(t){h.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){d.adjust(e)})),t("    position",(function(){b(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,c=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-c},{x:o+5*i/6,y:a-c},{x:o+i,y:a},{x:o+5*i/6,y:a+c},{x:o+2*i/3,y:a+c}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),a=e.node(n.borderBottom),i=e.node(r.last(n.borderLeft)),c=e.node(r.last(n.borderRight));n.width=Math.abs(c.x-i.x),n.height=Math.abs(a.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){a.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){d.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,a=0,i=e.graph(),c=i.marginx||0,u=i.marginy||0;function l(e){var r=e.x,i=e.y,c=e.width,u=e.height;t=Math.min(t,r-c/2),n=Math.max(n,r+c/2),o=Math.min(o,i-u/2),a=Math.max(a,i+u/2)}r.forEach(e.nodes(),(function(t){l(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&l(n)})),t-=c,o-=u,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=o})),r.forEach(e.edges(),(function(n){var a=e.edge(n);r.forEach(a.points,(function(e){e.x-=t,e.y-=o})),r.has(a,"x")&&(a.x-=t),r.has(a,"y")&&(a.y-=o)})),i.width=n-t+c,i.height=a-o+u}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,o=e.edge(t),a=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=a),o.points.unshift(h.intersectRect(a,n)),o.points.push(h.intersectRect(i,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){o.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(e.edges(),(function(n){var o=e.edge(n),a=t.edge(n);o.points=a.points,r.has(a,"x")&&(o.x=a.x,o.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var y=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],O=["width","height"],w={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function x(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},function(e,t,n){var r=n(265);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(197),o=n(178),a=n(198),i=n(156),c=Object.prototype,u=c.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var s=t[n],f=i(s),d=-1,p=f.length;++d<p;){var b=f[d],h=e[b];(void 0===h||o(h,c[b])&&!u.call(e,b))&&(e[b]=s[b])}return e}));e.exports=l},function(e,t,n){var r=n(442)(n(443));e.exports=r},function(e,t,n){var r=n(147),o=n(154),a=n(151);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var u=r(n,3);t=a(t),n=function(e){return u(c[e],e,c)}}var l=e(t,n,i);return l>-1?c[u?t[l]:l]:void 0}}},function(e,t,n){var r=n(246),o=n(147),a=n(444),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var u=null==n?0:a(n);return u<0&&(u=i(c+u,0)),r(e,o(t,3),u)}},function(e,t,n){var r=n(304);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(233),o=n(281),a=n(156);e.exports=function(e,t){return null==e?e:r(e,o(t),a)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(193),o=n(232),a=n(147);e.exports=function(e,t){var n={};return t=a(t,3),o(e,(function(e,o,a){r(n,o,t(e,o,a))})),n}},function(e,t,n){var r=n(236),o=n(449),a=n(157);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(451),o=n(455)((function(e,t,n){r(e,t,n)}));e.exports=o},function(e,t,n){var r=n(191),o=n(306),a=n(233),i=n(452),c=n(140),u=n(156),l=n(307);e.exports=function e(t,n,s,f,d){t!==n&&a(n,(function(a,u){if(d||(d=new r),c(a))i(t,n,u,s,e,f,d);else{var p=f?f(l(t,u),a,u+"",t,n,d):void 0;void 0===p&&(p=a),o(t,u,p)}}),u)}},function(e,t,n){var r=n(306),o=n(268),a=n(276),i=n(269),c=n(277),u=n(219),l=n(135),s=n(297),f=n(177),d=n(218),p=n(140),b=n(453),h=n(211),m=n(307),y=n(454);e.exports=function(e,t,n,v,g,O,w){var j=m(e,n),E=m(t,n),_=w.get(E);if(_)r(e,n,_);else{var S=O?O(j,E,n+"",e,t,w):void 0,x=void 0===S;if(x){var k=l(E),C=!k&&f(E),N=!k&&!C&&h(E);S=E,k||C||N?l(j)?S=j:s(j)?S=i(j):C?(x=!1,S=o(E,!0)):N?(x=!1,S=a(E,!0)):S=[]:b(E)||u(E)?(S=j,u(j)?S=y(j):p(j)&&!d(j)||(S=c(E))):x=!1}x&&(w.set(E,S),g(S,E,v,O,w),w.delete(E)),r(e,n,S)}}},function(e,t,n){var r=n(169),o=n(194),a=n(148),i=Function.prototype,c=Object.prototype,u=i.toString,l=c.hasOwnProperty,s=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==s}},function(e,t,n){var r=n(174),o=n(156);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(197),o=n(198);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,i)}return t}))}},function(e,t,n){var r=n(236),o=n(308),a=n(157);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t,n){var r=n(236),o=n(147),a=n(308);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),a):void 0}},function(e,t,n){var r=n(459),o=n(462)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){var r=n(460),o=n(289);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(196),o=n(461),a=n(242);e.exports=function(e,t,n){for(var i=-1,c=t.length,u={};++i<c;){var l=t[i],s=r(e,l);n(s,l)&&o(u,a(l,e),s)}return u}},function(e,t,n){var r=n(192),o=n(242),a=n(245),i=n(140),c=n(212);e.exports=function(e,t,n,u){if(!i(e))return e;for(var l=-1,s=(t=o(t,e)).length,f=s-1,d=e;null!=d&&++l<s;){var p=c(t[l]),b=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=f){var h=d[p];void 0===(b=u?u(h,p,d):void 0)&&(b=i(h)?h:a(t[l+1])?[]:{})}r(d,p,b),d=d[p]}return e}},function(e,t,n){var r=n(305),o=n(295),a=n(296);e.exports=function(e){return a(o(e,void 0,r),e+"")}},function(e,t,n){var r=n(464)();e.exports=r},function(e,t,n){var r=n(465),o=n(198),a=n(304);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),i=void 0===i?t<n?1:-1:a(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,a){for(var i=-1,c=r(n((t-e)/(o||1)),0),u=Array(c);c--;)u[a?c:++i]=e,e+=o;return u}},function(e,t,n){var r=n(235),o=n(467),a=n(197),i=n(198),c=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},function(e,t,n){var r=n(244),o=n(196),a=n(147),i=n(293),c=n(468),u=n(240),l=n(469),s=n(157),f=n(135);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return f(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[s];var d=-1;t=r(t,u(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return c(p,(function(e,t){return l(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(470);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,c=a.length,u=n.length;++o<c;){var l=r(a[o],i[o]);if(l)return o>=u?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(186);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),c=void 0!==t,u=null===t,l=t==t,s=r(t);if(!u&&!s&&!i&&e>t||i&&c&&l&&!u&&!s||o&&c&&l||!n&&l||!a)return 1;if(!o&&!i&&!s&&e<t||s&&n&&a&&!o&&!i||u&&n&&a||!c&&a||!l)return-1}return 0}},function(e,t,n){var r=n(359),o=0;e.exports=function(e){var t=++o;return r(e)+t}},function(e,t,n){var r=n(192),o=n(473);e.exports=function(e,t){return o(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=e.length,a=t.length,i={};++r<o;){var c=r<a?t[r]:void 0;n(i,e[r],c)}return i}},function(e,t,n){"use strict";var r=n(134),o=n(475);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},o={};function a(i){r.has(o,i)||(o[i]=!0,n[i]=!0,r.forEach(e.outEdges(i),(function(e){r.has(n,e.w)?t.push(e):a(e.w)})),delete n[i])}return r.forEach(e.nodes(),a),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},function(e,t,n){var r=n(134),o=n(143).Graph,a=n(476);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new o,i=0,c=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,o=t(e),a=r+o;n.setEdge(e.v,e.w,a),c=Math.max(c,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w).in+=o)}));var l=r.range(c+i+3).map((function(){return new a})),s=i+1;return r.forEach(n.nodes(),(function(e){u(l,s,n.node(e))})),{graph:n,buckets:l,zeroIdx:s}}(e,t||i),l=function(e,t,n){var r,o=[],a=t[t.length-1],i=t[0];for(;e.nodeCount();){for(;r=i.dequeue();)c(e,t,n,r);for(;r=a.dequeue();)c(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){o=o.concat(c(e,t,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,(function(t){return e.outEdges(t.v,t.w)})),!0)};var i=r.constant(1);function c(e,t,n,o,a){var i=a?[]:void 0;return r.forEach(e.inEdges(o.v),(function(r){var o=e.edge(r),c=e.node(r.v);a&&i.push({v:r.v,w:r.w}),c.out-=o,u(t,n,c)})),r.forEach(e.outEdges(o.v),(function(r){var o=e.edge(r),a=r.w,i=e.node(a);i.in-=o,u(t,n,i)})),e.removeNode(o.v),i}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(134),o=n(136);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,a,i=t.v,c=e.node(i).rank,u=t.w,l=e.node(u).rank,s=t.name,f=e.edge(t),d=f.labelRank;if(l===c+1)return;for(e.removeEdge(t),a=0,++c;c<l;++a,++c)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:c},n=o.addDummyNode(e,"edge",r,"_d"),c===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(i,n,{weight:f.weight},s),0===a&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,u,{weight:f.weight},s)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}},function(e,t,n){"use strict";var r=n(199).longestPath,o=n(309),a=n(479);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":c(e);break;case"tight-tree":!function(e){r(e),o(e)}(e);break;case"longest-path":i(e);break;default:c(e)}};var i=r;function c(e){a(e)}},function(e,t,n){"use strict";var r=n(134),o=n(309),a=n(199).slack,i=n(199).longestPath,c=n(143).alg.preorder,u=n(143).alg.postorder,l=n(136).simplify;function s(e){e=l(e),i(e);var t,n=o(e);for(p(n),f(n,e);t=h(n);)y(n,e,t,m(n,e,t))}function f(e,t){var n=u(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=d(e,t,n)}(e,t,n)}))}function d(e,t,n){var o=e.node(n).parent,a=!0,i=t.edge(n,o),c=0;return i||(a=!1,i=t.edge(o,n)),c=i.weight,r.forEach(t.nodeEdges(n),(function(r){var i,u,l=r.v===n,s=l?r.w:r.v;if(s!==o){var f=l===a,d=t.edge(r).weight;if(c+=f?d:-d,i=n,u=s,e.hasEdge(i,u)){var p=e.edge(n,s).cutvalue;c+=f?-p:p}}})),c}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),b(e,{},1,t)}function b(e,t,n,o,a){var i=n,c=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),(function(a){r.has(t,a)||(n=b(e,t,n,a,o))})),c.low=i,c.lim=n++,a?c.parent=a:delete c.parent,n}function h(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function m(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var c=e.node(o),u=e.node(i),l=c,s=!1;c.lim>u.lim&&(l=u,s=!0);var f=r.filter(t.edges(),(function(t){return s===v(e,e.node(t.v),l)&&s!==v(e,e.node(t.w),l)}));return r.minBy(f,(function(e){return a(t,e)}))}function y(e,t,n,o){var a=n.v,i=n.w;e.removeEdge(a,i),e.setEdge(o.v,o.w,{}),p(e),f(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),o=c(e,n);o=o.slice(1),r.forEach(o,(function(n){var r=e.node(n).parent,o=t.edge(n,r),a=!1;o||(o=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?o.minlen:-o.minlen)}))}(e,t)}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=s,s.initLowLimValues=p,s.initCutValues=f,s.calcCutValue=d,s.leaveEdge=h,s.enterEdge=m,s.exchangeEdges=y},function(e,t,n){var r=n(134);e.exports=function(e){var t=function(e){var t={},n=0;function o(a){var i=n;r.forEach(e.children(a),o),t[a]={low:i,lim:n++}}return r.forEach(e.children(),o),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),o=r.edgeObj,a=function(e,t,n,r){var o,a,i=[],c=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),i.push(o)}while(o&&(t[o].low>u||l>t[o].lim));a=o,o=r;for(;(o=e.parent(o))!==a;)c.push(o);return{path:i.concat(c.reverse()),lca:a}}(e,t,o.v,o.w),i=a.path,c=a.lca,u=0,l=i[u],s=!0;n!==o.w;){if(r=e.node(n),s){for(;(l=i[u])!==c&&e.node(l).maxRank<r.rank;)u++;l===c&&(s=!1)}if(!s){for(;u<i.length-1&&e.node(l=i[u+1]).minRank<=r.rank;)u++;l=i[u]}e.setParent(n,l),n=e.successors(n)[0]}}))}},function(e,t,n){var r=n(134),o=n(136);e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),(function(n){!function n(o,a){var i=e.children(o);i&&i.length&&r.forEach(i,(function(e){n(e,a+1)}));t[o]=a}(n,1)})),t}(e),a=r.max(r.values(n))-1,i=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var c=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(u){!function e(t,n,a,i,c,u,l){var s=t.children(l);if(!s.length)return void(l!==n&&t.setEdge(n,l,{weight:0,minlen:a}));var f=o.addBorderNode(t,"_bt"),d=o.addBorderNode(t,"_bb"),p=t.node(l);t.setParent(f,l),p.borderTop=f,t.setParent(d,l),p.borderBottom=d,r.forEach(s,(function(r){e(t,n,a,i,c,u,r);var o=t.node(r),s=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,b=o.borderTop?i:2*i,h=s!==p?1:c-u[l]+1;t.setEdge(f,s,{weight:b,minlen:h,nestingEdge:!0}),t.setEdge(p,d,{weight:b,minlen:h,nestingEdge:!0})})),t.parent(l)||t.setEdge(n,f,{weight:0,minlen:c+u[l]})}(e,t,i,c,a,n,u)})),e.graph().nodeRankFactor=i},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},function(e,t,n){var r=n(134),o=n(136);function a(e,t,n,r,a,i){var c={width:0,height:0,rank:i,borderType:t},u=a[t][i-1],l=o.addDummyNode(e,"border",c,n);a[t][i]=l,e.setParent(l,r),u&&e.setEdge(u,l,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var o=e.children(n),i=e.node(n);if(o.length&&r.forEach(o,t),r.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var c=i.minRank,u=i.maxRank+1;c<u;++c)a(e,"borderLeft","_bl",n,i,c),a(e,"borderRight","_br",n,i,c)}}))}},function(e,t,n){"use strict";var r=n(134);function o(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){a(e.edge(t))}))}function a(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function c(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){i(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,i),r.has(n,"y")&&i(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,c),r.has(n,"x")&&c(n)}))}(e),o(e))}}},function(e,t,n){"use strict";var r=n(134),o=n(485),a=n(486),i=n(487),c=n(491),u=n(492),l=n(143).Graph,s=n(136);function f(e,t,n){return r.map(t,(function(t){return c(e,t,n)}))}function d(e,t){var n=new l;r.forEach(e,(function(e){var o=e.graph().root,a=i(e,o,n,t);r.forEach(a.vs,(function(t,n){e.node(t).order=n})),u(e,n,a.vs)}))}function p(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=s.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),i=f(e,r.range(t-1,-1,-1),"outEdges"),c=o(e);p(e,c);for(var u,l=Number.POSITIVE_INFINITY,b=0,h=0;h<4;++b,++h){d(b%2?n:i,b%4>=2),c=s.buildLayerMatrix(e);var m=a(e,c);m<l&&(h=0,u=r.cloneDeep(c),l=m)}p(e,u)}},function(e,t,n){"use strict";var r=n(134);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),o=r.max(r.map(n,(function(t){return e.node(t).rank}))),a=r.map(r.range(o+1),(function(){return[]}));var i=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(i,(function n(o){if(r.has(t,o))return;t[o]=!0;var i=e.node(o);a[i.rank].push(o),r.forEach(e.successors(o),n)})),a}},function(e,t,n){"use strict";var r=n(134);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,(function(e,t){return t}))),a=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:o[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<n.length;)i<<=1;var c=2*i-1;i-=1;var u=r.map(new Array(c),(function(){return 0})),l=0;return r.forEach(a.forEach((function(e){var t=e.pos+i;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*n}))),l}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(134),o=n(488),a=n(489),i=n(490);e.exports=function e(t,n,c,u){var l=t.children(n),s=t.node(n),f=s?s.borderLeft:void 0,d=s?s.borderRight:void 0,p={};f&&(l=r.filter(l,(function(e){return e!==f&&e!==d})));var b=o(t,l);r.forEach(b,(function(n){if(t.children(n.v).length){var o=e(t,n.v,c,u);p[n.v]=o,r.has(o,"barycenter")&&(a=n,i=o,r.isUndefined(a.barycenter)?(a.barycenter=i.barycenter,a.weight=i.weight):(a.barycenter=(a.barycenter*a.weight+i.barycenter*i.weight)/(a.weight+i.weight),a.weight+=i.weight))}var a,i}));var h=a(b,c);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(h,p);var m=i(h,u);if(f&&(m.vs=r.flatten([f,m.vs,d],!0),t.predecessors(f).length)){var y=t.node(t.predecessors(f)[0]),v=t.node(t.predecessors(d)[0]);r.has(m,"barycenter")||(m.barycenter=0,m.weight=0),m.barycenter=(m.barycenter*m.weight+y.order+v.order)/(m.weight+2),m.weight+=2}return m}},function(e,t,n){var r=n(134);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var o=r.reduce(n,(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}},function(e,t,n){"use strict";var r=n(134);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var a=e.pop();t.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,o(a))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},function(e,t,n){var r=n(134),o=n(136);function a(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}e.exports=function(e,t){var n=o.partition(e,(function(e){return r.has(e,"barycenter")})),i=n.lhs,c=r.sortBy(n.rhs,(function(e){return-e.i})),u=[],l=0,s=0,f=0;i.sort((d=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),f=a(u,c,f),r.forEach(i,(function(e){f+=e.vs.length,u.push(e.vs),l+=e.barycenter*e.weight,s+=e.weight,f=a(u,c,f)}));var d;var p={vs:r.flatten(u,!0)};s&&(p.barycenter=l/s,p.weight=s);return p}},function(e,t,n){var r=n(134),o=n(143).Graph;e.exports=function(e,t,n){var a=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),i=new o({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(o){var c=e.node(o),u=e.parent(o);(c.rank===t||c.minRank<=t&&t<=c.maxRank)&&(i.setNode(o),i.setParent(o,u||a),r.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,a=i.edge(n,o),c=r.isUndefined(a)?0:a.weight;i.setEdge(n,o,{weight:e.edge(t).weight+c})})),r.has(c,"minRank")&&i.setNode(o,{borderLeft:c.borderLeft[t],borderRight:c.borderRight[t]}))})),i}},function(e,t,n){var r=n(134);e.exports=function(e,t,n){var o,a={};r.forEach(n,(function(n){for(var r,i,c=e.parent(n);c;){if((r=e.parent(c))?(i=a[r],a[r]=c):(i=o,o=c),i&&i!==c)return void t.setEdge(i,c);c=r}}))}},function(e,t,n){"use strict";var r=n(134),o=n(136),a=n(494).positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,a=0;r.forEach(t,(function(t){var o=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=a+o/2})),a+=o+n}))})(e=o.asNonCompoundGraph(e)),r.forEach(a(e),(function(t,n){e.node(n).x=t}))}},function(e,t,n){"use strict";var r=n(134),o=n(143).Graph,a=n(136);function i(e,t){var n={};return r.reduce(t,(function(t,o){var a=0,i=0,c=t.length,l=r.last(o);return r.forEach(o,(function(t,s){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=f?e.node(f).order:c;(f||t===l)&&(r.forEach(o.slice(i,s+1),(function(t){r.forEach(e.predecessors(t),(function(r){var o=e.node(r),i=o.order;!(i<a||d<i)||o.dummy&&e.node(t).dummy||u(n,r,t)}))})),i=s+1,a=d)})),o})),n}function c(e,t){var n={};function o(t,o,a,i,c){var l;r.forEach(r.range(o,a),(function(o){l=t[o],e.node(l).dummy&&r.forEach(e.predecessors(l),(function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>c)&&u(n,t,l)}))}))}return r.reduce(t,(function(t,n){var a,i=-1,c=0;return r.forEach(n,(function(r,u){if("border"===e.node(r).dummy){var l=e.predecessors(r);l.length&&(a=e.node(l[0]).order,o(n,c,u,i,a),c=u,i=a)}o(n,c,n.length,a,t.length)})),n})),n}function u(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function l(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function s(e,t,n,o){var a={},i={},c={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){a[e]=e,i[e]=e,c[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var u=o(e);if(u.length)for(var s=((u=r.sortBy(u,(function(e){return c[e]}))).length-1)/2,f=Math.floor(s),d=Math.ceil(s);f<=d;++f){var p=u[f];i[e]===e&&t<c[p]&&!l(n,e,p)&&(i[p]=e,i[e]=a[e]=a[p],t=c[p])}}))})),{root:a,align:i}}function f(e,t,n,a,i){var c={},u=function(e,t,n,a){var i=new o,c=e.graph(),u=function(e,t,n){return function(o,a,i){var c,u=o.node(a),l=o.node(i),s=0;if(s+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=-u.width/2;break;case"r":c=u.width/2}if(c&&(s+=n?c:-c),c=0,s+=(u.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2}return c&&(s+=n?c:-c),c=0,s}}(c.nodesep,c.edgesep,a);return r.forEach(t,(function(t){var o;r.forEach(t,(function(t){var r=n[t];if(i.setNode(r),o){var a=n[o],c=i.edge(a,r);i.setEdge(a,r,Math.max(u(e,t,o),c||0))}o=t}))})),i}(e,t,n,i),l=i?"borderLeft":"borderRight";function s(e,t){for(var n=u.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return s((function(e){c[e]=u.inEdges(e).reduce((function(e,t){return Math.max(e,c[t.v]+u.edge(t))}),0)}),u.predecessors.bind(u)),s((function(t){var n=u.outEdges(t).reduce((function(e,t){return Math.min(e,c[t.w]-u.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(c[t]=Math.max(c[t],n))}),u.successors.bind(u)),r.forEach(a,(function(e){c[e]=c[n[e]]})),c}function d(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var a=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+a,n),o=Math.min(t-a,o)})),n-o}))}function p(e,t){var n=r.values(t),o=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(i){var c,u=n+i,l=e[u];if(l!==t){var s=r.values(l);(c="l"===i?o-r.min(s):a-r.max(s))&&(e[u]=r.mapValues(l,(function(e){return e+c})))}}))}))}function b(e,t){return r.mapValues(e.ul,(function(n,o){if(t)return e[t.toLowerCase()][o];var a=r.sortBy(r.map(e,o));return(a[1]+a[2])/2}))}e.exports={positionX:function(e){var t,n=a.buildLayerMatrix(e),o=r.merge(i(e,n),c(e,n)),u={};r.forEach(["u","d"],(function(a){t="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var i=("u"===a?e.predecessors:e.successors).bind(e),c=s(e,t,o,i),l=f(e,t,c.root,c.align,"r"===n);"r"===n&&(l=r.mapValues(l,(function(e){return-e}))),u[a+n]=l}))}));var l=d(e,u);return p(u,l),b(u,e.graph().align)},findType1Conflicts:i,findType2Conflicts:c,addConflict:u,hasConflict:l,verticalAlignment:s,horizontalCompaction:f,alignCoordinates:p,findSmallestWidthAlignment:d,balance:b}},function(e,t,n){var r=n(134),o=n(136),a=n(143).Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},function(e,t){e.exports="0.8.5"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(142),a=n(133),i=n(6),c=n(14),u=n.n(c),l=n(1),s=n(5),f=n(26),d=n(7),p=n(8),b=n(144),h=n(153),m=n(53),y=n(11),v=n.n(y);function g(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var j=function(e){e.title,e.edit_link;var t=e.tabs,n=void 0===t?[]:t,o=(e.stepType,O(Object(r.useState)(!0),2)),a=o[0],c=o[1],s=(!Object(i.isEmpty)(n)&&n[0]?n[0]:{}).api,f=void 0===s?"":s,d=O(Object(r.useState)([]),2),p=d[0],b=d[1];Object(r.useEffect)((function(){h()}),[]);var h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({method:"GET",path:"".concat(f)});case 3:"status"in(t=e.sent)&&t.status&&"data"in t&&"rules"in t.data&&b(t.data.rules),c(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){g(a,r,o,i,c,"next",e)}function c(e){g(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(m.a,{size:"xxl"}):Object(r.createElement)("div",{className:u()("bwf-rules-content-wrap")},Object(r.createElement)("div",{className:"bwf-rules"},Object(i.isEmpty)(p)?Object(l.__)("Rules not found"):p.map((function(e,t){var n=e.map((function(e,t){return Object(r.createElement)(r.Fragment,null,0!==t&&Object(r.createElement)("div",{className:"bwf-rule-divider"},Object(r.createElement)("span",{className:"bwf-divider"},"AND")),Object(r.createElement)("div",{className:"bwf-rule-content",dangerouslySetInnerHTML:{__html:e}}))}));return 0!==t?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-rule-divider divider-line"},Object(r.createElement)("span",{className:"bwf-divider"},"OR")),n):n})))))},E=n(141),_=n(40),S=n.n(_),x=n(237),k=(n(566),n(10)),C=(n(238),n(12)),N=n(183);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var A=function(e){var t=e.api,n=e.hideFilter,o=R(Object(r.useState)(!1),2),a=o[0],c=o[1],u=R(Object(r.useState)(!1),2),s=u[0],f=u[1],p=R(Object(r.useState)([]),2),b=p[0],h=p[1],y=R(Object(r.useState)("day"),2),g=y[0],O=y[1],w=R(Object(r.useState)("bar"),2),j=w[0],_=w[1],P=R(Object(r.useState)(),2),D=P[0],I=P[1],A=Object(k.i)(),F=R(Object(r.useState)(A),2),B=F[0],L=F[1],z=Object(d.i)(),q=D||{},Y=q.after,U=q.before;Object(r.useEffect)((function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.compare="previous_year";var t=Object(E.d)(e),n=t.primary,r="",o="";n&&(Object(i.isEmpty)(n.after)||(r=n.after.format("YYYY-MM-DD HH:mm:ss")),Object(i.isEmpty)(n.before)||(o=n.before.format("YYYY-MM-DD 23:59:59")),Object(i.isEmpty)(r)||Object(i.isEmpty)(o)||V(r,o))}(D,g)}),[g,Y,U]);var V=function(){var e,n=(e=regeneratorRuntime.mark((function e(n,r){var o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c(!0),f(!1),e.prev=2,o=Object(C.stringify)(T(T({},D),{},{after:n,before:r,interval:g})),L(T(T({},D),{},{after:n,before:r,interval:g})),e.next=7,v()({method:"GET",path:"".concat(t,"&").concat(o)});case 7:"status"in(a=e.sent)&&a.status&&"data"in a&&!Object(i.isEmpty)(a.data)?h(a.data):f(!0),c(!1),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(2),console.log(e.t0),f(!0),c(!1);case 17:case"end":return e.stop()}}),e,null,[[2,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){M(a,r,o,i,c,"next",e)}function c(e){M(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e,t){return n.apply(this,arguments)}}(),H=Object(E.c)(B).filter((function(e){return"hour"!==e}));return Object(r.createElement)("div",null,a?Object(r.createElement)(m.a,{size:"xxl"}):function(){var e=b.intervals,t=void 0===e?[]:e,o=b.totals,a=void 0===o?{}:o,c=[];if(Object(i.isEmpty)(t)||t.forEach((function(e,t){c[t]=T(T({},e.subtotals),{},{date:e.start_date})})),s)return Object(r.createElement)(r.Fragment,null,Object(l.__)("Error while fetching the Analytics.","funnel-builder"));var u=function(e){var t=T(T({},A),e);delete t.compare,t.after&&(t.after=S()(Object(E.a)(S()(t.after),"start")).format("YYYY-MM-DD HH:mm:ss")),t.before&&(S()(S()().format("YYYY-MM-DD")).isSame(t.before)?t.before=S()(Object(E.a)(S()(t.before),"now")).format("YYYY-MM-DD HH:mm:ss"):t.before=S()(Object(E.a)(S()(t.before),"end")).format("YYYY-MM-DD HH:mm:ss")),I(t)},f=function(e){var t={period:"custom",before:S()().format("YYYY-MM-DD HH:mm:ss"),after:S()().format("YYYY-MM-01 00:00:00"),compare:"previous_year"},n=Object(E.f)(D||t),r=n.period,o=n.compare,a=n.before,i=n.after,c=Object(E.d)(D||t),u=c.primary,s=c.secondary;return{period:r,compare:o,before:a,after:i,primaryDate:T(T({},u),{},{label:Object(l.__)("Date Range","funnel-builder")}),secondaryDate:T(T({},s),{},{label:Object(l.__)("Date Range","funnel-builder")})}};return Object(r.createElement)("div",{className:"bwf-a-v2-analytics-wrap"},Object(r.createElement)("div",{className:"bwf-a-v2-header"},Object(l.__)("Statistics","funnel-builder")),Object(r.createElement)("div",{className:"bwf-a-v2-analytics-tile-wrap"},function(){var e=[];for(var t in a)e.push(Object(r.createElement)("div",{className:"bwf-a-v2-analytics-tile",key:t},Object(r.createElement)("div",{className:"bwf-a-v2-analytics-tile-data"},"revenue"===t||"bump_revenue"===t?z.formatAmount(a[t].value):"conversion-rate"===t?"".concat(a[t].value,"%"):"".concat(a[t].value)),Object(r.createElement)("div",{className:"bwf-a-v2-analytics-tile-label"},a[t].label)));return e}()),Object(r.createElement)(x.a,{customHeaderItem:n?"":Object(r.createElement)("div",{className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},Object(r.createElement)(N.a,{key:JSON.stringify(A),onRangeSelect:u,dateQuery:f(),isoDateFormat:E.h,hideCompare:!0,disablePresets:!0}))),allowedIntervals:H,isRequesting:!1,data:c,title:"",interval:g,layout:"item-comparison",chartType:j,hideTypeSelect:!1,legendPosition:"bottom",interactiveLegend:!0,updateQuery:!1,onIntervalChange:O,onChartChange:_,className:"bwf-custom-chart bwf-canvas-analytics"}))}())},F=n(179);n(567);function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return L(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){e.search;var t=e.setSearch,n=B(Object(r.useState)(""),2),o=n[0],a=n[1],c=Object(r.useCallback)(Object(i.debounce)((function(e){return t(e)}),500),[]);return Object(r.createElement)("div",{className:"bwf-contact-search-wrap"},Object(r.createElement)("span",{className:"bwf-search-icon"},Object(r.createElement)(p.a,{icon:"search",size:18})),Object(r.createElement)(s.TextControl,{value:o,onChange:function(e){a(e),c(e)},autoComplete:"off",placeholder:Object(l.__)("Search by name","funnel-builder")}))},q=n(181);function Y(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.api,n=U(Object(r.useState)(!0),2),o=n[0],a=n[1],c=U(Object(r.useState)([]),2),s=c[0],f=c[1],d=U(Object(r.useState)(!1),2),b=(d[0],d[1]),h=U(Object(r.useState)(10),2),y=h[0],g=h[1],O=U(Object(r.useState)(0),2),w=O[0],j=O[1],E=U(Object(r.useState)(0),2),_=E[0],S=E[1],x=U(Object(r.useState)(""),2),k=x[0],N=x[1];Object(r.useEffect)((function(){D()}),[k,y,w]);var P,T,D=function(){var e,n=(e=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,n=Object(C.stringify)({limit:y,offset:w,s:k}),e.next=5,v()({path:t+(t.includes("?")?"&":"?")+n,method:"GET"}).then((function(e){e.hasOwnProperty("status")&&e.status?(!Object(i.isEmpty)(e.data)&&e.data.hasOwnProperty("contacts")&&f(e.data.contacts),!Object(i.isEmpty)(e.data)&&e.data.hasOwnProperty("total")&&S(e.data.total)):b(!0),a(!1)}));case 5:e.next=11;break;case 7:e.prev=7,e.t0=e.catch(1),b(!0),a(!1);case 11:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Y(a,r,o,i,c,"next",e)}function c(e){Y(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),M=u()("bwfcrm-contacts-list",{"has-search":!0}),R=[{key:"name",label:Object(r.createElement)("strong",null,Object(l.__)("Name","funnel-builder")),isLeftAligned:!0,required:!0},{key:"email",label:Object(r.createElement)("strong",null,Object(l.__)("Email","funnel-builder")),isLeftAligned:!0},{key:"contact_no",label:Object(r.createElement)("strong",null,Object(l.__)("Phone","funnel-builder")),isLeftAligned:!0}],I=function(e,t){j((e-1)*y)},A=function(e){return"per_page"!==e?function(){}:B},B=function(e){e!==y&&g(e)},L=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"zero-contact",width:"78",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(l.__)("No Contact","funnel-builder")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(l.__)("Contacts will show up when they convert through this step","funnel-builder")}}];return Object(r.createElement)("div",null,(T=parseInt(w)/parseInt(y)+1,Object(r.createElement)(r.Fragment,null,!Object(i.isEmpty)(s)&&Object(r.createElement)(z,{search:k,setSearch:N}),o?Object(r.createElement)(m.a,{size:"xxl"}):Object(i.isEmpty)(s)?Object(r.createElement)(q.a,{data:L,className:"bwf-canvas-zeo-states"}):Object(r.createElement)(F.a,{className:M,title:"",rows:(P=[],Object(i.isEmpty)(s)||s.map((function(e){P.push([{display:e.hasOwnProperty("name")&&""!==e.name?e.name:"-",value:""},{display:e.hasOwnProperty("email")&&""!==e.email?e.email:"-",value:""},{display:e.hasOwnProperty("contact_no")&&""!==e.contact_no?e.contact_no:"-",value:""}])})),P),headers:R,query:{paged:T},rowsPerPage:y,totalRows:_,isLoading:o,onPageChange:I,onQueryChange:A,showMenu:!1,actions:[],emptyMessage:Object(l.__)("No contacts found","funnel-builder")}))))};n(568);function X(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.api,n=K(Object(r.useState)(!1),2),o=n[0],a=n[1],c=K(Object(r.useState)([]),2),u=c[0],s=c[1],f=K(Object(r.useState)(!1),2),b=f[0],h=f[1],y=Object(d.i)();Object(r.useEffect)((function(){g()}),[]);var g=function(){var e,n=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(!0),e.prev=1,e.next=4,v()({method:"GET",path:t}).then((function(e){e.hasOwnProperty("status")&&e.status?e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)&&s(e.data):h(!0)}));case 4:a(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){X(a,r,o,i,c,"next",e)}function c(e){X(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),O=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"zero-order-bump",width:"78",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(l.__)("No Order Bump","funnel-builder")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(l.__)("Order Bumps analytics will show up once there is order bump added to checkout","funnel-builder")}}];return Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)(m.a,{size:"xxl"}):b?Object(r.createElement)(r.Fragment,null,Object(l.__)("Error while fetching the Bump data.")):Object(i.isEmpty)(u)?Object(r.createElement)(q.a,{data:O,className:"bwf-canvas-zeo-states"}):Object(r.createElement)("div",{className:"bwf-bump-brick-wrap"},Object.values(u).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-bump-brick",key:t},Object(r.createElement)("div",{className:"bwf-bump-title"},e.title),Object(r.createElement)("div",{className:"bwf-bump-stats-wrap"},!Object(i.isEmpty)(e.stats)&&e.stats.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-bump-stats",key:t},Object(r.createElement)("div",{className:"bwf-bump-stats-value"},4===t?y.formatAmount(e.value):3===t?"".concat(e.value,"%"):"".concat(e.value)),Object(r.createElement)("div",{className:"bwf-bump-stats-label"},e.label))}))))}))))};n(569);function W(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){W(a,r,o,i,c,"next",e)}function c(e){W(a,r,o,i,c,"throw",e)}i(void 0)}))}}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return J(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ee=function(e){var t=e.api,n=Q(Object(r.useState)(!0),2),o=n[0],a=n[1],c=Q(Object(r.useState)([]),2),u=c[0],s=c[1],f=Q(Object(r.useState)(!1),2),d=f[0],b=f[1],h=Q(Object(r.useState)(Object(l.__)("Error while fetching the Experiment.")),2),y=h[0],g=h[1];Object(r.useEffect)((function(){O()}),[]);var O=function(){var e=Z(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({method:"GET",path:t});case 3:"items"in(n=e.sent)&&n.items?s(n.items):b(!0),"message"in n&&g(n.message),"funnel_id"in n&&!1===n.status&&g(""),a(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),b(!0),console.log(e.t0),a(!1);case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),w=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"zero-experiment",width:"78",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(l.__)("No A/B Test","funnel-builder")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(l.__)("Analytics for A/B Experiment will show once there is an experiment on this step","funnel-builder")}}];return Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)(m.a,{size:"xxl"}):d?y?Object(r.createElement)(r.Fragment,null,y):Object(r.createElement)(q.a,{data:w,className:"bwf-canvas-zeo-states"}):Object(r.createElement)("div",{className:"bwf-step-panel-wrapper"},!Object(i.isEmpty)(u)&&u.map((function(e,t){return Object(r.createElement)(te,{key:"experiment-".concat(t),item:e,experiment_id:e.id,experimentIndex:t})}))))},te=function(e){var t=e.item,n=void 0===t?[]:t,o=e.experimentIndex,a=void 0===o?0:o,c=e.experimentFlag,s=void 0===c||c,f=e.experiment_id,d=Q(Object(r.useState)(0===a),2),b=d[0],h=d[1],m=n.title,y=n.date_added,g=n.date_started,O=n.date_completed,w=n.variants,j=n.status,E=j?j.toLocaleLowerCase():"",_=Q(Object(r.useState)(!0),2),S=_[0],x=_[1],k=Q(Object(r.useState)(!1),2),C=k[0],N=k[1],P=Q(Object(r.useState)({}),2),T=P[0],D=P[1];Object(r.useEffect)((function(){var e=new AbortController;return S&&b&&E&&"draft"!==E&&(M(e),x(!1)),function(){null==e||e.abort()}}),[b]);var M=function(){var e=Z(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,N(!0),e.next=4,v()({path:"/woofunnels-analytics/experiment/".concat(f,"/variants/"),method:"GET",signal:t.signal});case 4:n=e.sent,N(!1),Object(i.isEmpty)(n)||D(n),t=null,e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("Failed Analytics Call: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.createElement)("div",{className:u()("bwf-exp-step",{"is-opened":b})},Object(r.createElement)("div",{className:"bwf-exp-head"},Object(r.createElement)("div",{className:"bwf-head-left bwf-flex bwf--g16"},Object(r.createElement)("div",{className:"bwf-exp-title-wrap"},Object(r.createElement)(p.a,{icon:"experiment",size:20}),Object(r.createElement)("div",{className:"bwf-exp-title"},m)),"draft"===E&&Object(r.createElement)("div",{className:"bwf-exp-date"},Object(l.__)("Created on","funnel-builder")," ",y),("paused"===E||"started"===E)&&Object(r.createElement)("div",{className:"bwf-exp-date"},Object(l.__)("Started on","funnel-builder")," ",g),"completed"===E&&Object(r.createElement)("div",{className:"bwf-exp-date"},Object(l.__)("Completed on","funnel-builder")," ",O),function(){var e="";switch(E){case"started":e=Object(l.__)("Running");break;case"paused":e=Object(l.__)("Paused")}return!Object(i.isEmpty)(e)&&s?Object(r.createElement)("div",{className:"bwf-exp-flag","data-status":E},e):null}()),Object(r.createElement)("div",{className:"bwf-head-right bwf-flex bwf--g24"},Object(r.createElement)("span",{className:"bwf-cursor-pointer bwf-flex",onClick:function(){return h(!b)}},Object(r.createElement)(p.a,{icon:b?"tailless-arrow-up-1":"tailless-arrow-down-1",width:"14",height:"10"})))),Object(r.createElement)("div",{className:"bwf-exp-body",style:b?null:{display:"none"}},Array.isArray(w)&&!Object(i.isEmpty)(w)&&w.map((function(e,t){return Object(r.createElement)(ne,{key:"variant-".concat(t),variantIndex:t,variant:e,statsData:Object(i.isEmpty)(T)?{}:T[e.id],exp_status:E,isStatsLoading:C})}))))},ne=function(e){e.variantIndex;var t=e.variant,n=e.statsData,o=e.exp_status,a=e.isStatsLoading,c=t.control,s=t.active,f=void 0===s?"":s,b=t.winner,h=t.traffic,y=t.title,v=t.views,g=void 0===v?n.views:v,O=t.conversions,w=void 0===O?n.conversions:O,j=t.revenue_per_visit,E=void 0===j?n.revenue_per_visit:j,_=t.conversion_rate,S=void 0===_?n.conversion_rate:_,x=t.revenue,k=void 0===x?n.revenue:x,C=t.offers,N=void 0===C?n.offers:C,P=Q(Object(r.useState)(!1),2),T=P[0],D=P[1],M=!Object(i.isEmpty)(N)&&Array.isArray(N)?N:[],R=Object(d.i)();return Object(r.createElement)("div",{className:u()("bwf-exp-variant-wrap",{"has-draft":!f&&"completed"!==o,"has-stats":void 0!==g})},Object(r.createElement)("div",{className:"bwf-exp-variant"},Object(r.createElement)("div",{className:u()("bwf-variant-data",{"bwf-cursor-pointer":!Object(i.isEmpty)(N)}),onClick:function(){Object(i.isEmpty)(N)||D(!T)}},Object(r.createElement)("span",{className:"bwf-variant-title"},Object(r.createElement)(p.a,{icon:"page",size:20}),y),Object(r.createElement)("span",{className:u()("bwf-variant-tag"),"data-tag":c?"original":null},Object(r.createElement)(r.Fragment,null," ",c?"Original":"Variant"," ")),!f&&"completed"!==o&&Object(r.createElement)("span",{className:u()("bwf-variant-tag"),"data-tag":"draft"},Object(l.__)("Draft","funnel-builder")),b&&Object(r.createElement)("span",{className:"bwf-variant-winner bwf-flex"},Object(r.createElement)(p.a,{icon:"winner",size:"24"})),!Object(i.isEmpty)(N)&&Object(r.createElement)("span",{className:"bwf-cursor-pointer"},Object(r.createElement)(p.a,{icon:T?"tailless-arrow-up-1":"tailless-arrow-down-1",width:"14",height:"8"}))),Object(r.createElement)("div",{className:"bwf-variant-analytics"},Object(r.createElement)("div",{className:u()("bwf-variant-stats-wrap",{"has-stats":!Object(i.isEmpty)(n)})},a?Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)(m.a,null),"  "," ",Object(l.__)("Loading Analytics...","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,Math.trunc(h),"%"),Object(r.createElement)("span",null,Object(l.__)("Weight","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,void 0!==g?g:"- -"),Object(r.createElement)("span",null,Object(l.__)("Views","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,void 0!==w?w:"- -"),Object(r.createElement)("span",null,Object(l.__)("Conversions","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,void 0!==E?R.formatAmount(E):"- -"),Object(r.createElement)("span",null,Object(l.__)("Revenue Per Visit","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,void 0!==S?"".concat(S.toFixed(2),"%"):"- -"),Object(r.createElement)("span",null,Object(l.__)("Conversion Rate","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,void 0!==k?R.formatAmount(k):"- -"),Object(r.createElement)("span",null,Object(l.__)("Revenue","funnel-builder")))))),!Object(i.isEmpty)(N)&&T&&Object(r.createElement)("div",{className:"bwf-upsell-variants"},Object(r.createElement)("div",{className:"bwf-exp-variant"},Object(r.createElement)("div",{className:"bwf-variant-data"},Object(r.createElement)("span",{className:"bwf-variant-title"},Object(l.__)("Offers","funnel-builder")))),!Object(i.isEmpty)(M)&&M.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-exp-variant",key:t},Object(r.createElement)("div",{className:"bwf-variant-data"},Object(r.createElement)("span",{className:"bwf-variant-title",style:{padding:0}},e.object_name)),Object(r.createElement)("div",{className:"bwf-variant-analytics"},Object(r.createElement)("div",{className:"bwf-variant-stats-wrap hide-stats-label"},Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("span",null,"-"),Object(r.createElement)("span",null,Object(l.__)("Weight","funnel-builder"))),null!=e.views&&Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,e.views),Object(r.createElement)("span",null,Object(l.__)("Views","funnel-builder"))),null!=e.conversions&&Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,e.conversions),Object(r.createElement)("span",null,Object(l.__)("Conversions","funnel-builder"))),null!=e.revenue_per_visit&&Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,R.formatAmount(e.revenue_per_visit)),Object(r.createElement)("span",null,Object(l.__)("Revenue Per Visit"))),null!=e.conversion_rate&&Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,e.conversion_rate.toFixed(2),"%"),Object(r.createElement)("span",null,Object(l.__)("Conversion Rate"))),null!=e.revenue&&Object(r.createElement)("div",{className:"bwf-analytics-stats"},Object(r.createElement)("strong",null,R.formatAmount(e.revenue)),Object(r.createElement)("span",null,Object(l.__)("Revenue","funnel-builder"))))))})))))},re=function(e){var t=e.type,n=void 0===t?"analytics":t,o=e.stepType,a={experiment:Object(l.__)("A/B Tests"),"order-bump":Object(l.__)("Order Bump"),contacts:Object(l.__)("Contacts"),analytics:Object(l.__)("Analytics"),rules:Object(l.__)("Rules"),"lite-user":Object(l.__)("A/B Experiments")},i=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"lock",width:"90",height:"90",color:"#353030"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:"".concat(a[n]," ").concat(Object(l.__)("is a Pro feature"))}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(r.createElement)(r.Fragment,null,Object(l.__)("We're sorry, the ","funnel-builder")+a[n]+Object(l.__)(" is not available on your plan.","funnel-builder"),Object(r.createElement)("br",null),Object(l.__)("Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"))}},{type:"buttons",data:{buttons:[{text:Object(l.__)("Upgrade to PRO Now","funnel-builder"),proCheck:!1,className:"upgrade-btn",onClick:function(){window.open(Object(d.p)(["Canvas",o,n]))}}]}}];return Object(r.createElement)("div",null,Object(r.createElement)(q.a,{data:i,className:"bwf-canvas-zeo-states"}))};var oe=function(e){var t=e.tabs,n=void 0===t?[]:t,o=e.stepType,a=e.hideFilter;return Object(r.createElement)(r.Fragment,null,Object(i.isEmpty)(n)?Object(l.__)("No Tabs Found"):Object(r.createElement)(s.TabPanel,{className:"bwf-tabs",activeClass:"active-tab",tabs:n},(function(e){return Object(r.createElement)(r.Fragment,null,function(e){if(Object(i.isEmpty)(e.api))return Object(r.createElement)(re,{type:e.name,stepType:o});switch(e.name){case"analytics":return Object(r.createElement)(A,{api:e.api,type:o,hideFilter:a});case"contacts":return Object(r.createElement)(H,{api:e.api,type:o});case"order-bump":return Object(r.createElement)($,{api:e.api,type:o});case"experiment":return Object(r.createElement)(ee,{api:e.api,type:o});default:return Object(r.createElement)(A,{api:e.api,type:o})}}(e))})))};function ae(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=function(e){var t=e.tabs,n=ie(Object(r.useState)(!1),2),o=n[0],a=n[1],c=ie(Object(r.useState)([]),2),u=c[0],s=c[1],f=ie(Object(r.useState)(!1),2),d=f[0],p=(f[1],(!Object(i.isEmpty)(t)&&t[0]?t[0]:{}).api),b=void 0===p?"":p;Object(r.useEffect)((function(){h()}),[]);var h=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v()({method:"GET",path:b});case 3:"status"in(t=e.sent)&&t.status&&t.items&&s(t.items),a(!1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ae(a,r,o,i,c,"next",e)}function c(e){ae(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,o?Object(r.createElement)(m.a,{size:"xxl"}):d?Object(r.createElement)(r.Fragment,null,Object(l.__)("Error while fetching the Experiment.","funnel-builder")):Object(r.createElement)("div",{className:"bwf-step-panel-wrapper"},!Object(i.isEmpty)(u)&&u.map((function(e,t){return Object(r.createElement)(te,{key:"experiment-".concat(t),item:e,experiment_id:e.id,experimentIndex:t})}))))},le=(n(570),n(60)),se=function(e){var t=e.isOpen,n=e.onRequestClose,o=e.title,a=e.edit_link,c=void 0===a?"":a,m=e.view_link,y=void 0===m?"":m,v=e.node_type,g=void 0===v?"":v,O=e.tabs,w=void 0===O?[]:O,E=e.exp_status,_=void 0===E?"":E,S=e.stepType,x=e.hideFilter,k=e.className,C=void 0===k?"":k;return t?Object(r.createElement)(s.Modal,{className:u()("bwf-admin-modal bwf-admin-modal-large bwf-canvas-modal",C),onRequestClose:n,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-canvas-modal-wrap"},Object(r.createElement)("div",{className:"bwf-canvas-modal-header"},Object(r.createElement)("div",{className:"bwf-canvas-modal-title"},Object(f.decodeEntities)(o)," ","experiment"===g&&_&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":_.toLowerCase()},_)),Object(r.createElement)("div",{className:"bwf-canvas-header-action"},c&&Object(r.createElement)(b.a,{label:Object(l.__)("Menu","funnel-builder"),renderContent:function(e){var t=e.onToggle;e.onClose;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){t(),window.open(Object(f.decodeEntities)(c),"_self")}},Object(r.createElement)(le.a,{justify:"flex-start"},Object(r.createElement)(le.c,null,Object(r.createElement)(p.a,{icon:"edit",width:"16",height:"16"})),Object(r.createElement)(le.c,null,Object(l.__)("Edit","funnel-builder")))),y&&Object(r.createElement)(h.a,{isClickable:!0,onInvoke:function(){t(),window.open(Object(f.decodeEntities)(y))}},Object(r.createElement)(le.a,{justify:"flex-start"},Object(r.createElement)(le.c,null,Object(r.createElement)(p.a,{icon:"view",width:"18"})),Object(r.createElement)(le.c,null,Object(l.__)("View","funnel-builder")))))}}),Object(r.createElement)("div",{className:"bwf-modal-close",onClick:n},Object(r.createElement)(p.a,{icon:"close",size:16})))),Object(r.createElement)("div",{className:u()("bwf-canvas-content",{"bwf-smoothy-scroll":"steps"!==g,"bwf-lock-experiment":!Object(d.x)()})},function(){switch(g){case"rules":return w[0]&&!Object(i.isEmpty)(w[0].api)?Object(r.createElement)(j,{tabs:w,stepType:S}):Object(r.createElement)(re,{type:"rules"});case"steps":return Object(r.createElement)(oe,{tabs:w,stepType:S,hideFilter:x});case"experiment":return Object(r.createElement)(ue,{tabs:w,stepType:S});case"lite-user":return Object(r.createElement)(re,{type:"lite-user",stepType:S});default:return"Modal type is not set"}}()))):null};function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pe=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.selected,n.title),c=n.sub_title,s=n.stats,b=n.type,h=n.tabs,m=void 0===h?[]:h,y=n.control,v=void 0===y?null:y,g=n.edit_link,O=n.view_link,w=fe(Object(r.useState)(!1),2),j=w[0],E=w[1],_=Object(d.i)();return Object(r.createElement)("div",{className:u()("bwf-node-wrapper",{"bwf-node-type-upsell":"upsells"===b})},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-inner-wrapper",onClick:function(){"upsells"!==b&&E(!0)}},Object(r.createElement)("div",{className:"bwf-node-brick is-start-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(p.a,{size:36,icon:b?"".concat(b,"-flow"):"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(f.decodeEntities)(c)),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(f.decodeEntities)(a))),Object(r.createElement)("div",{className:"bwf-node-action"},null!==v&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":!0===v?"original":""},!0===v?Object(l.__)("Original"):Object(l.__)("Variant")))),!Object(i.isEmpty)(s)&&"upsells"!==b&&Object(r.createElement)("div",{className:"bwf-node-status"},s.hasOwnProperty("views")&&null!=s.views&&Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},"Views"),Object(r.createElement)("span",{className:"bwf-node-status-count"},s.views)),s.hasOwnProperty("conversion_rate")&&null!=s.conversion_rate&&Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},"Conversion"),Object(r.createElement)("span",{className:"bwf-node-status-count"},"".concat(s.conversion_rate.toFixed(2),"%"))),s.hasOwnProperty("revenue")&&null!=s.revenue&&Object(r.createElement)("div",{className:"bwf-status-wrap"},Object(r.createElement)("span",{className:"bwf-node-status-label"},"Revenue"),Object(r.createElement)("span",{className:"bwf-node-status-count"},_.formatAmount(s.revenue))))),Object(r.createElement)(o.d,{type:"source",position:"bottom",isConnectable:!1}),"upsells"!==b&&Object(r.createElement)(se,{title:Object(l.__)("Overview For ")+a,isOpen:j,edit_link:g,view_link:O,hideFilter:null!==v,stepType:b,node_type:"experiment"===b?"experiment":"steps",onRequestClose:function(){return E(!1)},tabs:m}))},be=function(e){e.data,e.selected;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-end"},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},"End")))},he=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.selected,n.title),i=(n.sub_title,n.type);return Object(r.createElement)("div",{className:u()("bwf-node-wrapper bwf-condition",["bwf-condition-".concat(i)])},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:u()("bwf-node-content")},Object(f.decodeEntities)(a)),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ve=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.selected,n.title),i=n.sub_title,c=n.type,u=n.tabs,l=me(Object(r.useState)(!1),2),s=l[0],d=l[1];return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-rule"},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content",onClick:function(){return d(!0)}},Object(f.decodeEntities)(i)),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),Object(r.createElement)(se,{title:a,isOpen:s,tabs:u,stepType:c,onRequestClose:function(){return d(!1)},node_type:"rules"}))},ge=n(364),Oe=n.n(ge),we=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!e||!e.type)return 95+t;var n=0;switch(e.type){case"step":n=135,e.hasOwnProperty("data")&&e.data.hasOwnProperty("title")&&e.data.title.length>40&&(n+=18),e.hasOwnProperty("data")&&e.data.hasOwnProperty("type")&&"upsells"===e.data.type&&(n=95,e.data.hasOwnProperty("title")&&e.data.title.length>18&&(n+=18));break;case"end":n=26;break;case"rule":n=110;break;case"condition":n=95;break;case"conditional-alter":var r=Object(i.flatten)(e.data.sidebarValues).length,o=r-1;n=r?32*r+29*o+100:150;break;default:n=95}return n+t},je=function(e){if(!e||!e.type)return 325;switch(e.type){case"rule":return 75;case"step":return e.hasOwnProperty("data")&&e.data.hasOwnProperty("type")&&"upsells"===e.data.type?220:325;default:return 325}},Ee=function(e){var t=new Oe.a.graphlib.Graph;return t.setDefaultEdgeLabel((function(){return{}})),t.setGraph({rankdir:"TB",ranksep:37,nodesep:100}),e.forEach((function(e){Object(o.j)(e)?t.setNode(e.id,{width:325,height:we(e,0)}):t.setEdge(e.source,e.target)})),Oe.a.layout(t),e.map((function(e){if(Object(o.j)(e)){var n=t.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=we(e,"condition"===e.type?50:100);e.position={x:n.x-je(e)/2+Math.random()/1e3,y:n.y-r/2}}return e}))};n(2);function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e){var t=e.id,n=e.sourceX,a=e.sourceY,i=e.targetX,c=e.targetY,u=e.sourcePosition,l=e.targetPosition,s=e.style,f=void 0===s?{}:s,d=(e.data,e.arrowHeadType),b=e.markerEndId,h=e.source,m=(e.sourceHandleId,Object(o.g)({sourceX:n,sourceY:a,sourcePosition:u,targetX:i,targetY:c,targetPosition:l})),y=Object(o.i)(d,b),v=_e(Object(o.h)({sourceX:n,sourceY:a,targetX:i,targetY:c}),2),g=v[0],O=v[1],w=getDispatchers(),j=(w.setNodeForAdd,w.copyNodeHere,getSelectors()),E=j.getEnableCopy,_=j.getEnableMove,S=j.getNodeDataByID;E(),_(),S(h);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:f,className:"react-flow__edge-path",d:m,markerEnd:y}),Object(r.createElement)("foreignObject",{width:23,height:23,x:g-11.5,y:O-11.5,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("body",null,Object(r.createElement)("div",{className:"bwf-node-add"},Object(r.createElement)(p.a,{icon:"plus",size:28,color:"#fff"})))))},ke=(n(571),n(20)),Ce=["getStateProp"];function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){Te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function De(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Me=function(){var e=Object(ke.a)("funnelFlow"),t=e.getStateProp;return Pe(Pe({},De(e,Ce)),{},{nodeElements:t("nodes"),isLoading:t("isLoading")})};function Re(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||Ae(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){var t=e.fullScreen,n=e.setCanvasFullScreen,a=e.showExperiment,c=Object(o.m)().setCenter,u=Object(o.k)(),l=Me(),s=l.isLoading,f=l.nodeElements,d=Ie(Object(r.useState)([]),2),p=d[0],b=d[1],h=Ie(Object(r.useState)(!1),2),m=h[0],y=h[1],v=Object(r.useRef)(),g=Object(o.l)((function(e){return e.setSelectedElements})),O={"bwf-default":xe},w={step:pe,end:be,condition:he,rule:ve};return Object(r.useEffect)((function(){Object(i.isNull)(document.querySelector("#bwf-funnel-canvas-wrap"))||(v.current=document.querySelector("#bwf-funnel-canvas-wrap").getBoundingClientRect())})),Object(r.useEffect)((function(){if(!m){var e=0,t=0,n=u.getState().nodes;if(n.length&&v.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.4*parseFloat(v.current.height),y(!0),c(e,t,1)}}}),[p,m]),Object(r.useEffect)((function(){y(!1),f.length>1?b(Ee(Re(f))):b(f)}),[f,s,t,a]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.f,{defaultZoom:.7,minZoom:.5,maxZoom:4,nodeTypes:w,nodesConnectable:!1,nodesDraggable:!1,elements:p,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,edgeTypes:O},Object(r.createElement)(o.c,{showInteractive:!1},Object(r.createElement)(o.b,{onClick:function(){n(!t),document.body.style.overflow=t?"":"hidden",g([])}},t?Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},class:"dashicons dashicons-fullscreen-exit-alt"}):Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-alt"}))),Object(r.createElement)(o.a,null)))},Le=function(){var e=[{type:"icon",data:{class:"bwf-pb-gap",content:Object(r.createElement)(p.a,{icon:"flow",width:"90",height:"90"})}},{type:"content",data:{class:"bwf-h2 bwf-pb-10",content:Object(l.__)("No Steps in this Funnel","funnel-builder")}},{type:"content",data:{class:"bwf-h4-1 bwf-pb-gap",content:Object(l.__)("Go to Step and start adding steps to visualize the funnel in Canvas mode.","funnel-builder")}}];return Object(r.createElement)("div",{className:"bwf-canvas-no-steps"},Object(r.createElement)(q.a,{data:e}))},ze=n(22),qe=["fetch","setStateProp"];function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Xe=function(){var e=Object(ze.a)("funnelFlow"),t=e.fetch;e.setStateProp;return Ue(Ue({},He(e,qe)),{},{fetchNodes:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t("GET",Object(d.g)("woofunnels-admin/canvas/".concat(e,"/nodes?experiment=").concat(n)))}})},Ke=n(239);function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(a.d)().id,n=e.funnelId,c=void 0===n?t:n,f=e.funnelTitle,p=Me(),b=p.isLoading,h=p.nodeElements,y=void 0===h?[]:h,v=Xe().fetchNodes,g=Ge(Object(r.useState)(!1),2),O=g[0],w=g[1],j=Ge(Object(r.useState)(!1),2),E=j[0],_=j[1],S=Ge(Object(r.useState)(!1),2),x=S[0],k=S[1];Object(d.b)(Object(l.__)("Funnel Canvas #","funnel-builder")+c),Object(r.useEffect)((function(){return v(c,O),function(){document.body.style.overflow=""}}),[O]);return Object(r.createElement)("div",{id:"bwf-funnel-canvas-wrap",className:u()({"full-screen":x})},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:"<style>body{overflow-y: hidden !important;}</style>"}}),Object(r.createElement)("div",{className:"bwf-flow-header-wrap"},Object(r.createElement)("div",{className:"bwf-funnel-flow-header"},Object(r.createElement)("div",{className:"bwf-canvas-funnel-title"},f),!Object(i.isEmpty)(y)&&Object(r.createElement)(s.ToggleControl,{label:Object(l.__)("A/B Test"),checked:!!Object(d.x)()&&O,onChange:function(e){Object(d.x)()?w(e):_(!0)},className:"bwf-tooglecontrol-advance"}))),!b&&Object(i.isEmpty)(y)&&Object(r.createElement)(Le,null),b&&!Object(i.isEmpty)(y)&&Object(r.createElement)(m.a,{size:"xxl",style:{margin:"100px auto"}}),!b&&!Object(i.isEmpty)(y)&&Object(r.createElement)(o.e,null,Object(r.createElement)(Be,{setCanvasFullScreen:function(){k(!x)},fullScreen:x,showExperiment:O})),!Object(d.x)()&&Object(r.createElement)(Ke.a,{isOpen:E,onRequestClose:function(){return _(!1)},modalContent:{title:Object(l.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(l.__)("Increased Conversion Rates","funnel-builder"),Object(l.__)("Greater Return on Ad Spend","funnel-builder"),Object(l.__)("Reduced Bounce Rates","funnel-builder")],desc:Object(l.__)("Test different variants of your landing pages, order bumps, and one-click upsells. Discover the winners and uncover profits.","funnel-builder")},proLink:Object(d.p)(["Canvas","Experiment"])}}))}}])]);