(window.webpackJsonp=window.webpackJsonp||[]).push([[32,5],{138:function(e,t,r){"use strict";r.d(t,"a",(function(){return u})),r.d(t,"b",(function(){return s}));var n=r(0),a=r(9),o=r.n(a),i=["component","children"];function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=Object(n.createContext)(2);function u(e){return Object(n.createElement)(l.Consumer,null,(function(t){var r="h"+Math.min(t,6);return Object(n.createElement)(r,e)}))}function s(e){var t=e.component,r=e.children,a=c(e,i),o=t||"div";return Object(n.createElement)(l.Consumer,null,(function(e){return Object(n.createElement)(l.Provider,{value:e+1},!1===t?r:Object(n.createElement)(o,a,r))}))}s.propTypes={component:o.a.oneOfType([o.a.func,o.a.string,o.a.bool]),children:o.a.node}},146:function(e,t,r){"use strict";var n=r(0),a=r(6),o=r(9),i=r.n(o),c=r(14),l=r.n(c),u=(r(166),r(159)),s=r(1);function f(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function b(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var a=O(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return v(this,r)}}function v(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t,r,a,o=h(i);function i(e){var t,r,n,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),r=g(t),a=!0,(n="mounted")in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,t.state={options:[]},t.appendFreeTextSearch=t.appendFreeTextSearch.bind(g(t)),t.fetchOptions=t.fetchOptions.bind(g(t)),t.updateSelected=t.updateSelected.bind(g(t)),t}return t=i,(r=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===d(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var r=this.getAutocompleter(),n=[];return e.forEach((function(e){var a={key:r.getOptionIdentifier(e),label:r.getOptionLabel(e,t),keywords:r.getOptionKeywords(e).filter(Boolean),value:e};n.push(a)})),n}},{key:"fetchOptions",value:function(e,t){var r=this;return t?this.getAutocompleter().options(t).then(function(){var e,n=(e=regeneratorRuntime.mark((function e(n){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.mounted){e.next=4;break}return a=r.getFormattedOptions(n,t),r.setState({options:a}),e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){b(o,n,a,i,c,"next",e)}function c(e){b(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(e){return n.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,r=this.getAutocompleter();t(e.map((function(e){return e.value?r.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var r=this.props,n=r.allowFreeTextSearch,a=r.emptySearchText,o=void 0===a?Object(s.__)("Not Found","funnel-builder"):a;if(!t||!t.length)return[];if(!n)return e.length>0?e:[{label:o,key:"",notFound:!0}];if(!n)return e;var i=this.getAutocompleter();return[].concat(f(i.getFreeTextOptions(t,e)),f(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,r=t.className,a=t.inlineTags,o=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,p=(t.multiple,this.state.options),b=e.inputType?e.inputType:"text";return Object(n.createElement)("div",null,Object(n.createElement)(u.a,{className:l()("bwf-search",r,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:a,isSearchable:!0,label:o,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:o,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:p,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:b,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&y(t.prototype,r),a&&y(t,a),i}(n.Component);j.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool},j.defaultProps={allowFreeTextSearch:!1,onChange:a.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1},t.a=j},150:function(e,t,r){},152:function(e,t,r){"use strict";var n=r(0),a=r(14),o=r.n(a),i=r(9),c=r.n(i),l=(r(144),r(138));r(188),r(208);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=y(e);if(t){var a=y(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return d(this,r)}}function d(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,a,i=b(c);function c(){return s(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.action,r=e.children,a=e.description,i=e.isInactive,c=e.menu,u=e.title,s=e.hideHeader,f=o()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(n.createElement)("div",{className:f},s&&"no"==s&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf-card-header"},!!u&&Object(n.createElement)("div",{className:"bwf-card-title-wrapper"},Object(n.createElement)(l.a,{className:"bwf-card-title bwf-card-header-item"},u),a&&Object(n.createElement)(l.a,{className:"bwf-card-description bwf-card-header-item"},a)),t&&Object(n.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(n.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(n.createElement)(l.b,{className:"bwf-card-body"},r))}}])&&f(t.prototype,r),a&&f(t,a),c}(n.Component);m.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])},t.a=m},163:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(14),i=r.n(o),c=r(5),l=r(6),u=r(9),s=r.n(u),f=r(61),p=r(511),b=r(654),d=r(655);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=w(e);if(t){var a=w(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return O(this,r)}}function O(e,t){if(t&&("object"===y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,e);var t,r,o,u=g(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=u.call(this,e)).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},t.container=Object(n.createRef)(),t.sortBy=t.sortBy.bind(j(t)),t.updateTableShadow=t.updateTableShadow.bind(j(t)),t}return t=s,(r=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,r=this.props,n=r.headers,a=r.query;return function(){var r=a.orderby||Object(l.get)(Object(l.find)(n,{defaultSort:!0}),"key",!1),o=a.order||Object(l.get)(Object(l.find)(n,{key:r}),"defaultOrder","desc"),i="desc";e===r&&(i="desc"===o?"asc":"desc"),t.props.onSort(e,i)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,r=t.isScrollableRight,n=t.isScrollableLeft,a=e.scrollWidth-e.scrollLeft<=e.offsetWidth;a&&r?this.setState({isScrollableRight:!1}):a||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var o=e.scrollLeft<=0;o&&n?this.setState({isScrollableLeft:!1}):o||n||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,r=t.ariaHidden,o=t.caption,u=t.classNames,s=t.headers,f=t.instanceId,y=t.query,h=t.rowHeader,v=t.rows,g=t.rowClasses,O=t.emptyMessage,j=this.state,w=j.isScrollableRight,E=j.isScrollableLeft,S=j.tabIndex,_=i()("bwf-table-table",u,{"is-scrollable-right":w,"is-scrollable-left":E}),k=y.orderby||Object(l.get)(Object(l.find)(s,{defaultSort:!0}),"key",!1),P=y.order||Object(l.get)(Object(l.find)(s,{key:k}),"defaultOrder","desc"),C=!!v.length;return Object(n.createElement)("div",{className:_,ref:this.container,tabIndex:S,"aria-hidden":r,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(n.createElement)("table",null,Object(n.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},o,"0"===S&&Object(n.createElement)("small",null,Object(a.__)("(scroll to see more)","funnel-builder"))),Object(n.createElement)("tbody",null,Object(n.createElement)("tr",null,s.map((function(t,r){var o=t.cellClassName,u=t.isSortable,s=t.isNumeric,y=t.key,h=t.label,v=t.screenReaderLabel,g="header-".concat(f,"-").concat(r),O={className:i()("bwf-table-header",o,{"is-sortable":u,"is-sorted":k===y,"is-numeric":s})};u&&(O["aria-sort"]="none",k===y&&(O["aria-sort"]="asc"===P?"ascending":"descending"));var j=k===y&&"asc"!==P?Object(a.sprintf)(Object(a.__)("Sort by %s in ascending order","funnel-builder"),v):Object(a.sprintf)(Object(a.__)("Sort by %s in descending order","funnel-builder"),v),w=Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{"aria-hidden":Boolean(v)},h),v&&Object(n.createElement)("span",{className:"screen-reader-text"},v));return Object(n.createElement)("th",m({role:"columnheader",scope:"col",key:r},O),u?Object(n.createElement)(n.Fragment,null,Object(n.createElement)(c.Button,{"aria-describedby":g,onClick:C?e.sortBy(y):l.noop},w,k===y&&"asc"===P?Object(n.createElement)(p.a,{icon:b.a}):Object(n.createElement)(p.a,{icon:d.a})),Object(n.createElement)("span",{className:"screen-reader-text",id:g},j)):w)}))),C?v.map((function(e,t){return Object(n.createElement)("tr",{key:t,className:g[t]},e.map((function(e,t){var r=s[t],a=r.cellClassName,o=(r.isLeftAligned,r.isNumeric),c=h===t,l=c?"th":"td",u=i()("bwf-table-item",a,{"is-numeric":o,"is-sorted":k===s[t].key});return Object(n.createElement)(l,{scope:c?"row":null,key:t,className:u},function(e){return e.display||null}(e))})))})):Object(n.createElement)("tr",null,Object(n.createElement)("td",{className:"bwf-table-empty-item",colSpan:s.length},O||Object(a.__)("No data to display","funnel-builder"))))))}}])&&h(t.prototype,r),o&&h(t,o),s}(n.Component);E.propTypes={ariaHidden:s.a.bool,className:s.a.string,headers:s.a.arrayOf(s.a.shape({defaultSort:s.a.bool,defaultOrder:s.a.string,isLeftAligned:s.a.bool,isNumeric:s.a.bool,isSortable:s.a.bool,key:s.a.string,label:s.a.node,required:s.a.bool,screenReaderLabel:s.a.string})),onSort:s.a.func,query:s.a.object,rows:s.a.arrayOf(s.a.arrayOf(s.a.shape({display:s.a.node,value:s.a.oneOfType([s.a.string,s.a.number,s.a.bool])}))).isRequired,rowHeader:s.a.oneOfType([s.a.number,s.a.bool]),rowClasses:s.a.arrayOf(s.a.string)},E.defaultProps={ariaHidden:!1,headers:[],onSort:l.noop,query:{},rowHeader:0,rowClasses:[]},t.a=Object(f.withInstanceId)(E)},164:function(e,t,r){"use strict";var n=r(0),a=r(5),o=r(14),i=r.n(o),c=r(6),l=r(9),u=r.n(l),s=r(8),f=(r(150),function(e){var t=e.disabled,r=e.value,o=e.onChange,l=e.dateFormat,u=e.label,f=e.describedBy,p=e.error,b=e.onFocus,d=e.onKeyDown,y=e.errorPosition,m=i()("bwf-calendar-input",{"is-empty":0===r.length,"is-error":p}),h=Object(c.uniqueId)("_woo-dates-input");return Object(n.createElement)("div",{className:m},Object(n.createElement)("input",{type:"text",className:"bwf-calendar-input-text",value:r,onChange:o,"aria-label":u,id:h,"aria-describedby":"".concat(h,"-message"),placeholder:l.toLowerCase(),onFocus:b,onKeyDown:d,disabled:t}),p&&Object(n.createElement)(a.Popover,{className:"bwf-calendar-input-error",focusOnMount:!1,position:y},p),Object(n.createElement)("span",{className:"bwf-calender-custom-icon"},Object(n.createElement)(s.a,{icon:"calender"})),Object(n.createElement)("p",{className:"screen-reader-text",id:"".concat(h,"-message")},p||f))});f.propTypes={disabled:u.a.bool,value:u.a.string,onChange:u.a.func.isRequired,dateFormat:u.a.string.isRequired,label:u.a.string.isRequired,describedBy:u.a.string.isRequired,error:u.a.string,errorPosition:u.a.string,onFocus:u.a.func,onKeyDown:u.a.func},f.defaultProps={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:c.noop},t.a=f},165:function(e,t,r){"use strict";var n=r(0),a=r(5),o=r(26),i=r(9),c=r.n(i),l=r(14),u=r.n(l),s=(r(205),["labels","isOpen"]);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var b=function(e){var t=e.labels,r=e.isOpen,i=p(e,s),c=u()("bwf-dropdown-button",{"is-open":r,"is-multi-line":t.length>1});return Object(n.createElement)(a.Button,f({className:c,"aria-expanded":r},i),Object(n.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(n.createElement)("span",{key:t},Object(o.decodeEntities)(e))}))))};b.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=b},166:function(e,t,r){},173:function(e,t,r){"use strict";var n=r(0),a=r(14),o=r.n(a),i=r(900),c=r(893),l=r(9),u=r.n(l);r(182);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return y(this,r)}}function y(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,r,a,l=d(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).state={animate:null},e.container=Object(n.createRef)(),e.onExited=e.onExited.bind(m(e)),e}return t=u,(r=[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.animationKey,a=e.animate,l=o()("bwf-slide-animation",a&&"animate-".concat(a));return Object(n.createElement)("div",{className:l,ref:this.container},Object(n.createElement)(i.a,null,Object(n.createElement)(c.a,f({timeout:200,classNames:"slide",key:r},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])&&p(t.prototype,r),a&&p(t,a),u}(n.Component);v.propTypes={children:u.a.func.isRequired,animationKey:u.a.any.isRequired,animate:u.a.oneOf([null,"left","right"]),onExited:u.a.func},t.a=v},179:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(14),i=r.n(o),c=r(6),l=r(9),u=r.n(l),s=r(152),f=r(144),p=r(153),b=function(e){var t=e.children;return Object(n.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};b.propTypes={children:u.a.node};var d=b,y=r(5),m=r(511),h=r(652),v=r(653);r(209);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=_(e);if(t){var a=_(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=[10,25,50,75,100],P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(u,e);var t,r,o,l=w(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state={inputValue:t.props.page},t.previousPage=t.previousPage.bind(S(t)),t.nextPage=t.nextPage.bind(S(t)),t.onInputChange=t.onInputChange.bind(S(t)),t.onInputBlur=t.onInputBlur.bind(S(t)),t.perPageChange=t.perPageChange.bind(S(t)),t.selectInputValue=t.selectInputValue.bind(S(t)),t}return t=u,(r=[{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,r=t.page,n=t.onPageChange;r-1<1||n(r-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,r=t.page,n=t.onPageChange;r+1>this.pageCount||n(r+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,r=t.onPerPageChange,n=t.onPageChange,a=t.total,o=t.page;r(parseInt(e,10));var i=Math.ceil(a/parseInt(e,10));o>i&&n(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,r=t.onPageChange,n=t.page,a=parseInt(e.target.value,10);a!==n&&Number.isFinite(a)&&a>0&&this.pageCount&&this.pageCount>=a&&r(a,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,r=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var o=i()("bwf-pagination-link",{"is-active":t>1}),c=i()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(n.createElement)("div",{className:"bwf-pagination-page-arrows"},r&&Object(n.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(a.sprintf)(Object(a.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(n.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(n.createElement)(y.Button,{className:o,disabled:!(t>1),onClick:this.previousPage,label:Object(a.__)("Previous Page","funnel-builder")},Object(n.createElement)(m.a,{icon:h.a})),Object(n.createElement)(y.Button,{className:c,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(a.__)("Next Page","funnel-builder")},Object(n.createElement)(m.a,{icon:v.a}))))}},{key:"renderPagePicker",value:function(){var e=this.props.page,t=this.state.inputValue,r=e<1||e>this.pageCount,o=i()("bwf-pagination-page-picker-input",{"has-error":r}),l=Object(c.uniqueId)("bwf-pagination-page-picker-");return Object(n.createElement)("div",{className:"bwf-pagination-page-picker"},Object(n.createElement)("label",{htmlFor:l,className:"bwf-pagination-page-picker-label"},Object(a.__)("Go to page","funnel-builder"),Object(n.createElement)("input",{id:l,className:o,"aria-invalid":r,type:"number",onClick:this.selectInputValue,onChange:this.onInputChange,onBlur:this.onInputBlur,value:t,min:1,max:this.pageCount})))}},{key:"renderPerPagePicker",value:function(){var e=k.map((function(e){return{value:e,label:e}}));return Object(n.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(n.createElement)(y.SelectControl,{label:Object(a.__)("Rows per page","funnel-builder"),value:this.props.perPage,onChange:this.perPageChange,options:e,labelPosition:"side"}))}},{key:"render",value:function(){var e=this.props,t=e.total,r=e.perPage,a=e.className,o=e.showPagePicker,c=e.showPerPagePicker;this.pageCount=Math.ceil(t/r);var l=i()("bwf-pagination",a);return this.pageCount<=1?t>k[0]&&Object(n.createElement)("div",{className:l},this.renderPerPagePicker())||null:Object(n.createElement)("div",{className:l},this.renderPageArrows(),o&&this.renderPagePicker(),c&&this.renderPerPagePicker())}}])&&O(t.prototype,r),o&&O(t,o),u}(n.Component);P.propTypes={page:u.a.number.isRequired,onPageChange:u.a.func,perPage:u.a.number.isRequired,onPerPageChange:u.a.func,total:u.a.number.isRequired,className:u.a.string,showPagePicker:u.a.bool,showPerPagePicker:u.a.bool,showPageArrowsLabel:u.a.bool},P.defaultProps={onPageChange:c.noop,onPerPageChange:c.noop,showPagePicker:!0,showPerPagePicker:!0,showPageArrowsLabel:!0};var C=P,R=r(163),T=r(189),x=function(e){var t=e.data;return Object(n.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var r=e.label,a=e.value;return Object(n.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(n.createElement)("span",{className:"bwf-table-summary-value"},a),Object(n.createElement)("span",{className:"bwf-table-summary-label"},r))})))};x.propTypes={data:u.a.array};var F=x;r(210);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return q(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return q(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=V(e);if(t){var a=V(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return M(this,r)}}function M(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(u,e);var t,r,o,l=B(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(t=l.call(this,e)).getShowCols(e.headers);return t.state={showCols:r},t.onColumnToggle=t.onColumnToggle.bind(L(t)),t.onPageChange=t.onPageChange.bind(L(t)),t}return t=u,(r=[{key:"componentDidUpdate",value:function(e){var t=e.headers,r=e.query,n=this.props,a=n.headers,o=n.onColumnsChange,i=n.query,l=this.state.showCols;if(Object(c.isEqual)(a,t)||this.setState({showCols:this.getShowCols(a)}),i.orderby!==r.orderby&&!l.includes(i.orderby)){var u=l.concat(i.orderby);this.setState({showCols:u}),o(u)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,r=e.visible;return!(void 0!==r&&!r)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var r=e.key;return t.includes(r)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,r=e.rows,n=this.state.showCols;return r.map((function(e){return t.map((function(t,r){var a=t.key;return n.includes(a)&&e[r]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,r=this.props,n=r.headers,a=r.query,o=r.onQueryChange,i=r.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(a.orderby===e){var r=Object(c.find)(n,{defaultSort:!0})||Object(c.first)(n)||{};o("sort")(r.key,"desc")}var l=Object(c.without)(t.showCols,e);return i(l,e),{showCols:l}}var u=[].concat(N(t.showCols),[e]);return i(u,e),{showCols:u}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,r=e.onQueryChange;t&&t.apply(void 0,arguments),r&&r("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,r=t.actions,o=t.className,c=t.isLoading,l=t.onQueryChange,u=t.onSort,b=t.query,y=t.rowHeader,m=t.rowsPerPage,h=t.showMenu,v=t.summary,g=t.title,O=t.totalRows,j=t.rowClasses,w=t.emptyMessage,E=t.filterColumnIcon,S=void 0===E?"":E,_=t.extraSectionBeforefilterCol,k=void 0===_?Object(n.createElement)(n.Fragment,null):_,P=t.hideHeader,x=this.state.showCols,D=this.props.headers,N=this.getVisibleHeaders(),q=this.getVisibleRows(),I=i()("bwf-table","bwf-analytics-card",o);return Object(n.createElement)(s.a,{className:I,title:g,action:r,hideHeader:P&&"yes"==P?"yes":"no",menu:Object(n.createElement)("div",{className:"bwf-display-flex"},k,h&&Object(n.createElement)(f.a,{label:Object(a.__)("Choose which values to display","funnel-builder"),buttonIcon:S,renderContent:function(){return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(d,null,Object(a.__)("Columns:","funnel-builder")),D.map((function(t){var r=t.key,a=t.label;return t.required?null:Object(n.createElement)(p.a,{checked:x.includes(r),isCheckbox:!0,isClickable:!0,key:r,onInvoke:e.onColumnToggle(r)},a)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable},c?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Your requested data is loading","funnel-builder")),Object(n.createElement)(T.a,{numberOfRows:m,headers:N,rowHeader:y,caption:g,query:b})):Object(n.createElement)(R.a,{rows:q,headers:N,rowHeader:y,caption:g,query:b,emptyMessage:w,onSort:u||l("sort"),rowClasses:j}),Object(n.createElement)(C,{key:parseInt(b.paged,10)||1,page:parseInt(b.paged,10)||1,perPage:m,total:O,onPageChange:this.onPageChange,onPerPageChange:l("per_page")}),v&&Object(n.createElement)(F,{data:v}))}}])&&I(t.prototype,r),o&&I(t,o),u}(n.Component);Y.propTypes={headers:u.a.arrayOf(u.a.shape({hiddenByDefault:u.a.bool,defaultSort:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.oneOfType([u.a.string,u.a.node]),required:u.a.bool})),ids:u.a.arrayOf(u.a.number),isLoading:u.a.bool,onQueryChange:u.a.func,onColumnsChange:u.a.func,onSort:u.a.func,query:u.a.object,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowsPerPage:u.a.number.isRequired,showMenu:u.a.bool,summary:u.a.arrayOf(u.a.shape({label:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number])})),totalRows:u.a.number.isRequired,rowClasses:u.a.arrayOf(u.a.string)},Y.defaultProps={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[]};t.a=Y},182:function(e,t,r){},183:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(5),i=r(14),c=r.n(i),l=r(9),u=r.n(l),s=(r(167),r(40)),f=r.n(s),p=r(6);r(201);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=O(e);if(t){var a=O(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return g(this,r)}}function g(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,r,a,o=v(i);function i(){return y(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props,t=e.className,r=e.options,a=e.selected,o=e.onSelect,i=e.name,l=e.legend;return Object(n.createElement)("fieldset",{className:"bwf-segment-selection"},Object(n.createElement)("legend",{className:"screen-reader-text"},l),Object(n.createElement)("div",{className:c()(t,"bwf-segment-selection-container")},r.map((function(e){var t=e.value,r=e.label;if(!t||!r)return null;var c=Object(p.uniqueId)("".concat(t,"_"));return Object(n.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(n.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:i,id:c,checked:a===t,onChange:Object(p.partial)(o,d({},i,t))}),Object(n.createElement)("label",{htmlFor:c},Object(n.createElement)("span",{className:"bwf-segment-selection-label"},r)))}))))}}])&&m(t.prototype,r),a&&m(t,a),i}(n.Component);j.propTypes={className:u.a.string,options:u.a.arrayOf(u.a.shape({value:u.a.string.isRequired,label:u.a.string.isRequired})).isRequired,selected:u.a.string,onSelect:u.a.func.isRequired,name:u.a.string.isRequired,legend:u.a.string.isRequired};var w=j;function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var a=R(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return C(this,r)}}function C(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(c,e);var t,r,o,i=P(c);function c(){return S(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.onSelect,r=e.compare;return Object(n.createElement)(w,{options:F,selected:r,onSelect:t,name:"compare",legend:Object(a.__)("compare to","funnel-builder")})}}])&&_(t.prototype,r),o&&_(t,o),c}(n.Component);T.propTypes={onSelect:u.a.func.isRequired,compare:u.a.string};var x=T,F=[{value:"previous_period",label:Object(a.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(a.__)("Previous Year","funnel-builder")}],D=(Object(a.__)("Invalid date","funnel-builder"),Object(a.__)("Select a date in the past","funnel-builder"),Object(a.__)("Start date must be before end date","funnel-builder"),Object(a.__)("Start date must be before end date","funnel-builder"),r(202),r(203),r(312)),N=r(88),q=r(141),I=(r(150),r(164)),A={calendarLabel:Object(a.__)("Calendar","funnel-builder"),closeDatePicker:Object(a.__)("Close","funnel-builder"),focusStartDate:Object(a.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(a.__)("Clear Date","funnel-builder"),clearDates:Object(a.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(a.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(a.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(a.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(a.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(a.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(a.__)("page up and page down keys","funnel-builder"),homeEnd:Object(a.__)("Home and end keys","funnel-builder"),escape:Object(a.__)("Escape key","funnel-builder"),questionMark:Object(a.__)("Question mark","funnel-builder"),selectFocusedDate:Object(a.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(a.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(a.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(a.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(a.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(a.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(a.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(a.sprintf)(Object(a.__)("Selected. %s","funnel-builder"),t)}};function B(e){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=K(e);if(t){var a=K(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return U(this,r)}}function U(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(l,e);var t,r,o,i=Y(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).onDatesChange=t.onDatesChange.bind(H(t)),t.onFocusChange=t.onFocusChange.bind(H(t)),t.onInputChange=t.onInputChange.bind(H(t)),t.nodeRef=Object(n.createRef)(),t.keepFocusInside=t.keepFocusInside.bind(H(t)),t}return t=l,(r=[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var r=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var n=this.nodeRef.current.querySelector(".DayPickerNavigation_button");n&&n.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&r&&r.contains(t.relatedTarget))return;var a=this.nodeRef.current.querySelector(".DayPicker_focusRegion");a&&a.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,r=e.endDate,n=this.props,a=n.onUpdate,o=n.shortDateFormat;a({after:t,before:r,afterText:t?t.format(o):"",beforeText:r?r.format(o):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var r,n=t.target.value,a=this.props,o=a.after,i=a.before,c=a.shortDateFormat,l=Object(q.j)(e,n,i,o,c),u=l.date,s=l.error;this.props.onUpdate((M(r={},e,u),M(r,e+"Text",n),M(r,e+"Error",n.length>0?s:null),r))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var r=t||f()();return e?r.clone().subtract(1,"month"):r}}},{key:"render",value:function(){var e=this,t=this.props,r=t.after,o=t.before,i=t.focusedInput,l=t.afterText,u=t.beforeText,s=t.afterError,f=t.beforeError,b=t.shortDateFormat,d=t.isViewportMobile,y=t.isViewportSmall,m=t.isInvalidDate,h=d&&!y;return Object(n.createElement)("div",{className:c()("bwf-calendar",{"is-mobile":d})},Object(n.createElement)("div",{className:"bwf-calendar-inputs"},Object(n.createElement)(I.a,{value:l,onChange:Object(p.partial)(this.onInputChange,"after"),dateFormat:b,label:Object(a.__)("Start Date","funnel-builder"),error:s,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),b),onFocus:function(){return e.onFocusChange("startDate")}}),Object(n.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(a.__)("to","funnel-builder")),Object(n.createElement)(I.a,{value:u,onChange:Object(p.partial)(this.onInputChange,"before"),dateFormat:b,label:Object(a.__)("End Date","funnel-builder"),error:f,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),b),onFocus:function(){return e.onFocusChange("endDate")}})),Object(n.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(p.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(n.createElement)(D.DayPickerRangeController,{onNextMonthClick:Object(p.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(p.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:i,startDate:r,endDate:o,orientation:"horizontal",numberOfMonths:h?2:1,isOutsideRange:function(e){return m&&m(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:"rtl"===document.documentElement.dir,initialVisibleMonth:this.setTnitialVisibleMonth(h,o),phrases:A})))}}])&&L(t.prototype,r),o&&L(t,o),l}(n.Component);Q.propTypes={after:u.a.object,afterError:u.a.string,afterText:u.a.string,before:u.a.object,beforeError:u.a.string,beforeText:u.a.string,focusedInput:u.a.string,isInvalidDate:u.a.func,onUpdate:u.a.func.isRequired,shortDateFormat:u.a.string.isRequired,losesFocusTo:u.a.instanceOf(Element)};var W=Object(N.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(Q),z=r(138);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var a=te(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ee(this,r)}}function ee(e,t){if(t&&("object"===$(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(c,e);var t,r,o,i=Z(c);function c(){return G(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this.props,t=e.onSelect,r=e.period;return Object(n.createElement)(w,{options:Object(p.filter)(ae,(function(e){return"custom"!==e.value})),selected:r,onSelect:t,name:"period",legend:Object(a.__)("select a preset period","funnel-builder")})}}])&&J(t.prototype,r),o&&J(t,o),c}(n.Component);re.propTypes={onSelect:u.a.func.isRequired,period:u.a.string};var ne=re,ae=[{value:"today",label:Object(a.__)("Today","funnel-builder")},{value:"yesterday",label:Object(a.__)("Yesterday","funnel-builder")},{value:"week",label:Object(a.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(a.__)("Last Week","funnel-builder")},{value:"month",label:Object(a.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(a.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(a.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(a.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(a.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(a.__)("Last Year","funnel-builder")},{value:"custom",label:Object(a.__)("Custom","funnel-builder")}];function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ce(e,t){return(ce=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fe(e);if(t){var a=fe(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ue(this,r)}}function ue(e,t){if(t&&("object"===oe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return se(e)}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ce(e,t)}(u,e);var t,r,i,l=le(u);function u(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(e=l.call(this)).onTabSelect=e.onTabSelect.bind(se(e)),e.controlsRef=Object(n.createRef)(),e}return t=u,(r=[{key:"onTabSelect",value:function(e){var t=this.props,r=t.onUpdate,n=t.period;"period"===e&&"custom"===n&&r({period:"today"})}},{key:"isFutureDate",value:function(e){return f()().isBefore(f()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,r=t.period,i=t.compare,l=t.hideCompare,u=t.after,s=t.before,f=t.onUpdate,p=t.onClose,b=t.onSelect,d=t.isValidSelection,y=t.resetCustomValues,m=t.focusedInput,h=t.afterText,v=t.beforeText,g=t.afterError,O=t.beforeError,j=t.shortDateFormat,w=t.disablePresets;return Object(n.createElement)("div",null,Object(n.createElement)(z.a,{className:"screen-reader-text",tabIndex:"0"},Object(a.__)("Select date range and comparison","funnel-builder")),Object(n.createElement)(z.b,{component:!1},Object(n.createElement)(z.a,{className:"bwf-filters-date-text"},Object(a.__)("select a date range","funnel-builder")),Object(n.createElement)(o.TabPanel,{tabs:[{name:"period",title:Object(a.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(a.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===r||w?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(n.createElement)(n.Fragment,null,"period"===t.name&&Object(n.createElement)(ne,{onSelect:f,period:r}),"custom"===t.name&&Object(n.createElement)(W,{after:u,before:s,onUpdate:f,isInvalidDate:e.isFutureDate,focusedInput:m,afterText:h,beforeText:v,afterError:g,beforeError:O,shortDateFormat:j,losesFocusTo:e.controlsRef.current}),Object(n.createElement)("div",{className:c()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!l&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)(z.a,{className:"bwf-filters-date-text"},Object(a.__)("compare to","funnel-builder")),Object(n.createElement)(x,{onSelect:f,compare:i})),Object(n.createElement)("div",{className:c()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(n.createElement)(o.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn",onClick:y,disabled:!(u||s)},Object(a.__)("Reset","funnel-builder")),d(t.name)?Object(n.createElement)(o.Button,{className:"bwf-filters-date-button",onClick:b(t.name,p),isPrimary:!0},Object(a.__)("Update","funnel-builder")):Object(n.createElement)(o.Button,{className:"bwf-filters-date-button",isPrimary:!0,disabled:!0},Object(a.__)("Update","funnel-builder")))))}))))}}])&&ie(t.prototype,r),i&&ie(t,i),u}(n.Component);pe.propTypes={period:u.a.string.isRequired,compare:u.a.string.isRequired,onUpdate:u.a.func.isRequired,onClose:u.a.func.isRequired,onSelect:u.a.func.isRequired,resetCustomValues:u.a.func.isRequired,focusedInput:u.a.string,afterText:u.a.string,beforeText:u.a.string,afterError:u.a.string,beforeError:u.a.string,shortDateFormat:u.a.string.isRequired};var be=pe,de=r(165);r(206);function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=je(e);if(t){var a=je(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ge(this,r)}}function ge(e,t){if(t&&("object"===ye(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Oe(e)}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function je(e){return(je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=Object(a.__)("MM/DD/YYYY","funnel-builder"),Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(u,e);var t,r,i,l=ve(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=l.call(this,e)).state=t.getResetState(),t.update=t.update.bind(Oe(t)),t.onSelect=t.onSelect.bind(Oe(t)),t.isValidSelection=t.isValidSelection.bind(Oe(t)),t.resetCustomValues=t.resetCustomValues.bind(Oe(t)),t}return t=u,(r=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,r=e.compare,n=e.before,a=e.after;return{period:t,compare:r,before:n,after:a,focusedInput:"startDate",afterText:this.formatDate(a,we),beforeText:this.formatDate(n,we),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var r=this,n=this.props,a=n.isoDateFormat,o=n.onRangeSelect;return function(n){var i=r.state,c=i.period,l=i.compare,u=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:l};"custom"===e?(f.after=r.formatDate(u,a),f.before=r.formatDate(s,a)):(f.after=void 0,f.before=void 0),o(f),t(n)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,r=e.secondaryDate,n=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||n.push("".concat(Object(a.__)("vs.","funnel-builder")," ").concat(r.label," (").concat(r.range,")")),n}},{key:"isValidSelection",value:function(e){var t=this.state,r=t.compare,n=t.after,a=t.before;return"custom"!==e||r&&n&&a}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,r=t.period,a=t.compare,i=t.after,l=t.before,u=t.focusedInput,s=t.afterText,f=t.beforeText,p=t.afterError,b=t.beforeError,d=this.props.disablePresets;return Object(n.createElement)("div",{className:c()("bwf-filters-filter",{"bwf-presets-disable":d})},Object(n.createElement)(o.Dropdown,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var r=t.isOpen,a=t.onToggle;return Object(n.createElement)(de.a,{onClick:a,isOpen:r,labels:e.getButtonLabel()})},renderContent:function(t){var o=t.onClose;return Object(n.createElement)(be,{period:r,compare:a,hideCompare:e.props.hideCompare,after:i,before:l,onUpdate:e.update,onClose:o,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:u,afterText:s,beforeText:f,afterError:p,beforeError:b,shortDateFormat:we,disablePresets:d})}}))}}])&&me(t.prototype,r),i&&me(t,i),u}(n.Component);Ee.propTypes={onRangeSelect:u.a.func.isRequired,dateQuery:u.a.shape({period:u.a.string.isRequired,compare:u.a.string.isRequired,before:u.a.object,after:u.a.object,primaryDate:u.a.shape({label:u.a.string.isRequired,range:u.a.string.isRequired}).isRequired,secondaryDate:u.a.shape({label:u.a.string.isRequired,range:u.a.string.isRequired}).isRequired}).isRequired},Ee.defaultProps={disablePresets:!1};t.a=Ee},187:function(e,t,r){"use strict";function n(e){return e<10?"has-".concat(e,"-items"):"has-10-items"}r.d(t,"a",(function(){return n}))},188:function(e,t,r){"use strict";function n(e){return function(t,r,n){if(t[r])return t[r].type&&t[r].type===e?void 0:new Error("Invalid ".concat(r," passed to ").concat(n,". Must be ")+"`"+e.name+"`")}}r.d(t,"a",(function(){return n}))},189:function(e,t,r){"use strict";var n=r(0),a=r(6),o=r(9),i=r.n(o),c=r(163);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=["numberOfRows"];function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var a=h(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,r,o,i=y(l);function l(){return p(this,l),i.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.numberOfRows,o=f(t,u),i=Object(a.range)(r).map((function(){return e.props.headers.map((function(){return{display:Object(n.createElement)("span",{className:"is-placeholder"})}}))}));return Object(n.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:i},o))}}])&&b(t.prototype,r),o&&b(t,o),l}(n.Component);v.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},v.defaultProps={numberOfRows:5},t.a=v},201:function(e,t,r){},205:function(e,t,r){},206:function(e,t,r){},207:function(e,t,r){},208:function(e,t,r){},209:function(e,t,r){},210:function(e,t,r){},213:function(e,t,r){"use strict";var n=r(0),a=r(61),o=r(9),i=r.n(o),c=r(5),l=r(14),u=r.n(l);r(214);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled"];function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function b(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t,r,a,o=m(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={isFocused:!1},t}return t=i,(r=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,r=t.label,a=t.value,o=t.help,i=t.className,l=t.instanceId,s=t.onChange,d=t.onClick,y=t.prefix,m=t.suffix,h=t.type,v=t.disabled,g=b(t,f),O=this.state.isFocused,j="inspector-text-control-with-affixes-".concat(l),w=[];o&&w.push("".concat(j,"__help")),y&&w.push("".concat(j,"__prefix")),m&&w.push("".concat(j,"__suffix"));var E=u()(i,{"with-value":""!==a,empty:""===a,active:O&&!v}),S=u()("text-control-with-affixes",{"text-control-with-prefix":y,"text-control-with-suffix":m,disabled:v});return Object(n.createElement)(c.BaseControl,{label:r,id:j,help:o,className:E,onClick:function(t){return e.handleOnClick(t,d)}},Object(n.createElement)("div",{className:S},y&&Object(n.createElement)("span",{id:"".concat(j,"__prefix"),className:"text-control-with-affixes__prefix"},y),Object(n.createElement)("input",p({className:"components-text-control__input",type:h,id:j,value:a,onChange:function(e){return s(e.target.value)},"aria-describedby":w.join(" "),disabled:v,onFocus:function(){return e.setState({isFocused:!0})}},g)),m&&Object(n.createElement)("span",{id:"".concat(j,"__suffix"),className:"text-control-with-affixes__suffix"},m)))}}])&&d(t.prototype,r),a&&d(t,a),i}(n.Component);g.defaultProps={type:"text"},g.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(a.compose)([a.withInstanceId,c.withFocusOutside])(g)},214:function(e,t,r){},220:function(e,t,r){"use strict";var n=r(0);t.a=function(e){return Object(n.createElement)("div",{className:"bwf-c-container"},Object(n.createElement)("div",{className:"bwf-c-content-inner"},Object(n.createElement)("div",{className:"bwf-c-content-body"},e.children)))}},221:function(e,t,r){},222:function(e,t,r){},223:function(e,t,r){},224:function(e,t,r){},225:function(e,t,r){},237:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(14),i=r.n(o),c=r(888),l=r(6),u=r(170),s=r.n(u),f=r(5),p=r(901),b=r(338),d=r(9),y=r.n(d),m=r(88),h=r(10);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var a=S(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return E(this,r)}}function E(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,r,a,o=w(i);function i(){return g(this,i),o.apply(this,arguments)}return t=i,(r=[{key:"render",value:function(){var e=this.props.height;return Object(n.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:e}},Object(n.createElement)(f.Spinner,null))}}])&&O(t.prototype,r),a&&O(t,a),i}(n.Component);_.propTypes={height:y.a.number},_.defaultProps={height:0};var k=_,P=r(138),C=(r(223),r(898)),R=r(882);r(224);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=q(e);if(t){var a=q(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return N(this,r)}}function N(e,t){if(t&&("object"===T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(c,e);var t,r,a,o=D(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).chartRef=Object(n.createRef)(),t}return t=c,(r=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(l.isEqual)(this.props.data,e.data)||!Object(l.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(l.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(R.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,r=e.height,n=e.width;this.deleteChart();var a=Object(R.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(n," ").concat(r)).attr("height",r).attr("width",n).attr("preserveAspectRatio","xMidYMid meet");return t&&a.attr("class","".concat(t,"__viewbox")),a.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(n.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&x(t.prototype,r),a&&x(t,a),c}(n.Component);function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}I.propTypes={className:y.a.string,data:y.a.array,orderedKeys:y.a.array,tooltip:y.a.object,chartType:y.a.string};var V=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},Y=function(e){return B(new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]))).filter((function(e){return"date"!==e}))},U=r(896),H=r(887),K=r(894),Q=r(40),W=r.n(Q);function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(U.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(r?0:.07)},J=function(e,t){return Object(H.a)().domain([W()(e[0],"YYYY-MM-DD HH:mm").toDate(),W()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},X=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var n=0,a=Object.entries(e);n<a.length;n++){var o=z(a[n],2),i=o[0],c=o[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<r&&(r=c.value)}})),{upper:t,lower:r}}(e),r=t.lower,n=t.upper,a=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;var r=4/3*Math.max(-e,t),n=3*Math.pow(10,(Math.log(r)*Math.LOG10E+1|0)-2),a=Math.ceil(r/n)*n/3;return t<1&&e>-1?Math.round(4*a)/4:Math.ceil(a)}(r,n),o={lower:0,upper:0,step:a};return(Number.isFinite(r)||r<0)&&(o.lower=Math.floor(r/a)*a,o.lower===r&&0!==r&&(o.lower-=a)),(Number.isFinite(n)||n>0)&&(o.upper=Math.ceil(n/a)*a,o.upper===n&&0!==n&&(o.upper+=a)),o},Z=r(897),ee=function(e){for(var t=[],r=1;r<=Math.floor(Math.sqrt(e));r++)e%r==0&&(t.push(r),e/r!==r&&t.push(e/r));return t.sort((function(e,t){return e-t})),t},te=function(e,t,r,n){var a,o=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,r);return(e.length>=63&&"day"===n||e.length>=9&&"week"===n)&&(e=(a=e).filter((function(e,t){return 0===t||W()(e).toDate().getMonth()!==W()(a[t-1]).toDate().getMonth()}))),e.length<=o||"hour"===n&&function(e){var t=W()(e[0]).toDate(),r=W()(e[e.length-1]).toDate();return t.getDate()===r.getDate()&&t.getMonth()===r.getMonth()&&t.getFullYear()===r.getFullYear()}(e)&&t>783?e:function(e,t){for(var r=[],n=0;n<e.length;n+=t)r.push(e[n]);return r[0]!==e[0]&&r.unshift(e[0]),r}(e,function(e,t){for(var r=[],n=1;r.length<=3;)r=ee(e.length-n),n+=1;return r.find((function(r){return e.length/r<t}))}(e,o))},re=function(e,t,r,n){var a=W()(e).toDate(),o=0!==t?r[t-1]:r[t];return o=o instanceof Date?o:W()(o).toDate(),0===t?n(a):function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),n=e.split(r),a=t.split(r),o=new Array,i=e.length>t.length?n:a,c=0;c<i.length;c++)n[c]!==a[c]&&o.push(a[c]);return o}(n(o),n(a)).join(" ")};function ne(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var oe=function(e,t,r){for(var n=[],a=0;a<e;a++){var o=(a+1)/e*t,i=r?Math.round(o):o;n[n.length-1]!==i&&n.push(i)}return n},ie=function(e,t,r){return[0].concat(ne(function(e,t){if(e>=0)return[];var r=Math.ceil(-e/t);return oe(r,e,e<-1)}(e,r)),ne(function(e,t){if(e<=0)return[];var r=Math.ceil(e/t);return oe(r,e,e>1)}(t,r)))},ce=function(e,t,r,n,a,o){!function(e,t,r,n){var a=r.yScale.range()[0],o=te(t.uniqueDates,r.xScale.range()[1],t.mode,t.interval);"line"===t.chartType&&(o=o.map((function(e){return W()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickFormat((function(e,r){return"hour"===t.interval?n.xFormat(e instanceof Date?e:W()(e).toDate()):re(e,r,o,n.xFormat)}))),e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(a+14,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickFormat((function(e,t){return re(e,t,o,n.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(a,")")).call(Object(Z.a)(r.xScale).tickValues(o).tickSize(5).tickFormat(""))}(e,t,r,n),function(e,t,r,n,a){var o=ie(t.yScale.domain()[0],t.yScale.domain()[1],t.step),i=t.xScale.range()[1],c=a?i+n.left+n.right/2-15:-n.left/2-15,l=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+l).attr("transform","translate(-".concat(n.left,", 0)")).call(Object(Z.b)(t.yScale).tickValues(o).tickSize(-i-n.left-n.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+c+", 12)").attr("text-anchor","start").call(Object(Z.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[o[0]]:o).tickFormat((function(e){return e>-1&&e<1&&r.yBelow1Format?r.yBelow1Format(e):r.yFormat(e)})))}(e,r,n,a,o),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},le=r(854),ue=r(892);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var be=function(e,t,r,n,a,o){var i,c,u=n.yScale.range()[0],s=n.xScale.range()[1],f=(i=n.xScale,c=n.yScale,Object(ue.a)().x((function(e){return i(W()(e.date).toDate())})).y((function(e){return c(e.value)}))),p=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,r.visibleKeys),b=e.append("g").attr("class","lines").selectAll(".line-g").data(p.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),d=function(e,t,r,n,a){var o=r.slice().reverse();return t.map((function(r,i){var c=Object(l.first)(e.filter((function(e){return e.date===r}))),u=a(W()(r).toDate()),s=a(i>=1?W()(t[i-1]).toDate():W()(t[0]).toDate()),f=i<t.length-1?a(W()(t[i+1]).toDate()):a(W()(t[t.length-1]).toDate()),p=0===i?f-u:u-s,b=0===i?0:u-p/2;return p=0===i||i===t.length-1?p/2:p,{date:r,start:t.length>1?b:0,width:t.length>1?p:n,values:o.map((function(e){var t=e.key,n=c[t];return n?{key:t,value:n.value,date:r}:null})).filter(Boolean)}}))}(t,r.uniqueDates,r.visibleKeys,s,n.xScale),y=s<=1365||r.uniqueDates.length>50?2:3;y=s<=783?1.25:y;var m=s<=1365?4:6;r.uniqueDates.length>1&&b.append("path").attr("fill","none").attr("stroke-width",y).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return r.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/r.uniqueDates.length>36&&b.selectAll("circle").data((function(e,t){return e.values.map((function(r){return fe(fe({},r),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",m).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",y+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=a.screenReaderFormat(e.date instanceof Date?e.date:W()(e.date).toDate());return"".concat(t," ").concat(o.valueFormat(e.value))})).on("focus",(function(e,r,n){o.show(t.find((function(t){return t.date===e.date})),n[r].parentNode,le.b.target)})).on("blur",(function(){return o.hide()}));var h=e.append("g").attr("class","focusspaces").selectAll(".focus").data(d).enter().append("g").attr("class","focus"),v=h.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return n.xScale(W()(e.date).toDate())})).attr("y2",u),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",m+2).attr("fill",(function(e){return r.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",y+2).attr("cx",(function(e){return n.xScale(W()(e.date).toDate())})).attr("cy",(function(e){return n.yScale(e.value)})),h.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",u).attr("opacity",0).on("mouseover",(function(e,n,a){var i=(0===n||n===d.length-1)&&r.uniqueDates.length>1?0:.5;o.show(t.find((function(t){return t.date===e.date})),le.b.target,a[n].parentNode,i)})).on("mouseout",(function(){return o.hide()}))},de=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],ye=function(e,t){return function(r){var n=e.length>5?5:e.length,a=Object(l.findIndex)(e,(function(e){return e.key===r})),o=a<=4?de[n][a]:0;return t(o)}};function me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var he=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24}var t,r,n;return t=e,(r=[{key:"calculateXPosition",value:function(e,t,r){var n=this.ref.getBoundingClientRect(),a=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),o=Math.max(a.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-n.width/2-o,a.width-n.width-this.margin));var i=e.left+e.width*r+this.margin-o;return i+n.width+this.margin>a.width?Math.max(this.margin,e.left+e.width*(1-r)-n.width-this.margin-o):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var r=this.ref.getBoundingClientRect(),n=e.top+this.margin-t.top;return n+r.height+this.margin>t.height?Math.max(0,e.top-r.height-this.margin-t.top):n}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=e.getBoundingClientRect(),n=this.chart.getBoundingClientRect();return"below"===this.position&&(t=0),{x:this.calculateXPosition(r,n,t),y:this.calculateYPosition(r,n)}}},{key:"hide",value:function(){Object(R.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(R.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(W()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,r){var n=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(this.visibleKeys.length){Object(R.a)(r).select(".focus-grid, .barfocus").attr("opacity","1");var i=this.calculatePosition(t,o),c=this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(n.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(n.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(n.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),l=this.title?this.title:this.labelFormat(W()(e.date).toDate());Object(R.a)(this.ref).style("left",i.x+"px").style("top",i.y+"px").style("visibility","visible").html("\n\t\t\t\t<div>\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t".concat("week"===this.interval?Object(a.__)("Week of "):"month"===this.interval?Object(a.__)("Month of "):"","\n\t\t\t\t\t\t").concat(l,"\n\t\t\t\t\t</h4>\n\t\t\t\t\t<ul>\n\t\t\t\t\t").concat(c.join(""),"\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t"))}}}])&&me(t.prototype,r),n&&me(t,n),e}();function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function je(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Se(e);if(t){var a=Se(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return we(this,r)}}function we(e,t){if(t&&("object"===ve(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ee(e)}function Ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=function(){return"rtl"===document.documentElement.dir},ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(c,e);var t,r,a,o=je(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(t=o.call(this,e)).drawChart=t.drawChart.bind(Ee(t)),t.getParams=t.getParams.bind(Ee(t)),t.tooltipRef=Object(n.createRef)(),t}return t=c,(r=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,r=e.xFormat,n=e.x2Format,a=e.yFormat,o=e.yBelow1Format;return{screenReaderFormat:V(t,C.a),xFormat:V(r,C.a),x2Format:V(n,C.a),yBelow1Format:V(o),yFormat:V(a)}}},{key:"getScaleParams",value:function(e){var t=this.props,r=t.data,n=t.height,a=t.orderedKeys,o=t.chartType,i=this.getMargin(),c=n-i.top-i.bottom,l=this.getWidth()-i.left-i.right,u=X(r),s=u.upper,f=u.lower,p=u.step,b=function(e,t,r){return Object(K.a)().domain([Math.min(t,0),0===r&&0===t?1:Math.max(r,0)]).rangeRound([e,0])}(c,f,s);if("line"===o)return{step:p,xScale:J(e,l),yMax:s,yMin:f,yScale:b};var d=this.shouldBeCompact(),y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(U.a)().domain(e).range([0,t]).paddingInner(r?0:.1)}(e,l,d);return{step:p,xGroupScale:G(a,y,d),xScale:y,yMax:s,yMin:f,yScale:b}}},{key:"getParams",value:function(e){var t=this.props,r=t.chartType,n=t.colorScheme,a=t.data,o=t.interval,i=t.mode,c=t.orderedKeys||function(e){return Y(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,r){return e+r[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(a),l=c.filter((function(e){return e.visible})),u=c.length>5?l:c;return{getColor:ye(u,n),interval:o,mode:i,chartType:r,uniqueDates:e,visibleKeys:l}}},{key:"createTooltip",value:function(e,t,r){var n=this.props,a=n.tooltipLabelFormat,o=n.tooltipPosition,i=n.tooltipTitle,c=n.tooltipValueFormat,l=n.interval,u=new he;u.ref=this.tooltipRef.current,u.chart=e,u.position=o,u.title=i,u.labelFormat=V(a,C.a),u.valueFormat=V(c),u.visibleKeys=r,u.getColor=t,u.interval=l,this.tooltip=u}},{key:"drawChart",value:function(e){var t=this.props,r=t.data,n=t.dateParser,a=t.chartType,o=this.getMargin(),i=function(e,t){var r=Object(C.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return r(e)-r(t)}))}(r,n),c=this.getFormatParams(),l=this.getParams(i),u=this.getScaleParams(i),s=e.attr("id","chart").append("g").attr("transform","translate(".concat(o.left,", ").concat(o.top,")"));this.createTooltip(s.node(),l.getColor,l.visibleKeys),ce(s,l,u,c,o,_e()),"line"===a&&be(s,r,l,u,c,this.tooltip),"bar"===a&&function(e,t,r,n,a,o){var i=n.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(n.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===r.mode?a.screenReaderFormat(e.date instanceof Date?e.date:W()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",n.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,r,n){o.show(t.find((function(t){return t.date===e.date})),le.b.target,n[r].parentNode)})).on("mouseout",(function(){return o.hide()}));var l=n.yScale(0);c.selectAll(".bar").data((function(e){return r.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return n.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(l,n.yScale(e.value))})).attr("width",n.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(l-n.yScale(e.value))})).attr("fill",(function(e){return r.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var n=e.label||e.key;if("time-comparison"===r.mode){var i=t.find((function(t){return t.date===e.date}));n=a.screenReaderFormat(W()(i[e.key].labelDate).toDate())}return"".concat(n," ").concat(o.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,r,n){var a=e.value>0?le.b.target:le.b.target.parentNode;o.show(t.find((function(t){return t.date===e.date})),a,n[r].parentNode)})).on("blur",(function(){return o.hide()}))}(s,r,l,u,c,this.tooltip)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return!1;var a=this.getMargin(),o=n-a.left-a.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return o<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return _e()?{bottom:e.bottom,left:e.right,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,r=e.chartType,n=e.width;if("bar"!==r)return n;var a=this.getMargin(),o=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*o:t.length*(o+1);return Math.max(n,i+a.left+a.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,r=e.data,a=e.emptyMessage;if(a&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=0;r<e.length;r++)for(var n=0,a=Object.entries(e[r]);n<a.length;n++){var o=A(a[n],2),i=o[0],c=o[1];if("date"!==i&&!Object(l.isNil)(c.value)&&c.value!==t)return!1}return!0}(r,t))return Object(n.createElement)("div",{className:"d3-chart__empty-message"},a)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.data,a=e.height,o=e.orderedKeys,c=e.chartType,l=this.getWidth();return Object(n.createElement)("div",{className:i()("d3-chart__container",t),style:{height:a}},this.getEmptyMessage(),Object(n.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(n.createElement)(I,{className:i()(t),data:r,drawChart:this.drawChart,height:a,orderedKeys:o,tooltip:this.tooltip,chartType:c,width:l}))}}])&&ge(t.prototype,r),a&&ge(t,a),c}(n.Component);ke.propTypes={baseValue:y.a.number,className:y.a.string,colorScheme:y.a.func,data:y.a.array.isRequired,dateParser:y.a.string.isRequired,emptyMessage:y.a.string,height:y.a.number,interval:y.a.oneOf(["hour","day","week","month","quarter","year"]),margin:y.a.shape({bottom:y.a.number,left:y.a.number,right:y.a.number,top:y.a.number}),mode:y.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:y.a.oneOfType([y.a.string,y.a.func]),orderedKeys:y.a.array,tooltipLabelFormat:y.a.oneOfType([y.a.string,y.a.func]),tooltipValueFormat:y.a.oneOfType([y.a.string,y.a.func]),tooltipPosition:y.a.oneOf(["below","over"]),tooltipTitle:y.a.string,chartType:y.a.oneOf(["bar","line"]),width:y.a.number,xFormat:y.a.oneOfType([y.a.string,y.a.func]),x2Format:y.a.oneOfType([y.a.string,y.a.func]),yBelow1Format:y.a.oneOfType([y.a.string,y.a.func]),yFormat:y.a.oneOfType([y.a.string,y.a.func])},ke.defaultProps={baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"};var Pe=ke,Ce=r(61);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ne(e);if(t){var a=Ne(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return De(this,r)}}function De(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(l,e);var t,r,o,c=Fe(l);function l(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(e=c.call(this)).listRef=Object(n.createRef)(),e.state={isScrollable:!1},e}return t=l,(r=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=e.colorScheme,r=e.data,o=e.handleLegendHover,c=e.handleLegendToggle,l=e.interactive,u=e.legendDirection,s=e.legendValueFormat,f=e.instanceId,p=e.totalLabel,b=this.state.isScrollable,d=r.filter((function(e){return e.visible})),y=d.length,m="column"===u&&r.length>5&&p,h=r.length>5?d:r;return Object(n.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(u),{"has-total":m,"is-scrollable":b},this.props.className)},Object(n.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:m?this.updateListScroll:null},r.map((function(e){return Object(n.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(f,"__item__").concat(e.key),onMouseEnter:o,onMouseLeave:o,onBlur:o,onFocus:o},Object(n.createElement)("button",{onClick:c,id:"bwf-legend-".concat(f,"__item-button__").concat(e.key),disabled:e.visible&&y<=1||!e.visible&&y>=5||!l,title:y>=5?Object(a.sprintf)(Object(a.__)("You may select up to %d items.","funnel-builder"),5):""},Object(n.createElement)("div",{className:"bwf-legend-item-container"},Object(n.createElement)("span",{className:i()("bwf-legend-item-checkmark",{"bwf-legend-item-checkmark-checked":e.visible}),style:e.visible?{color:ye(h,t)(e.key)}:null}),Object(n.createElement)("span",{className:"bwf-legend-item-title"},e.label),Object(n.createElement)("span",{className:"bwf-legend-item-total"},V(s)(e.total)))))}))),m&&Object(n.createElement)("div",{className:"bwf-legend-total"},p))}}])&&Te(t.prototype,r),o&&Te(t,o),l}(n.Component);qe.propTypes={className:y.a.string,colorScheme:y.a.func,data:y.a.array.isRequired,handleLegendToggle:y.a.func,handleLegendHover:y.a.func,interactive:y.a.bool,legendDirection:y.a.oneOf(["row","column"]),legendValueFormat:y.a.oneOfType([y.a.string,y.a.func]),totalLabel:y.a.string,instanceId:y.a.number},qe.defaultProps={interactive:!0,legendDirection:"row",legendValueFormat:","};var Ie=Object(Ce.withInstanceId)(qe);r(225);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Le(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ke(e);if(t){var a=Ke(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Ue(this,r)}}function Ue(e,t){if(t&&("object"===Ae(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return He(e)}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var We=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(d,e);var t,r,o,u=Ye(d);function d(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),(t=u.call(this,e)).chartBodyRef=Object(n.createRef)();var r=t.getDataKeys();return t.state={focusedKeys:[],visibleKeys:r.slice(0,5),width:0},t.prevDataKeys=r.sort(),t.handleTypeToggle=t.handleTypeToggle.bind(He(t)),t.handleLegendToggle=t.handleLegendToggle.bind(He(t)),t.handleLegendHover=t.handleLegendHover.bind(He(t)),t.updateDimensions=t.updateDimensions.bind(He(t)),t.getVisibleData=Object(b.a)(t.getVisibleData),t.getOrderedKeys=Object(b.a)(t.getOrderedKeys),t.setInterval=t.setInterval.bind(He(t)),t}return t=d,(r=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,r=e.filterParam,n=e.mode,a=e.query;if("item-comparison"===n){var o=r?Object(h.e)(a[r]):[];return this.getOrderedKeys([],[],o).map((function(e){return e.key}))}return Y(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=Y(e).sort();if(!Object(l.isEqual)(t,this.prevDataKeys)){var r=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:r.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,r=e.symbolPosition,n=e.decimalSeparator,a=e.thousandSeparator;Object(c.a)({decimal:n,thousands:a,grouping:[3],currency:Qe(t,r)})}},{key:"getOrderedKeys",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this.props,a=n.data,o=n.legendTotals,i=n.mode;if(!a||0===a.length)return[];var c=a.reduce((function(e,t){return Object.entries(t).forEach((function(t){var r=Be(t,2),n=r[0],a=r[1];"date"===n||e[n]||(e[n]=a.label)})),e}),{}),l=Object.entries(c).map((function(r){var n=Be(r,2),i=n[0],c=n[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:o&&void 0!==o[i]?o[i]:"conversion_rate"!==i?a.reduce((function(e,t){return e+t[i].value}),0):0!==a.reduce((function(e,t){return e+t.conversion.value}),0)?a.reduce((function(e,t){return e+t.conversion.value}),0)/a.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?l.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||r.includes(parseInt(e.key,10))})):l}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,r=t.path,n=t.query,a=t.onChartChange,o=void 0===a?l.noop:a,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({chartType:e},r,n),o(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),r=this.state,n=r.focusedKeys,a=r.visibleKeys;a.includes(t)?this.setState({focusedKeys:Object(l.without)(n,t),visibleKeys:Object(l.without)(a,t)}):this.setState({focusedKeys:n.concat([t]),visibleKeys:a.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var r=t.filter((function(e){return e.visible}));return e.map((function(e){var t={date:e.date};return r.forEach((function(r){t[r.key]=e[r.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,r=t.path,n=t.query,a=t.onIntervalChange,o=void 0===a?l.noop:a,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({interval:e},r,n),o(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,r=e.allowedIntervals;if(!r||r.length<1)return null;!0===r.includes("quarter")&&r.splice(r.indexOf("quarter"),1);var o={hour:Object(a.__)("By hour","funnel-builder"),day:Object(a.__)("By day","funnel-builder"),week:Object(a.__)("By week","funnel-builder"),month:Object(a.__)("By month","funnel-builder"),quarter:Object(a.__)("By quarter","funnel-builder"),year:Object(a.__)("By year","funnel-builder")};return Object(n.createElement)(f.SelectControl,{value:t,options:r.map((function(e){return{value:e,label:o[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,r=e.mode,n=e.isViewportWide;return t||(n&&"time-comparison"===r?"top":n&&"item-comparison"===r?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,r=e.visibleKeys,o=e.width,c=this.props,u=c.baseValue,b=c.chartType,d=c.data,y=c.dateParser,m=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,j=c.isRequesting,w=c.isViewportLarge,E=c.itemsLabel,S=c.mode,_=c.query,C=c.screenReaderFormat,R=c.showHeaderControls,T=c.title,x=c.tooltipLabelFormat,F=c.tooltipValueFormat,D=c.tooltipTitle,N=c.valueType,q=c.xFormat,I=c.x2Format,A=c.yBelow1Format,B=c.yFormat,M=c.hideTypeSelect,L=c.className,V=c.customHeaderItem,Y=v?Object(h.e)(_[v]):[],U=this.getOrderedKeys(t,r,Y),H=j?null:this.getVisibleData(d,U),K=this.getLegendPosition(),Q="top"===K?"row":"column",W="side"===K?"row":"column",z=this.getChartHeight(),$=j?null:Object(n.createElement)(Ie,{colorScheme:p.a,data:U,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:Q,legendValueFormat:F,totalLabel:Object(a.sprintf)(E,U.length)}),G=B,J=A;if(!B)switch(N){case"average":G=",.0f";break;case"currency":G="$.3~s",J="$.3~f";break;case"number":G=",.0f"}return Object(n.createElement)("div",{className:i()("bwf-chart",L)},R&&Object(n.createElement)("div",{className:"bwf-chart-header"},Object(n.createElement)(P.a,{className:"bwf-chart-title"},T),"top"===K&&$,V,this.renderIntervalSelector(),!M&&Object(n.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===b}),title:Object(a.__)("Line chart","funnel-builder"),"aria-checked":"line"===b,role:"menuitemradio",tabIndex:"line"===b?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"line")},Object(n.createElement)(s.a,{icon:"line-graph"})),Object(n.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===b}),title:Object(a.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===b,role:"menuitemradio",tabIndex:"bar"===b?0:-1,onClick:Object(l.partial)(this.handleTypeToggle,"bar")},Object(n.createElement)(s.a,{icon:"stats-alt"})))),Object(n.createElement)(P.b,{component:!1},Object(n.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(W)),ref:this.chartBodyRef},"side"===K&&$,j&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"screen-reader-text"},Object(a.__)("Your requested data is loading","funnel-builder")),Object(n.createElement)(k,{height:z})),!j&&o>0&&Object(n.createElement)(Pe,{baseValue:u,chartType:b,colorScheme:p.a,data:H,dateParser:y,height:z,emptyMessage:m,interval:O,margin:{bottom:50,left:80,right:30,top:0},mode:S,orderedKeys:U,screenReaderFormat:C,tooltipLabelFormat:x,tooltipValueFormat:F,tooltipPosition:w?"over":"below",tooltipTitle:D,valueType:N,width:"row"===W?o-320:o,xFormat:q,x2Format:I,yBelow1Format:J,yFormat:G})),"bottom"===K&&Object(n.createElement)("div",{className:"bwf-chart-footer"},$)))}}])&&Le(t.prototype,r),o&&Le(t,o),d}(n.Component);We.propTypes={allowedIntervals:y.a.array,baseValue:y.a.number,chartType:y.a.oneOf(["bar","line"]),data:y.a.array.isRequired,dateParser:y.a.string.isRequired,emptyMessage:y.a.string,filterParam:y.a.string,itemsLabel:y.a.string,mode:y.a.oneOf(["item-comparison","time-comparison"]),path:y.a.string,query:y.a.object,interactiveLegend:y.a.bool,interval:y.a.oneOf(["hour","day","week","month","quarter","year"]),intervalData:y.a.object,isRequesting:y.a.bool,legendPosition:y.a.oneOf(["bottom","side","top"]),legendTotals:y.a.object,screenReaderFormat:y.a.oneOfType([y.a.string,y.a.func]),showHeaderControls:y.a.bool,title:y.a.string,tooltipLabelFormat:y.a.oneOfType([y.a.string,y.a.func]),tooltipValueFormat:y.a.oneOfType([y.a.string,y.a.func]),tooltipTitle:y.a.string,valueType:y.a.string,xFormat:y.a.string,x2Format:y.a.string,yBelow1Format:y.a.string,yFormat:y.a.string,currency:y.a.object},We.defaultProps={baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:""};t.a=Object(m.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(We)},238:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(6),i=r(9),c=r.n(i),l=r(10),u=r(141),s=r(64),f=r.n(s),p=r(5),b=r(170),d=r.n(b),y=r(137),m=r.n(y),h=r(14),v=r.n(h),g=r(152),O=r(16);function j(e){var t="";return function e(r){if(Object(o.isString)(r)||Object(o.isNumber)(r))t+=r;else if(Object(o.isArray)(r))r.forEach(e);else if(r&&r.props){var n=r.props.children;Object(o.isArray)(n)?n.forEach(e):e(n)}}(e),t}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=R(e);if(t){var a=R(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return C(e)}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(c,e);var t,r,a,i=k(c);function c(e){var t,r=e.filter,n=e.config,a=e.onFilterChange;E(this,c),t=i.apply(this,arguments);var o=n.input.options;return t.state={options:o},t.updateOptions=t.updateOptions.bind(C(t)),!o&&n.input.getOptions&&n.input.getOptions().then(t.updateOptions).then((function(e){if(!r.value){var t=Object(l.c)(n,e);a(r.key,"value",t)}})),t}return t=c,(r=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var r=Object(o.find)(t.rules,{value:e.rule})||{},a=Object(o.find)(t.input.options,{value:e.value})||{};return j(m()({mixedString:t.labels.title,components:{filter:Object(n.createElement)(n.Fragment,null,a.label),rule:Object(n.createElement)(n.Fragment,null,r.label),title:Object(n.createElement)(n.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.config,a=e.filter,i=e.onFilterChange,c=e.isEnglish,l=this.state.options,u=a.key,s=a.rule,f=a.value,b=r.labels,d=r.rules,y=m()({mixedString:b.title,components:{title:Object(n.createElement)("span",{className:t}),rule:Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:d,value:s,onChange:Object(o.partial)(i,u,"rule"),"aria-label":b.rule}),filter:l?Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-input"),options:l,value:f,onChange:Object(o.partial)(i,a.key,"value"),"aria-label":b.filter}):Object(n.createElement)(p.Spinner,null)}}),h=this.getScreenReaderText(a,r);return Object(n.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(n.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(n.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},y),h&&Object(n.createElement)("span",{className:"screen-reader-text"},h))}}])&&S(t.prototype,r),a&&S(t,a),c}(n.Component);T.propTypes={config:c.a.shape({labels:c.a.shape({rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.string}).isRequired,onFilterChange:c.a.func.isRequired};var x=T,F=r(146);function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function I(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=U(e);if(t){var a=U(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return V(this,r)}}function V(e,t){if(t&&("object"===D(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Y(e)}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(c,e);var t,r,a,i=L(c);function c(e){var t,r=e.filter,n=e.config,a=e.query;return A(this,c),(t=i.apply(this,arguments)).onSearchChange=t.onSearchChange.bind(Y(t)),t.state={selected:[]},t.updateLabels=t.updateLabels.bind(Y(t)),r.value.length&&n.input.getLabels(r.value,a).then((function(e){var r=e.map((function(e){return q({key:e.id},e)}));t.updateLabels(r)})),t}return t=c,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.config,n=t.filter,a=t.query,i=e.filter;if(n.value.length&&!Object(o.isEqual)(i,n)){var c=this.state.selected.map((function(e){return e.key}));Object(l.e)(n.value).every((function(e){return!c.includes(e)}))&&r.input.getLabels(n.value,a).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),r=e.map((function(e){return e.key}));Object(o.isEqual)(r.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,r=t.filter,n=t.onFilterChange,a=e.map((function(e){return e.key})).join(",");n(r.key,"value",a)}},{key:"getScreenReaderText",value:function(e,t){var r=this.state.selected;if(0===r.length)return"";var a=Object(o.find)(t.rules,{value:e.rule})||{},i=r.map((function(e){return e.label})).join(", ");return j(m()({mixedString:t.labels.title,components:{filter:Object(n.createElement)(n.Fragment,null,i),rule:Object(n.createElement)(n.Fragment,null,a.label),title:Object(n.createElement)(n.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.config,a=e.filter,i=e.onFilterChange,c=e.isEnglish,l=this.state.selected,u=a.key,s=a.rule,f=r.input,b=r.labels,d=r.rules,y=m()({mixedString:b.title,components:{title:Object(n.createElement)("span",{className:t}),rule:Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:d,value:s,onChange:Object(o.partial)(i,u,"rule"),"aria-label":b.rule}),filter:Object(n.createElement)(F.a,{className:v()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:f.type,placeholder:b.placeholder,selected:l,inlineTags:!0,"aria-label":b.filter})}}),h=this.getScreenReaderText(a,r);return Object(n.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(n.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(n.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},y),h&&Object(n.createElement)("span",{className:"screen-reader-text"},h))}}])&&B(t.prototype,r),a&&B(t,a),c}(n.Component);H.propTypes={config:c.a.shape({labels:c.a.shape({placeholder:c.a.string,rule:c.a.string,title:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.string}).isRequired,onFilterChange:c.a.func.isRequired,query:c.a.object};var K=H,Q=r(213);function W(e){return(W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=te(e);if(t){var a=te(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ee(this,r)}}function ee(e,t){if(t&&("object"===W(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function te(e){return(te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(l,e);var t,r,i,c=Z(l);function l(){return G(this,l),c.apply(this,arguments)}return t=l,(r=[{key:"getBetweenString",value:function(){return Object(a._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var r=this.props.currency,a=Object(o.find)(t.rules,{value:e.rule})||{},i=z(Object(o.isArray)(e.value)?e.value:[e.value],2),c=i[0],l=i[1];if(!c||"between"===a.value&&!l)return"";if("currency"===Object(o.get)(t,["input","type"],"number")){var u=f()(r).formatAmount;c=u(c),l=u(l)}var s=c;return"between"===a.value&&(s=m()({mixedString:this.getBetweenString(),components:{rangeStart:Object(n.createElement)(n.Fragment,null,c),rangeEnd:Object(n.createElement)(n.Fragment,null,l),span:Object(n.createElement)(n.Fragment,null)}})),j(m()({mixedString:t.labels.title,components:{filter:Object(n.createElement)(n.Fragment,null,s),rule:Object(n.createElement)(n.Fragment,null,a.label),title:Object(n.createElement)(n.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,r=e.value,a=e.label,o=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(n.createElement)(Q.a,{suffix:Object(n.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:r||"","aria-label":a,onChange:o}):Object(n.createElement)(Q.a,{prefix:Object(n.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:r||"","aria-label":a,onChange:o}):Object(n.createElement)(p.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:r||"","aria-label":a,onChange:o})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,r=e.filter,n=e.onFilterChange,i=e.currency,c=i.symbol,l=i.symbolPosition;if("between"===r.rule)return this.getRangeInput();var u=Object(o.get)(t,["input","type"],"number"),s=z(Object(o.isArray)(r.value)?r.value:[r.value],2),f=s[0],p=s[1];Boolean(p)&&n(r.key,"value",f||p);var b="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return b="lessthan"===r.rule?Object(a._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(a._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:u,value:f||p,label:Object(a.sprintf)(b,{field:Object(o.get)(t,["labels","add"])}),onChange:Object(o.partial)(n,r.key,"value"),currencySymbol:c,symbolPosition:l})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,r=e.filter,i=e.onFilterChange,c=e.currency,l=c.symbol,u=c.symbolPosition,s=Object(o.get)(t,["input","type"],"number"),f=z(Object(o.isArray)(r.value)?r.value:[r.value],2),p=f[0],b=f[1];return m()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:s,value:p||"",label:Object(a.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(a.__)("%(field)s range start","funnel-builder"),{field:Object(o.get)(t,["labels","add"])}),onChange:function(e){i(r.key,"value",[e,b])},currencySymbol:l,symbolPosition:u}),rangeEnd:this.getFormControl({type:s,value:b||"",label:Object(a.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(a.__)("%(field)s range end","funnel-builder"),{field:Object(o.get)(t,["labels","add"])}),onChange:function(e){i(r.key,"value",[p,e])},currencySymbol:l,symbolPosition:u}),span:Object(n.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.config,a=e.filter,i=e.onFilterChange,c=e.isEnglish,l=a.key,u=a.rule,s=r.labels,f=r.rules,b=m()({mixedString:s.title,components:{title:Object(n.createElement)("span",{className:t}),rule:Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:f,value:u,onChange:Object(o.partial)(i,l,"rule"),"aria-label":s.rule}),filter:Object(n.createElement)("div",{className:v()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===u})},this.getFilterInputs())}}),d=this.getScreenReaderText(a,r);return Object(n.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(n.createElement)("legend",{className:"screen-reader-text"},s.add||""),Object(n.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},b),d&&Object(n.createElement)("span",{className:"screen-reader-text"},d))}}])&&J(t.prototype,r),i&&J(t,i),l}(n.Component),ne=r(40),ae=r.n(ne),oe=(r(202),r(203),r(62)),ie=(r(150),r(164)),ce=r(138);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=de(e);if(t){var a=de(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return pe(this,r)}}function pe(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return be(e)}function be(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(l,e);var t,r,i,c=fe(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=c.call(this,e)).onDateChange=t.onDateChange.bind(be(t)),t.onInputChange=t.onInputChange.bind(be(t)),t}return t=l,(r=[{key:"handleKeyDown",value:function(e,t,r){var n=r.keyCode;oe.TAB===n&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var r=this.props,n=r.onUpdate,a=r.dateFormat,o=ae()(t);n({date:o,text:t?o.format(a):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,r=this.props.dateFormat,n=Object(u.i)(r,t),a=n?null:u.b.invalid;this.props.onUpdate({date:n,text:t,error:t.length>0?a:null})}},{key:"render",value:function(){var e=this,t=this.props,r=t.date,i=t.disabled,c=t.text,l=t.dateFormat,u=t.error,s=t.isInvalidDate;return Object(n.createElement)(p.Dropdown,{position:"bottom center",focusOnMount:!1,renderToggle:function(t){var r=t.isOpen,s=t.onToggle;return Object(n.createElement)(ie.a,{disabled:i,value:c,onChange:e.onInputChange,dateFormat:l,label:Object(a.__)("Choose a date","funnel-builder"),error:u,describedBy:Object(a.sprintf)(Object(a.__)("Date input describing a selected date in format %s","funnel-builder"),l),onFocus:Object(o.partial)(e.handleFocus,r,s),"aria-expanded":r,focusOnMount:!1,onKeyDown:Object(o.partial)(e.handleKeyDown,r,s),errorPosition:"top center"})},renderContent:function(t){var i=t.onToggle;return Object(n.createElement)(ce.b,{component:!1},Object(n.createElement)(ce.a,{className:"bwf-calendar-date-picker-title"},Object(a.__)("select a date","funnel-builder")),Object(n.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(n.createElement)(p.DatePicker,{currentDate:r,onChange:Object(o.partial)(e.onDateChange,i),isInvalidDate:s})))}})}}])&&ue(t.prototype,r),i&&ue(t,i),l}(n.Component);ye.propTypes={date:c.a.object,disabled:c.a.bool,text:c.a.string,error:c.a.string,onUpdate:c.a.func.isRequired,dateFormat:c.a.string.isRequired,isInvalidDate:c.a.func};var me=ye;function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Pe(e);if(t){var a=Pe(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return _e(this,r)}}function _e(e,t){if(t&&("object"===he(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ke(e)}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=Object(a.__)("MMM D, YYYY","funnel-builder"),Re=Object(a.__)("MM/DD/YYYY","funnel-builder"),Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(l,e);var t,r,i,c=Se(l);function l(e){var t,r=e.filter;je(this,l),t=c.apply(this,arguments);var n=Array.isArray(r.value)?r.value:[null,r.value],a=ge(n,2),o=a[0],i=a[1],s=o?Object(u.i)(u.h,o):null,f=i?Object(u.i)(u.h,i):null;return t.state={before:f,beforeText:f?f.format(Re):"",beforeError:null,after:s,afterText:s?s.format(Re):"",afterError:null},t.onSingleDateChange=t.onSingleDateChange.bind(ke(t)),t.onRangeDateChange=t.onRangeDateChange.bind(ke(t)),t.onRuleChange=t.onRuleChange.bind(ke(t)),t}return t=l,(r=[{key:"getBetweenString",value:function(){return Object(a._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var r=Object(o.find)(t.rules,{value:e.rule})||{},a=this.state,i=a.before,c=a.after;if(!i||"between"===r.value&&!c)return"";var l=i.format(Ce);return"between"===r.value&&(l=m()({mixedString:this.getBetweenString(),components:{after:Object(n.createElement)(n.Fragment,null,c.format(Ce)),before:Object(n.createElement)(n.Fragment,null,i.format(Ce)),span:Object(n.createElement)(n.Fragment,null)}})),j(m()({mixedString:t.labels.title,components:{filter:Object(n.createElement)(n.Fragment,null,l),rule:Object(n.createElement)(n.Fragment,null,r.label),title:Object(n.createElement)(n.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,r=e.text,n=e.error,a=this.props,o=a.filter,i=a.onFilterChange;this.setState({before:t,beforeText:r,beforeError:n}),t&&i(o.key,"value",t.format(u.h))}},{key:"onRangeDateChange",value:function(e,t){var r,n=t.date,a=t.text,o=t.error,i=this.props,c=i.filter,l=i.onFilterChange;if(this.setState((ve(r={},e,n),ve(r,e+"Text",a),ve(r,e+"Error",o),r)),n){var s=this.state,f=s.before,p=s.after,b=null,d=null;"after"===e&&(b=n.format(u.h),d=f?f.format(u.h):null),"before"===e&&(b=p?p.format(u.h):null,d=n.format(u.h)),b&&d&&l(c.key,"value",[b,d])}}},{key:"isFutureDate",value:function(e){return ae()().isBefore(ae()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,r=t.before,a=t.beforeText,i=t.beforeError,c=t.after,l=t.afterText,u=t.afterError;return"between"===e.rule?m()({mixedString:this.getBetweenString(),components:{after:Object(n.createElement)(me,{date:c,text:l,error:u,onUpdate:Object(o.partial)(this.onRangeDateChange,"after"),dateFormat:Re,isInvalidDate:this.isFutureDate}),before:Object(n.createElement)(me,{date:r,text:a,error:i,onUpdate:Object(o.partial)(this.onRangeDateChange,"before"),dateFormat:Re,isInvalidDate:this.isFutureDate}),span:Object(n.createElement)("span",{className:"separator"})}}):Object(n.createElement)(me,{date:r,text:a,error:i,onUpdate:this.onSingleDateChange,dateFormat:Re,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,r=t.onFilterChange,n=t.filter,a=t.updateFilter,o=this.state.before;"between"===n.rule&&"between"!==e?a({key:n.key,rule:e,value:o?o.format(u.h):void 0}):r(n.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.config,a=e.filter,o=e.isEnglish,i=a.rule,c=r.labels,l=r.rules,u=this.getScreenReaderText(a,r),s=m()({mixedString:c.title,components:{title:Object(n.createElement)("span",{className:t}),rule:Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:l,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(n.createElement)("div",{className:v()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(n.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(n.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(n.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":o})},s),u&&Object(n.createElement)("span",{className:"screen-reader-text"},u))}}])&&we(t.prototype,r),i&&we(t,i),l}(n.Component),xe=r(11),Fe=r.n(xe),De=r(159);function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ie=function(e){var t=e.className,r=e.config,i=e.filter,c=e.isEnglish,l=e.onFilterChange,u=i.key,s=i.rule,f=i.value,b=r.labels,d=r.rules,y=Ne(Object(n.useState)([]),2),h=y[0],g=y[1];Object(n.useEffect)((function(){Fe()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,r=e.name;return{key:t.toString(),label:r}}))})).then(g)}),[]);var O=Ne(Object(n.useState)(Array.isArray(f)?f[0]:""),2),w=O[0],E=O[1];Object(n.useEffect)((function(){Array.isArray(f)&&E(f[0])}),[f]);var S=Ne(Object(n.useState)([]),2),_=S[0],k=S[1];Object(n.useEffect)((function(){w&&(k([]),Fe()({path:"/wc/v3/products/attributes/".concat(w,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,r=e.name;return{key:t.toString(),label:r}}))})).then(k))}),[w]);var P=Ne(Object(n.useState)(Array.isArray(f)&&f[1]||""),2),C=P[0],R=P[1],T=function(e){var t=e.attributes,r=e.attributeTerms,o=e.config,i=e.filter,c=e.selectedAttribute,l=e.selectedAttributeTerm;if(0===t.length||0===r.length||""===c||""===l)return"";var u=Array.isArray(o.rules)&&o.rules.find((function(e){return e.value===i.rule}))||{},s=t.find((function(e){return e.key===c})).label,f=r.find((function(e){return e.key===l})).label,p=m()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(a.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(n.createElement)(n.Fragment,null,s),equals:Object(n.createElement)(n.Fragment,null,u.label),value:Object(n.createElement)(n.Fragment,null,f)}});return j(m()({mixedString:o.labels.title,components:{filter:Object(n.createElement)(n.Fragment,null,p),rule:Object(n.createElement)(n.Fragment,null),title:Object(n.createElement)(n.Fragment,null)}}))}({attributes:h,attributeTerms:_,config:r,filter:i,selectedAttribute:w,selectedAttributeTerm:C});return Object(n.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(n.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(n.createElement)("div",{className:v()("bwf-filters-advanced-fieldset",{"is-english":c})},m()({mixedString:b.title,components:{title:Object(n.createElement)("span",{className:t}),rule:Object(n.createElement)(p.SelectControl,{className:v()(t,"bwf-filters-advanced-rule"),options:d,value:s,onChange:Object(o.partial)(l,u,"rule"),"aria-label":b.rule}),filter:Object(n.createElement)("div",{className:v()(t,"bwf-filters-advanced-attribute-fieldset")},h.length>0?Object(n.createElement)(De.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(a.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:h,selected:w,onChange:function(e){"string"!=typeof e&&(e=""),E(e),R(""),l(u,"value",[e])}}):Object(n.createElement)(p.Spinner,null),h.length>0&&""!==w&&(_.length?Object(n.createElement)(n.Fragment,null,Object(n.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(n.createElement)(De.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(a.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:_,selected:C,onChange:function(e){"string"!=typeof e&&(e=""),R(e),l(u,"value",[w,e])}})):Object(n.createElement)(p.Spinner,null)))}})),T&&Object(n.createElement)("span",{className:"screen-reader-text"},T))};Ie.propTypes={config:c.a.shape({labels:c.a.shape({rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}).isRequired,filter:c.a.shape({key:c.a.string,rule:c.a.string,value:c.a.arrayOf(c.a.oneOfType([c.a.string,c.a.number]))}).isRequired,onFilterChange:c.a.func.isRequired};var Ae=Ie;r(221);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(r),!0).forEach((function(t){Ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Me(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ve(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function He(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function We(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Ge(e);if(t){var a=Ge(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ze(this,r)}}function ze(e,t){if(t&&("object"===Be(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $e(e)}function $e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Je=[{value:"all",label:Object(a.__)("All","funnel-builder")},{value:"any",label:Object(a.__)("Any","funnel-builder")}],Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(u,e);var t,r,i,c=We(u);function u(e){var t,r=e.query,a=e.config;return He(this,u),(t=c.apply(this,arguments)).state={match:r.match||"all",activeFilters:Object(l.b)(r,a.filters)},t.filterListRef=Object(n.createRef)(),t.onMatchChange=t.onMatchChange.bind($e(t)),t.onFilterChange=t.onFilterChange.bind($e(t)),t.getAvailableFilterKeys=t.getAvailableFilterKeys.bind($e(t)),t.addFilter=t.addFilter.bind($e(t)),t.removeFilter=t.removeFilter.bind($e(t)),t.clearFilters=t.clearFilters.bind($e(t)),t.getUpdateHref=t.getUpdateHref.bind($e(t)),t.updateFilter=t.updateFilter.bind($e(t)),t.onFilter=t.onFilter.bind($e(t)),t}return t=u,(r=[{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.config,n=t.query,a=e.query;Object(o.isEqual)(a,n)||this.setState({activeFilters:Object(l.b)(n,r.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,r){var n=this.state.activeFilters.map((function(n){return e===n.key?Object.assign({},n,Ue({},t,r)):n}));this.setState({activeFilters:n})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,r=Ve(this.state.activeFilters),n=Object(o.findIndex)(r,(function(t){return t.key===e}));t("remove",r[n]),r.splice(n,1),this.setState({activeFilters:r}),0===r.length&&Object(l.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return m()({mixedString:t.title,components:{select:Object(n.createElement)(p.SelectControl,{className:"bwf-filters-advanced-title-select",options:Je,value:e,onChange:this.onMatchChange,"aria-label":Object(a.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(o.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var r=this,n=this.props,a=n.onAdvancedFilterAction,o=n.config.filters[e],i={key:e};Array.isArray(o.rules)&&o.rules.length&&(i.rule=o.rules[0].value),o.input&&o.input.options&&(i.value=Object(l.c)(o,o.input.options)),o.input&&"Search"===o.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(Ve(e.activeFilters),[i])}})),a("add",i),t(),setTimeout((function(){r.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var r=this.props,n=r.path,a=r.query,o=r.config,i=Object(l.j)(e,a,o.filters),c="all"===t?void 0:t;return Object(l.f)(Le(Le({},i),{},{match:c}),n,a)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,r=e.query,n=e.config,a=this.state,o=a.activeFilters,i=a.match;t("filter",Le(Le({},Object(l.j)(o,r,n.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var r=window.location.search,n=r.indexOf(e.key),a=r.indexOf(t.key);return-1===n||-1===a?0:n-a}},{key:"render",value:function(){var e=this,t=this.props,r=t.config,i=t.query,c=t.currency,l=this.state,u=l.activeFilters,s=l.match,f=this.getAvailableFilterKeys(),b=this.getUpdateHref(u,s),y="admin.php"+window.location.search===b||0===u.length,m=this.isEnglish();return Object(n.createElement)(g.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(n.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},u.sort(this.orderFilters).map((function(t){var a=t.key,l=r.filters[a],u=l.input,s=l.labels;return Object(n.createElement)("li",{className:"bwf-filters-advanced-list-item",key:a},"SelectControl"===u.component&&Object(n.createElement)(x,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:r.filters[a],onFilterChange:e.onFilterChange,isEnglish:m}),"Search"===u.component&&Object(n.createElement)(K,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:r.filters[a],onFilterChange:e.onFilterChange,isEnglish:m,query:i}),"Number"===u.component&&Object(n.createElement)(re,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:r.filters[a],onFilterChange:e.onFilterChange,isEnglish:m,query:i,currency:c}),"Currency"===u.component&&Object(n.createElement)(re,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:Le(Le({},r.filters[a]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:m,query:i,currency:c}),"Date"===u.component&&Object(n.createElement)(Te,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:r.filters[a],onFilterChange:e.onFilterChange,isEnglish:m,query:i,updateFilter:e.updateFilter}),"ProductAttribute"===u.component&&Object(n.createElement)(Ae,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:r.filters[a],onFilterChange:e.onFilterChange,isEnglish:m,query:i,updateFilter:e.updateFilter}),Object(n.createElement)(p.Button,{className:v()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:s.remove,onClick:Object(o.partial)(e.removeFilter,a)},Object(n.createElement)(d.a,{icon:"cross-small"})))}))),f.length>0&&Object(n.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(n.createElement)(p.Dropdown,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(n.createElement)(p.Button,{className:"bwf-filters-advanced-add-button",onClick:r,"aria-expanded":t},Object(n.createElement)(d.a,{icon:"add-outline"}),Object(a.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var a=t.onClose;return Object(n.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},f.map((function(t){return Object(n.createElement)("li",{key:t},Object(n.createElement)(p.Button,{onClick:Object(o.partial)(e.addFilter,t,a)},r.filters[t].labels.add))})))}})),Object(n.createElement)("div",{className:"bwf-filters-advanced-controls"},y&&Object(n.createElement)(p.Button,{isPrimary:!0,disabled:!0},Object(a.__)("Filter","funnel-builder")),!y&&Object(n.createElement)(O.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:b,onClick:this.onFilter},Object(a.__)("Filter","funnel-builder")),u.length>0&&Object(n.createElement)(O.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(a.__)("Clear all filters","funnel-builder"))))}}])&&Ke(t.prototype,r),i&&Ke(t,i),u}(n.Component);Xe.propTypes={config:c.a.shape({title:c.a.string,filters:c.a.objectOf(c.a.shape({labels:c.a.shape({add:c.a.string,remove:c.a.string,rule:c.a.string,title:c.a.string,filter:c.a.string}),rules:c.a.arrayOf(c.a.object),input:c.a.object}))}).isRequired,path:c.a.string.isRequired,query:c.a.object,onAdvancedFilterAction:c.a.func,siteLocale:c.a.string,currency:c.a.object.isRequired},Xe.defaultProps={query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"};var Ze=Xe,et=function(e){var t=e.className,r=e.count,a=e.children,o=e.disabled,i=e.helpText,c=e.onClick;return!o&&r<2?Object(n.createElement)(p.Tooltip,{text:i},Object(n.createElement)("span",{className:t},Object(n.createElement)(p.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},a))):Object(n.createElement)(p.Button,{className:v()("bwf-compare-button",t),onClick:c,disabled:o,isSecondary:!0},a)};et.propTypes={className:c.a.string,count:c.a.number.isRequired,children:c.a.node.isRequired,helpText:c.a.string.isRequired,onClick:c.a.func.isRequired,disabled:c.a.bool};var tt=et;function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function at(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=st(e);if(t){var a=st(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return lt(this,r)}}function lt(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ut(e)}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function st(e){return(st=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(u,e);var t,r,i,c=ct(u);function u(e){var t,r=e.getLabels,n=e.param,a=e.query;return at(this,u),(t=c.apply(this,arguments)).state={selected:[]},t.clearQuery=t.clearQuery.bind(ut(t)),t.updateQuery=t.updateQuery.bind(ut(t)),t.updateLabels=t.updateLabels.bind(ut(t)),a[n]&&r(a[n],a).then(t.updateLabels),t}return t=u,(r=[{key:"componentDidUpdate",value:function(e,t){var r=e.param,n=e.query,a=t.selected,i=this.props,c=i.getLabels,u=i.param,s=i.query,f=this.state.selected;if(r!==u||a.length>0&&0===f.length)this.clearQuery();else{var p=Object(l.e)(n[u]),b=Object(l.e)(s[u]);Object(o.isEqual)(p.sort(),b.sort())||c(s[u],s).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,r=e.path,n=e.query;this.setState({selected:[]}),Object(l.k)(nt({},t,void 0),r,n)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,r=e.path,n=e.query,a=this.state.selected.map((function(e){return e.key}));Object(l.k)(nt({},t,a.join(",")),r,n)}},{key:"render",value:function(){var e=this,t=this.props,r=t.labels,o=t.type,i=this.state.selected;return Object(n.createElement)(g.a,{title:r.title,className:"bwf-filters-compare bwf-analytics-card"},Object(n.createElement)("div",{className:"bwf-filters-compare-body"},Object(n.createElement)(F.a,{type:o,selected:i,placeholder:r.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(n.createElement)("div",{className:"bwf-filters-compare-footer"},Object(n.createElement)(tt,{count:i.length,helpText:r.helpText,onClick:this.updateQuery},r.update),i.length>0&&Object(n.createElement)(p.Button,{isLink:!0,onClick:this.clearQuery},Object(a.__)("Clear all","funnel-builder"))))}}])&&ot(t.prototype,r),i&&ot(t,i),u}(n.Component);ft.propTypes={getLabels:c.a.func.isRequired,labels:c.a.shape({placeholder:c.a.string,title:c.a.string,update:c.a.string}),param:c.a.string.isRequired,path:c.a.string.isRequired,query:c.a.object,type:c.a.string.isRequired},ft.defaultProps={labels:{},query:{}};var pt=r(183),bt=r(130),dt=r(511),yt=r(652),mt=r(173),ht=r(165);r(222);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ot(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(r),!0).forEach((function(t){jt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Et(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function St(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Rt(e);if(t){var a=Rt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Pt(this,r)}}function Pt(e,t){if(t&&("object"===vt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(u,e);var t,r,i,c=kt(u);function u(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=(t=c.call(this,e)).getFilter();if(t.state={nav:r.path||[],animate:null,selectedTag:null},t.selectSubFilter=t.selectSubFilter.bind(Ct(t)),t.getVisibleFilters=t.getVisibleFilters.bind(Ct(t)),t.updateSelectedTag=t.updateSelectedTag.bind(Ct(t)),t.onTagChange=t.onTagChange.bind(Ct(t)),t.onContentMount=t.onContentMount.bind(Ct(t)),t.goBack=t.goBack.bind(Ct(t)),r.settings&&r.settings.getLabels){var n=t.props.query,a=r.settings,o=a.param;(0,a.getLabels)(n[o],n).then(t.updateSelectedTag)}return t}return t=u,(r=[{key:"componentDidUpdate",value:function(e){var t=e.query,r=this.props,n=r.query,a=r.config;if(t[a.param]!==n[[a.param]]){var o=this.getFilter();if(o&&"Search"===o.component){this.setState({nav:o.path||[]});var i=o.settings,c=i.param;(0,i.getLabels)(n[c],n).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,r=t.config,n=t.query,a=Object(l.a)(r.filters);return e=e||n[r.param]||r.defaultValue||"all",Object(o.find)(a,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(o.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var r=t[0],n=Object(o.find)(e,{value:r});return this.getVisibleFilters(n&&n.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(wt(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.props,n=r.path,a=r.query,o=r.config,i=r.onFilterSelect,c=Object(l.h)(a),u=Ot(jt({},o.param,(o.defaultValue||"all")===e?void 0:e),t);o.staticParams.forEach((function(e){u[e]=a[e]})),Object(l.k)(u,n,c),i(u)}},{key:"onTagChange",value:function(e,t,r,n){var a=Object(o.last)(n),i=e.value,c=e.settings.param;a?(this.update(i,jt({},c,a.key)),t()):this.update(r.defaultValue||"all"),this.updateSelectedTag([a])}},{key:"renderButton",value:function(e,t,r){var a=this;if(e.component){var i=e.settings,c=i.type,l=i.labels,u=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(n.createElement)(F.a,{className:"bwf-filters-filter-search",type:c,placeholder:l.placeholder,selected:u?[u]:[],onChange:Object(o.partial)(this.onTagChange,e,t,r),inlineTags:!0,staticResults:!0})}var s=Object(o.partial)(this.selectSubFilter,e.value),f=this.getFilter(),b=f.value===e.value||f.path&&Object(o.includes)(f.path,e.value);return Object(n.createElement)(p.Button,{className:"bwf-filters-filter-button",onClick:function(r){b?t(r):e.subFilters?s(r):function(r){t(r),a.update(e.value,e.query||{}),a.setState({selectedTag:null})}(r)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,r=t.length&&this.getFilter(t[t.length-1])?1:0,n=bt.focus.tabbable.find(e)[r];setTimeout((function(){n.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,r=this.state,i=r.nav,c=r.animate,l=this.getVisibleFilters(t.filters,i),u=!!i.length&&this.getFilter(i[i.length-1]),s=this.getFilter();return Object(n.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(n.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(n.createElement)(p.Dropdown,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(a.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var r=t.isOpen,a=t.onToggle;return Object(n.createElement)(ht.a,{onClick:a,isOpen:r,labels:e.getButtonLabel(s)})},renderContent:function(r){var a=r.onClose;return Object(n.createElement)(mt.a,{animationKey:i,animate:c,onExited:e.onContentMount},(function(){return Object(n.createElement)("ul",{className:"bwf-filters-filter-content-list"},u&&Object(n.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(n.createElement)(p.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(n.createElement)(dt.a,{icon:yt.a}),u.label)),l.map((function(r){return Object(n.createElement)("li",{key:r.value,className:v()("bwf-filters-filter-content-list-item",{"is-selected":s.value===r.value||s.path&&Object(o.includes)(s.path,r.value)})},e.renderButton(r,a,t))})))}))}}))}}])&&St(t.prototype,r),i&&St(t,i),u}(n.Component);Tt.propTypes={config:c.a.shape({label:c.a.string,staticParams:c.a.array.isRequired,param:c.a.string.isRequired,defaultValue:c.a.string,showFilters:c.a.func.isRequired,filters:c.a.arrayOf(c.a.shape({chartMode:c.a.oneOf(["item-comparison","time-comparison"]),component:c.a.string,label:c.a.string,path:c.a.string,subFilters:c.a.array,value:c.a.string.isRequired}))}).isRequired,path:c.a.string.isRequired,query:c.a.object,onFilterSelect:c.a.func},Tt.defaultProps={query:{},onFilterSelect:function(){}};var xt=Tt;r(207);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Nt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qt(e,t){return(qt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Mt(e);if(t){var a=Mt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return At(this,r)}}function At(e,t){if(t&&("object"===Ft(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bt(e)}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qt(e,t)}(s,e);var t,r,i,c=It(s);function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=c.call(this)).renderCard=e.renderCard.bind(Bt(e)),e.onRangeSelect=e.onRangeSelect.bind(Bt(e)),e}return t=s,(r=[{key:"renderCard",value:function(e){var t=this.props,r=t.siteLocale,a=t.advancedFilters,i=t.query,c=t.path,l=t.onAdvancedFilterAction,u=t.currency,s=e.filters,f=e.param;if(!i[f])return null;if(0===i[f].indexOf("compare")){var p=Object(o.find)(s,{value:i[f]});if(!p)return null;var b=p.settings,d=void 0===b?{}:b;return Object(n.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(n.createElement)(ft,Dt({path:c,query:i},d)))}return"advanced"===i[f]?Object(n.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(n.createElement)(Ze,{siteLocale:r,currency:u,config:a,path:c,query:i,onAdvancedFilterAction:l})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,r=t.query,n=t.path,a=t.onDateSelect,o=t.updateQuery,i=void 0===o||o;e.after&&(e.after=ae()(Object(u.a)(ae()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(ae()(ae()().format("YYYY-MM-DD")).isSame(e.before)?e.before=ae()(Object(u.a)(ae()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=ae()(Object(u.a)(ae()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(l.k)(e,n,r),a(e)}},{key:"getDateQuery",value:function(e){var t=Object(u.f)(e),r=t.period,n=t.compare,a=t.before,o=t.after,i=Object(u.d)(e);return{period:r,compare:n,before:a,after:o,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,r=e.filters,o=e.query,i=e.path,c=e.showDatePicker,l=e.onFilterSelect,u=e.isoDateFormat;return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(ce.a,{className:"screen-reader-text"},Object(a.__)("Filters","funnel-builder")),Object(n.createElement)(ce.b,{component:"div",className:"bwf-filters"},Object(n.createElement)("div",{className:"bwf-filters-basic-filters"},c&&Object(n.createElement)(pt.a,{key:JSON.stringify(o),dateQuery:t||this.getDateQuery(o),onRangeSelect:this.onRangeSelect,isoDateFormat:u}),r.map((function(e){return e.showFilters(o)?Object(n.createElement)(xt,{key:e.param,config:e,query:o,path:i,onFilterSelect:l}):null}))),r.map(this.renderCard)))}}])&&Nt(t.prototype,r),i&&Nt(t,i),s}(n.Component);Lt.propTypes={siteLocale:c.a.string,advancedFilters:c.a.object,filters:c.a.array,path:c.a.string.isRequired,query:c.a.object,showDatePicker:c.a.bool,onDateSelect:c.a.func,onFilterSelect:c.a.func,onAdvancedFilterAction:c.a.func,currency:c.a.object,dateQuery:c.a.shape({period:c.a.string.isRequired,compare:c.a.string.isRequired,before:c.a.object,after:c.a.object,primaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired}).isRequired,secondaryDate:c.a.shape({label:c.a.string.isRequired,range:c.a.string.isRequired})}),isoDateFormat:c.a.string},Lt.defaultProps={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:f()().getCurrencyConfig()};t.a=Lt},253:function(e,t,r){},254:function(e,t,r){"use strict";var n=r(0),a=r(5),o=r(1),i=r(14),c=r.n(i),l=r(170),u=r.n(l),s=r(6),f=r(9),p=r.n(f),b=r(16),d=r(60),y=function(e){var t,r=e.delta,i=e.href,l=e.hrefType,f=e.isOpen,p=e.label,y=e.onToggle,m=e.prevLabel,h=e.prevValue,v=e.reverseTrend,g=e.selected,O=e.value,j=e.onLinkClickCallback,w=e.tileIcon,E=c()("bwf-summary-item-container",{"is-dropdown-button":y,"is-dropdown-expanded":f}),S=c()("bwf-summary-item",{"is-selected":g,"is-good-trend":v?r<0:r>0,"is-bad-trend":v?r>0:r<0}),_=r>0?Object(o.sprintf)(Object(o.__)("Up %d%% from %s","funnel-builder"),r,m):Object(o.sprintf)(Object(o.__)("Down %d%% from %s","funnel-builder"),Math.abs(r),m);r||(_=Object(o.sprintf)(Object(o.__)("No change from %s","funnel-builder"),m));var k={className:S,"aria-current":g?"page":null};if(y||i){var P=!!y;t=P?a.Button:b.a,P?(k.onClick=y,k["aria-expanded"]=f):(k.href=i,k.role="menuitem",k.onClick=j,k.type=l)}else t="div";return Object(n.createElement)("li",{className:E},Object(n.createElement)(t,k,Object(n.createElement)(d.a,{gap:"5",align:"center"},Object(n.createElement)(d.b,null,Object(n.createElement)("div",{className:"bwf-summary-item-label"},Object(n.createElement)(a.__experimentalText,{variant:"body.small"},p)),Object(n.createElement)("div",{className:"bwf-summary-item-data"},Object(n.createElement)("div",{className:"bwf-summary-item-value"},Object(n.createElement)(a.__experimentalText,{variant:"title.small"},Object(s.isNil)(O)?Object(o.__)("-","funnel-builder"):O)),r&&Object(n.createElement)(a.Tooltip,{text:Object(s.isNil)(h)?Object(o.__)("-","funnel-builder"):"".concat(m," ").concat(h),position:"top center"},Object(n.createElement)("div",{className:"bwf-summary-item-delta",role:"presentation","aria-label":_},Object(n.createElement)(a.__experimentalText,{variant:"caption"},Object(s.isNil)(r)?Object(o.__)("-","funnel-builder"):Object(o.sprintf)(Object(o.__)("%d%%","funnel-builder"),r))))),y?Object(n.createElement)(u.a,{className:"bwf-summary-toggle",icon:"chevron-down",size:24}):null),w&&Object(n.createElement)(d.c,null,w))))};y.propTypes={delta:p.a.number,href:p.a.string,hrefType:p.a.oneOf(["wp-admin","wc-admin","external"]).isRequired,isOpen:p.a.bool,label:p.a.string.isRequired,onToggle:p.a.func,prevLabel:p.a.string,prevValue:p.a.oneOfType([p.a.number,p.a.string]),reverseTrend:p.a.bool,selected:p.a.bool,value:p.a.oneOfType([p.a.number,p.a.string]),onLinkClickCallback:p.a.func},y.defaultProps={href:"",hrefType:"wc-admin",isOpen:!1,prevLabel:Object(o.__)("Previous Period:","funnel-builder"),reverseTrend:!1,selected:!1,onLinkClickCallback:s.noop},t.a=y},255:function(e,t,r){"use strict";var n=r(0),a=r(14),o=r.n(a),i=r(6),c=r(9),l=r.n(c),u=r(88),s=r(187);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=v(e);if(t){var a=v(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return h(this,r)}}function h(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){var t=e.className,r=e.hideDelta;return Object(n.createElement)("li",{"data-testid":"summary-placeholder",className:o()("bwf-summary-item-container is-placeholder",t)},Object(n.createElement)("div",{className:"bwf-summary-item"},Object(n.createElement)("div",{className:"bwf-summary-item-label"}),Object(n.createElement)("div",{className:"bwf-summary-item-data"},Object(n.createElement)("div",{className:"bwf-summary-item-value"}),!r&&Object(n.createElement)("div",{className:"bwf-summary-item-delta"}))))},O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,r,a,c=m(l);function l(){return b(this,l),c.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e,t=this.props,r=t.isDropdownBreakpoint,a=t.hideDelta,c=r?1:this.props.numberOfItems,l=Object(s.a)(c),u=o()("bwf-summary",(p(e={},l,!r),p(e,"is-placeholder",!0),e));return Object(n.createElement)("ul",{className:u,"aria-hidden":"true"},Object(i.range)(c).map((function(e){return Object(n.createElement)(g,{hideDelta:a,key:e})})))}}])&&d(t.prototype,r),a&&d(t,a),l}(n.Component);O.propTypes={numberOfItems:l.a.number.isRequired},O.defaultProps={numberOfRows:5},t.a=Object(u.withViewportMatch)({isDropdownBreakpoint:"< large"})(O)},258:function(e,t,r){"use strict";var n=r(0),a=r(1),o=r(5),i=r(9),c=r.n(i),l=r(88),u=r(14),s=r.n(u),f=r(6),p=r(187);var b=function(e){var t,r,i,c=e.label,l=e.orientation,u=e.itemCount,b=e.items,d=Object(f.uniqueId)("bwf-summary-helptext-"),y=Object(p.a)(u),m=s()("bwf-summary",(i="horizontal"===l,(r=y)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t));return Object(n.createElement)(o.NavigableMenu,{"aria-label":c,"aria-describedby":d,orientation:l,stopNavigationEvents:!0},Object(n.createElement)("p",{id:d,className:"screen-reader-text"},Object(a.__)("List of data points available for filtering. Use arrow keys to cycle through the list. Click a data point for a detailed report.","funnel-builder")),Object(n.createElement)("ul",{className:m},b))};b.propTypes={label:c.a.string,orientation:c.a.oneOf(["vertical","horizontal"]).isRequired,items:c.a.node.isRequired,itemCount:c.a.number.isRequired};var d=b,y=(r(253),function(e){var t=e.children,r=e.isDropdownBreakpoint,a=e.label,i=t({}),c=n.Children.count(i)||1,l=r?"vertical":"horizontal",u=Object(n.createElement)(d,{label:a,orientation:l,itemCount:c,items:i});if(!r||c<2)return u;var s=i.find((function(e){return!!e.props.selected}));return s?Object(n.createElement)(o.Dropdown,{className:"bwf-summary",position:"bottom",headerTitle:a,renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return Object(n.cloneElement)(s,{onToggle:r,isOpen:t})},renderContent:function(e){return Object(n.createElement)(d,{label:a,orientation:l,itemCount:c,items:t(e)})}}):u});y.propTypes={children:c.a.func.isRequired,label:c.a.string},y.defaultProps={label:Object(a.__)("Performance Indicators","funnel-builder")};t.a=Object(l.withViewportMatch)({isDropdownBreakpoint:"< large"})(y)},328:function(e,t,r){},329:function(e,t,r){"use strict";r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return y})),r.d(t,"d",(function(){return E})),r.d(t,"a",(function(){return C})),r.d(t,"c",(function(){return A}));var n=r(0),a=r(238),o=r(133),i=r(7),c=function(e){var t=Object(o.d)().id,r=e.query,c=e.funnelId,l=void 0===c?t:c;return Object(n.createElement)(a.a,{siteLocale:"en-US",path:Object(i.y)()?"/store-checkout/analytics":"/funnels/".concat(l,"/analytics"),query:r,filterTitle:"Analytics",showDatePicker:!0})},l=r(5),u=r(1),s=r(11),f=r.n(s);function p(e,t,r,n,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,a)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var y=function(e){var t=e.funnelId,r=void 0===t?0:t,a=e.refreshUI,o=b(Object(n.useState)(!1),2),c=o[0],s=o[1],d=b(Object(n.useState)(!1),2),y=d[0],m=d[1],h=function(){return s(!1)},v=b(Object(n.useState)(null),2),g=v[0],O=v[1],j=b(Object(n.useState)(!1),2),w=j[0],E=j[1],S=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.prev=1,e.next=4,f()({method:"GET",path:Object(i.g)("/woofunnels-analytics/funnels/".concat(r,"/reset"))});case 4:"status"in(t=e.sent)&&t.status?(O(null),h(),a(!0)):(E({message:Object(u.__)("There are some technical difficulties while reset analytics. Contact Support","funnel-builder")}),O(!1)),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0),E(e.t0),O(!1);case 13:m(!1);case 14:case"end":return e.stop()}}),e,null,[[1,8]])})),function(){var t=this,r=arguments;return new Promise((function(n,a){var o=e.apply(t,r);function i(e){p(o,n,a,i,c,"next",e)}function c(e){p(o,n,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(n.createElement)(n.Fragment,null,Object(n.createElement)(l.Button,{isPrimary:!0,onClick:function(){return s(!0)}},Object(u.__)("Reset","funnel-builder")),c&&Object(n.createElement)(l.Modal,{isDismissible:!0,onRequestClose:h,title:Object(u.__)("Reset Analytics"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},null===g&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear"}),Object(n.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("You are about to reset ","funnel-builder"),Object(n.createElement)("strong",null,Object(u.__)("Analytics. ","funnel-builder")),Object(u.__)("This action cannot be undone. Cancel to stop, Reset to proceed.","funnel-builder")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(n.createElement)(l.Button,{onClick:h,className:"bwf-modal-cancel-btn"},Object(u.__)("Cancel","funnel-builder")),Object(n.createElement)(l.Button,{isPrimary:!0,isBusy:y,"aria-disabled":y,onClick:S},Object(u.__)("Reset","funnel-builder")))),!y&&!0===g&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!y&&!1===g&&Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.error_cross}})),!y&&!1===g&&Object(n.createElement)(n.Fragment,null,Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)("div",{className:"bwf-t-center"},Object(n.createElement)("div",{className:"bwf-p"}," ",Object(u.__)("Error: ","funnel-builder")+w&&"message"in w?w.message:Object(u.__)("There are some technical difficulties while reset analytics. Please contact support","funnel-builder")," ")))))},m=r(258),h=r(254),v=r(255),g=r(10),O=r(8),j=(r(328),function(e){var t=e.data.current.totals,r=e.data.previous.totals,a=e.query,o=e.metrics,c=e.isLoading,l=e.error,u=a.hasOwnProperty("chart")?a.chart:o&&o.hasOwnProperty("length")?o[0].key:"",s=Object(i.i)();return c?Object(n.createElement)(v.a,{numberOfItems:e.metrics.length}):c||l?null:Object(n.createElement)(m.a,null,(function(){return o?e.metrics.map((function(e){var a=e.key,o=e.label,i=e.isCurrency,c=e.icon,l=i?s.formatAmount(parseFloat(t[a])):parseInt(t[a]),f=(i?w(parseFloat(t[a]),parseFloat(r[a])):w(parseInt(t[a]),parseInt(r[a])),Object(g.f)({chart:a}));return Object(n.createElement)(h.a,{key:a,label:o,value:l,href:Object(g.f)({chart:a}),onLinkClickCallback:function(e){Object(g.d)().push(f),e.preventDefault()},selected:a===u,tileIcon:Object(n.createElement)("div",{className:"bwf-tile-icon-wrap"},Object(n.createElement)(O.a,{icon:c,size:30,color:"#0073aa"}))})})):null}))});function w(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return null;if(0===e&&0===t)return 0;var r=e>=t?e:t,n=e<t?e:t;0===r&&(r=1);var a=Math.round((r-n)/r*100);return e>=t?a:-a}j.defaultProps={data:{current:{intervals:[],totals:{}},previous:{intervals:[],totals:{}}},metrics:[{key:"",label:"",isCurrency:!1}]};var E=j,S=r(28),_=r(141),k=r(237),P=function(e){var t=e.query,r=e.metrics,a=e.data,o=e.isLoading,c=e.interval,l=t.chartType,u=Object(i.i)(),s=t.hasOwnProperty("chart")?t.chart:r&&r.hasOwnProperty("length")?r[0].key:"",f=r.find((function(e){return s===e.key})),p=Object(_.c)(t).filter((function(e){return"hour"!==e})),b=Object(_.d)(t,"period=month&compare=previous_year"),d=b.primary,y=b.secondary,m=a.current,h=m.intervals,v=m.totals,g=void 0===v?{}:v,O=a.previous,j=O.intervals,w=O.totals,E=void 0===w?{}:w,P=h&&j?h.map((function(e,r){var n=Object(_.g)(e.start_date,d.after,y.after,t.compare,c),a=j[r];return{date:Object(S.format)("Y-m-d\\TH:i:s",e.start_date),primary:{label:"".concat(d.label," (").concat(d.range,")"),labelDate:e.start_date,value:(f.isCurrency?u.formatDecimal(e.subtotals[s]):parseFloat(e.subtotals[s]))||0},secondary:{label:"".concat(y.label," (").concat(y.range,")"),labelDate:n.format("YYYY-MM-DD HH:mm:ss"),value:a&&(f.isCurrency?u.formatDecimal(a.subtotals[s]):parseFloat(a.subtotals[s]))||0}}})):[];Object(n.useEffect)((function(){window.onload=function(){window.dispatchEvent(new Event("resize"))}}),[]);var C=Object(_.e)(c,h.length);return Object(n.createElement)(k.a,{allowedIntervals:p,interval:c,isRequesting:o,data:P,chartType:l||"line",title:"Chart",layout:"item-comparison",legendTotals:{primary:g.hasOwnProperty(s)?f.isCurrency?u.formatDecimal(g[s]):g[s]:0,secondary:E.hasOwnProperty(s)?f.isCurrency?u.formatDecimal(E[s]):E[s]:0},xFormat:C.xFormat,x2Format:C.x2Format,screenReaderFormat:C.screenReaderFormat,tooltipLabelFormat:C.tooltipLabelFormat})};P.defaultProps={data:{current:{intervals:[],totals:{}},previous:{intervals:[],totals:{}}},isLoading:!1};var C=P,R=r(14),T=r.n(R),x=r(179);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var A=function(e){var t=e.data,r=e.isLoading,a=Object(i.i)(),o=function(e){return e.hasOwnProperty("object_name")&&e.object_name?e.object_name:e.object_id},c=function(e){var t=o(e),r="",a=!1;switch(e.type){case"sales":case"landing":r="resume";break;case"optin":r="mail-2";break;case"optin_ty":r="like";break;case"checkout":r="cart";break;case"bump":r="success";break;case"upsell":r="tags";break;case"offer":r="down-right";break;case"thankyou":r="for-you"}return!0===e.ab&&(a=!0),Object(n.createElement)("div",{className:"bwf-c-contact-details-cell"},Object(n.createElement)("span",{className:T()("bwf-inline-mid bwf-mr-10",{"bwf-ml-15":"offer"==e.type})},Object(n.createElement)(O.a,{size:18,color:"#0073aa",icon:r})),t,!0===a&&Object(n.createElement)("span",{className:"bwf-c-s-h"},"Variant"))},l=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return"type"in e&&"upsell"===e.type?"":e[t]&&""!==e[t]&&parseFloat(e[t])?r?a.formatAmount(e[t]):n?"".concat(e[t],"%"):e[t]:"-"},s=[{key:"step",label:Object(u.__)("Step","funnel-builder"),required:!0,cellClassName:"bwf-col-step"},{key:"views",label:Object(u.__)("Views","funnel-builder"),cellClassName:"bwf-col-stats-m"},{key:"conversions",label:Object(u.__)("Conversions","funnel-builder"),cellClassName:"bwf-col-stats-m"},{key:"revenue",label:Object(u.__)("Revenue","funnel-builder"),cellClassName:"bwf-col-stats-m"},{key:"conversion_rate",label:Object(u.__)("Conversion Rate","funnel-builder"),cellClassName:"bwf-col-stats-m"}],f=t?t.map((function(e){return"upsell"===e.type?"bwf-s-upsell":""})):[],p=function(){if(!t)return[];var e=t.reduce((function(e,t,r){return t.hasOwnProperty("offers")?[].concat(q(e),[r]):e}),[]),r=0,n=e.map((function(e){var n=t.slice(r,e+1);r=e+1;var a=n[n.length-1],o=!!a.hasOwnProperty("offers")&&a.offers,i=Object.keys(o).map((function(e){return D(D({},o[e]),{},{type:"offer"})}));return o?n.concat(i):n}));return r+1<=t.length&&n.push(t.slice(r,t.length)),n.reduce((function(e,t){return e.concat(t)}),[])}().map((function(e){return[{display:c(e),value:o(e)},{display:l(e,"views"),value:e.views},{display:l(e,"conversions"),value:e.conversions},{display:l(e,"revenue",!0),value:e.revenue},{display:l(e,"conversion_rate",!1,!0),value:e.conversion_rate}]}));return Object(n.createElement)(x.a,{isLoading:r,title:"",rows:p,rowClasses:f,headers:s,rowHeader:!0,totalRows:p.length||1,rowsPerPage:p.length||1,showMenu:!1})}},876:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r(1),o=r(141),i=(r(167),r(12)),c=r(6),l=r(220),u=r(329),s=r(22),f=r(7),p=["fetch","setStateProp"];function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var h=function(){var e=Object(s.a)("analyticsChart"),t=e.fetch,r=e.setStateProp;return d(d({},m(e,p)),{},{setStateProp:r,fetch:function(e,n,a,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],c=arguments.length>5&&void 0!==arguments[5]&&arguments[5];i?r("currentLoaded",!1):c&&r("previousLoaded",!1),t("GET",Object(f.g)("/woofunnels-analytics/funnels/"+parseInt(e)+"/stats/"),{after:n,before:a,interval:o},{isCurrent:i,isPrevious:c})}})},v=r(20),g=["getStateProp"];function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function E(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var S=function(){var e=Object(v.a)("analyticsChart"),t=e.getStateProp;return j(j({},E(e,g)),{},{getCurrent:function(){return t("current")},getPrevious:function(){return t("previous")},getLoading:function(){var e=t("currentLoaded"),r=t("previousLoaded");return!e||!r}})},_=["fetch"];function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var T=function(){var e=Object(s.a)("analyticsSteps"),t=e.fetch;return P(P({},R(e,_)),{},{fetch:function(e,r,n,a){t("GET",Object(f.g)("/woofunnels-analytics/funnels/"+parseInt(e)+"/steps/"),{after:r,before:n,interval:a})}})},x=["getStateProp"];function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var I=function(){var e=Object(v.a)("analyticsSteps"),t=e.getStateProp;return D(D({},q(e,x)),{},{getSteps:function(){return t("steps")}})},A=r(5),B=r(60),M=r(133);function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,o=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Y=[{key:"unique_visits",label:Object(a.__)("Visits","funnel-builder"),isCurrency:!1,icon:"cursor"},{key:"contacts",label:Object(a.__)("Contacts","funnel-builder"),isCurrency:!1,icon:"contact-tile"},{key:"total_orders",label:Object(a.__)("Orders","funnel-builder"),isCurrency:!1,icon:"order"},{key:"bump_revenue",label:Object(a.__)("Order Bumps","funnel-builder"),isCurrency:!0,icon:"success"},{key:"upsell_revenue",label:Object(a.__)("Upsells","funnel-builder"),isCurrency:!0,icon:"tags"},{key:"total_revenue",label:Object(a.__)("Total Revenue","funnel-builder"),isCurrency:!0,icon:"revenue"},{key:"average_order_value",label:Object(a.__)("Average Order Value","funnel-builder"),isCurrency:!0,icon:"total-customer"},{key:"revenue_per_visit",label:Object(a.__)("Revenue Per Visit","funnel-builder"),isCurrency:!0,icon:"total-customer"}];t.default=function(e){var t=location&&location.search?Object(i.parse)(location.search.substring(1)):{},r=Object(M.d)().id,s=e.funnelId,f=void 0===s?r:s,p=L(Object(n.useState)(!1),2),b=p[0],d=p[1],y=h().fetch,m=S(),v=m.getError,g=m.getCurrent,O=m.getPrevious,j=m.getLoading,w=T().fetch,E=I(),_=E.getError,k=E.getSteps,P=E.getLoading,C=v(),R=_(),x=j(),F=P(),D=g(),N=O(),q=k(),V=t.period,U=t.compare,H=t.interval,K=t.after,Q=t.before,W=Object(o.c)(t),z=H;W.includes(H)||(z=W[W.length-1]);var $="",G="",J="",X="";return Object(n.useEffect)((function(){var e=Object(o.d)(t,"period=month&compare=previous_year"),r=e.primary,n=e.secondary;Object(c.isEmpty)(r.after)||($=r.after.format("YYYY-MM-DD 00:00:00")),Object(c.isEmpty)(r.before)||(G=r.before.format("YYYY-MM-DD 23:59:59")),Object(c.isEmpty)(n.after)||(J=n.after.format("YYYY-MM-DD 00:00:00")),Object(c.isEmpty)(n.before)||(X=n.before.format("YYYY-MM-DD 23:59:59")),y(f,$,G,z||"day",!0,!1),y(f,J,X,z||"day",!1,!0),w(f,$,G)}),[V,U,H,K,Q,b]),Object(n.createElement)(l.a,null,C&&Object(n.createElement)(A.Notice,{status:"error"},C.hasOwnProperty("message")?C.message:Object(a.__)("Unable to load analytics chart","funnel-builder")),R&&Object(n.createElement)(A.Notice,{status:"error"},R.hasOwnProperty("message")?R.message:Object(a.__)("Unable to load analytics steps","funnel-builder")),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(B.a,null,Object(n.createElement)(B.b,null,Object(n.createElement)(u.b,{query:t,funnelId:f})),Object(n.createElement)(B.c,null,Object(n.createElement)(u.e,{funnelId:f,refreshUI:d}))),Object(n.createElement)("div",{className:"bwf_clear_20"}),Object(n.createElement)(u.d,{error:C,query:t,metrics:Y,data:{current:D,previous:N},isLoading:x}),Object(n.createElement)(u.a,{query:t,metrics:Y,data:{current:D,previous:N},isLoading:x,interval:z}),Object(n.createElement)(u.c,{query:t,data:q,isLoading:F}))}}}]);