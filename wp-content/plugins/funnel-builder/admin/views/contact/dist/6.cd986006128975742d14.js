(window.webpackJsonp=window.webpackJsonp||[]).push([[6,27],{316:function(e,t,n){},322:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(5),l=n(8);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var s=function(e){var t={title:Object(a.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(a.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(a.__)("Upgrade to PRO Now","funnel-builder"),proLink:window.wffn.pro_link,action:!1},n=e.onRequestClose,o=e.isOpen,u=e.children,s=void 0===u?null:u,f=e.modalContent?i(i({},t),e.modalContent):t;return o?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(r.createElement)(l.a,{icon:"lock",size:20}),f.title),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(a.__)("Close"),onClick:n},Object(r.createElement)(l.a,{icon:"close",weight:"16",height:"16"}))),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof f.content?f.content.replace("{{feature_name}}",f.feature):f.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},f.demoLabel&&Object(r.createElement)(c.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},f.demoLabel),!f.demoLabel&&Object(r.createElement)(c.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return n()}},Object(a.__)("Cancel")),f.action?Object(r.createElement)(c.Button,{className:"components-button is-primary upgrade-btn",onClick:f.action},f.proLabel):Object(r.createElement)("a",{href:f.proLink,target:"_blank",rel:"noopener noreferrer",className:"components-button is-primary upgrade-btn"},f.proLabel)),s)):null};s.defaultProps={isOpen:!1,onRequestClose:function(){}},t.a=s},519:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(7),l=(n(316),n(5)),o=n(8);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(r.useContext)(c.a),s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?(t(e[0]),Object(c.s)(u,3e3)):u(Object(a.__)("Uploaded file is not valid.","funnel-builder")):u(Object(a.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(l.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(l.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.a,{icon:"json-upload",size:72}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(a.__)("Click or Drag & Drop your JSON file","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(a.__)("This tool allows you to import the funnels from the JSON file.","funnnel-builder"))))}}),Object(r.createElement)(l.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},552:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n(1),l=n(74),o=n(94);function i(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=u(Object(r.useState)(""),2),n=t[0],s=t[1],f=u(Object(r.useState)({}),2),p=f[0],m=f[1],b=u(Object(r.useState)(""),2),d=b[0],O=b[1],v=e.onCloseModal,j=e.onComplete,y=e.isWorking,_=e.modalTitle,h=void 0===_?Object(c.__)("Add Funnel","funnel-builder"):_;Object(r.useEffect)((function(){m({})}),[]);var w=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d){e.next=3;break}return s("Funnel title is required field"),e.abrupt("return");case 3:s(""),j&&j(d);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){i(c,r,a,l,o,"next",e)}function o(e){i(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(a.Modal,{title:h,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return v()},isDismissible:!0,shouldCloseOnClickOutside:!y,overlayClassName:"bwf-create-funnel-modal__overlay"},n&&Object(r.createElement)(a.Notice,{status:"error",onRemove:function(){return s("")}},n),p&&p.error||p&&p.success?p&&p.success&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(l.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):p&&p.error&&p.message?Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(o.a,null),Object(r.createElement)("div",{className:"bwf-h1 bwf-my-10"},p.message)):"":Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&w()}},Object(r.createElement)(a.TextControl,{placeholder:Object(c.__)("Enter funnel name","funnel-builder"),label:Object(c.__)("Name","funnel-builder"),value:d,onChange:function(e){return O(e)},disabled:y}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(a.Button,{onClick:v,className:"bwf-modal-cancel-btn",disabled:y},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(a.Button,{isPrimary:!0,disabled:y,isBusy:y,onClick:w,name:"add-funnel"},Object(c.__)(y?"Importing":"Add","funnel-builder")))))}},662:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(133),c=n(6),l=n(1),o=n(666),i=n(93),u=n(54),s=n(7),f=n(10);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={optin:{inline:Object(l.__)("Inline","funnel-builder"),popup:Object(l.__)("Popup","funnel-builder")},wc_checkout:{1:Object(l.__)("One Step","funnel-builder"),2:Object(l.__)("Two Step","funnel-builder"),3:Object(l.__)("Three Step","funnel-builder")}};t.default=function(e){var t=Object(i.a)(),n=t.getTemplates,p=t.getBuilders,b=(t.getFilters,t.getDefaultBuilder),O=t.templateLoading,v=t.getActiveBuilder,j=t.getActiveSubFilter,y=t.getActiveGroup,_=t.getCurrentTemplate,h=(Object(u.a)().setActiveSubFilter,e.onImportComplete),w=e.isStoreCheckout,g=void 0!==w&&w,E=e.scratchConfirmModalData,k=e.storeCheckoutId,S=e.isStoreChekoutExists,C=void 0!==S&&S,N=e.templateListNotice,T=e.showImportNotice,P=e.urlDependency,I=void 0===P||P,A=e.showEditors,x=void 0===A||A,R=e.showTemplatesNav,F=void 0===R||R,B=e.showBuildFromScratch,D=void 0===B||B,L=e.showSelectedTemplates,U=void 0!==L&&L,z=e.previewCustomizeEnabled,G=void 0!==z&&z,q=Object(f.i)().importType,M=n(),J=p(),W=JSON.parse(JSON.stringify(J)),$=b(),V=v(),Q=O(),Z=j(),H=_(),K=Object(a.d)(),Y=K.id,X=void 0===Y?0:Y,ee=K.filter,te=void 0===ee?"funnel":ee,ne=K.builder,re=K.templateId,ae=K.step,ce=I?re:H.id,le=I?ae:H.activeStep,oe=g&&k?k:X,ie=y(),ue=oe||g||!I?ie:te,se={funnel:Object(l.__)("All","funnel-builder"),wc_checkout:Object(l.__)("Checkout","funnel-builder"),landing:Object(l.__)("Sales Funnels","funnel-builder"),optin:Object(l.__)("Lead Funnels","funnel-builder")};(oe||C)&&delete se.wc_checkout,C&&(se.upsell&&delete se.upsell,oe||(se.wc_checkout=Object(l.__)("Checkout","funnel-builder"))),Object(s.x)()||oe||(se.upsell=Object(l.__)("One Click Upsell","funnel-builder")),W&&W.wc_checkout&&W.wc_checkout.customizer&&delete W.wc_checkout.customizer;var fe=function(){var e=ne||$;return Object(c.isEmpty)(V)||(e=V),W&&W[ue]&&!W[ue][e]&&(e=W[ue][$]?$:"elementor"),e},pe=["1","2","3","inline","popup"],me=function(e,t){return("wc_checkout"===t||"optin"===t)&&Z&&pe.includes(Z)?M[t][V][e].group_type[Z]:e},be=function(e,t,n){var r="";return"landing"===e?r="sp":"optin"===e?r="op":"optin_ty"===e?r="op-confirmed":"wc_checkout"===e?r="checkouts":"upsell"===e?r="offer":"wc_thankyou"===e&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},de=Object(s.y)()?"/store-checkout":oe?"/funnels/".concat(oe):"/templates";return Object(r.createElement)(o.a,{filters:d,templates:M,activeBuilder:fe(),templateCards:function(){if(Object(c.isEmpty)(M)||Object(c.isEmpty)([ue]))return{};var e=fe(),t={};if("upsell"===ue)t=M[ue][e];else if("funnel"===ue){var n=M[ue][e];for(var r in n){var a,l=n[r];if(n[r].hasOwnProperty("group")||U&&!U.includes(l.name))if(!(l.group.includes("sales")||l.group.includes("optin")||null!==(a=n[r])&&void 0!==a&&a.build_from_scratch))continue;t[r]=n[r]}}else for(var o in M.funnel[e]){var i=M.funnel[e][o];(!U||U&&U.includes(i.name))&&("landing"===ue&&i.group.includes("sales")||"optin"===ue&&i.group.includes("optin")||"wc_checkout"===ue&&i.group.includes("wc_checkout"))&&(t[o]=i)}return t}(),editors:W,defaultBuilder:$,isTemplateLoading:Q,activeTemplateGroup:ue,templateGroup:se,previewData:function(){if(Object(c.isEmpty)(M))return{};var e={success:!0},t=[],n=[];try{var r=fe();if("upsell"===ue){t=[];var a=r;for(var o in"oxy"===a&&(a="oxygen"),"customizer"===a&&(a="elementor"),M[ue][r]){var i=M[ue][r][o];if(!i.build_from_scratch){var u={};u.id=o,u.funnel=o,u.slug=o,u.name=i.name,u.thumbnail=i.thumbnail,u.template=ce,u.pro=i.pro,u.preview="https://templates-".concat(a,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:o,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:ce,thumbnail:ce,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(M[ue][r][ce].prevslug,"/"),slug:ce,prevId:ce,name:M[ue][r][ce].name,pro:M[ue][r][ce].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(ue){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var f=M.funnel[r][ce];t=f.steps?f.steps.map((function(e){var t=M[e.type][r][me(e.slug,e.type)],a="";switch(e.type){case"landing":a=Object(l.__)("Sales Page","funnel-builder");break;case"wc_checkout":a=Object(l.__)("Checkout Page","funnel-builder");break;case"upsell":a=Object(l.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":a=Object(l.__)("Thank You Page","funnel-builder");break;case"optin":a=Object(l.__)("Optin Page","funnel-builder");break;case"optin_ty":a=Object(l.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var a=M[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(a.prevslug),preview:be(e.type,a,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:be(e.type,t,r)});return{id:"".concat(e.type,"-").concat(ce),slug:me(e.slug,e.type),funnel:ce,step:e.type,name:a,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:be(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var p=f?f.steps.filter((function(e){return e.type===le})):[],m=M[p[0].type][r][me(p[0].slug,p[0].type)];e.activeTemplate={thumbnail:"".concat(le,"-").concat(ce),prevId:"".concat(le,"-").concat(m.prevslug),preview:be(p[0].type,m,r),slug:ce,name:M.funnel[r][ce].name,pro:M.funnel[r][ce].pro,tempPro:M.funnel[r][ce].pro,group:"funnel",filters:!!m.group_type&&Object.keys(m.group_type),type:le,funnelGroup:f.group,filter:"wc_checkout"===le?m.no_steps:m.group?m.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:oe,onImportComplete:h,templateFilterCheck:function(e){return!oe||"funnel"===q||!1===Z||!1===Z||!(!oe||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===Z?"optin":Z):Z===e.group)},activeFilter:Z,isStoreCheckout:g,parentRoute:de,showTemplatesNav:F,showBuildFromScratch:!!D&&("funnel"!==q||g&&!oe),funnelTitleModalData:m({},g&&{title:"Store Checkout"}),scratchConfirmModalData:E,importApiPrefix:g?"store-checkout":"funnels",templateListNotice:N,showImportNotice:T,urlDependency:I,showEditors:x,previewCustomizeEnabled:G})}},666:function(e,t,n){"use strict";n.d(t,"a",(function(){return $e}));var r=n(0),a=n(6),c=n(9),l=n.n(c),o=n(133),i=n(11),u=n.n(i),s=n(1),f=n(10),p=n(14),m=n.n(p),b=n(5),d=(n(836),n(53));function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var a=k(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"===O(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,n,c,l=w(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(t=l.call(this,e)).state={isLoading:!0},t.iframeRef=Object(r.createRef)(),t.setLoaded=t.setLoaded.bind(E(t)),t}return t=o,(n=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props.src;this.setState({isLoading:!1}),this.props.onLoad(!!e)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,c=e.src,l=e.title,o=this.state.isLoading,i=m()("wffn-web-preview",t,{"is-loading":o});return Object(r.createElement)("div",{className:i},(o||Object(a.isEmpty)(c))&&n,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:j({},Object(a.isEmpty)(c)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:l,src:c})))}}])&&_(t.prototype,n),c&&_(t,c),o}(r.Component);S.propTypes={className:l.a.string,loadingContent:l.a.node,onLoad:l.a.func,src:l.a.string.isRequired,title:l.a.string.isRequired},S.defaultProps={loadingContent:Object(r.createElement)(d.a,{size:"xxl"}),onLoad:a.noop};var C=S,N=n(322),T=n(63),P=n(54),I=n(93),A=(n(837),n(7)),x=n(18);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){B(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},L=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,a=e.importType,c=e.activeTemplateGroup;return F(F({title:!1===t?Object(s.__)("Templates are a PRO Feature","funnel-builder"):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===t?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==t&&{action:function(){return Object(f.k)({},"/settings/")}}),{},{proLink:Object(A.p)([0===n||"funnel"===a?"Template":"Step",c,"Build","From","Scratch","Upgrade","Modal"])})},U=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,a=e.funnelId,c=e.activeGroup,l=e.activeStep;return F(F({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(s.__)(" is a PRO template","funnel-builder")):Object(s.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(s.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(s.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(s.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(s.__)("inactive or has expired.","funnel-builder")),Object(s.__)(" To access the template library you need a valid license.","funnel-builder")),proLabel:!1===n?Object(s.__)("Upgrade to PRO Now","funnel-builder"):Object(s.__)("Activate License","funnel-builder")},!1!==n&&{action:function(){return Object(f.k)({},"/settings/")}}),{},{proLink:Object(A.p)([a?"Step":"Template",a?c:"upsell"===c?"upsell":l,t,"Upgrade","Modal"])})},z=(n(838),["src","onLoaded"]);function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var W=function(e){var t=e.src,n=e.onLoaded,c=void 0===n?a.noop:n,l=J(e,z),o=q(Object(r.useState)(!1),2),i=o[0],u=o[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),c(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",G({src:t},l)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},$=n(8),V=n(61),Q=n(519);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var K=function(e){var t=e.label,n=void 0===t?"":t,c=e.id,l=void 0===c?"":c,o=e.value,i=e.onChange,u=void 0===i?a.noop:i,s=e.className,f="inspector-color-".concat(Object(V.useInstanceId)(b.ColorPicker)),p=Z(Object(r.useState)(!1),2),d=p[0],O=p[1];return Object(r.createElement)("div",{className:m()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return O(!0)}},Object(r.createElement)(b.ColorIndicator,{colorValue:o})),Object(r.createElement)(b.TextControl,{value:o||"#ffffff",className:"indicator-text"}),d&&Object(r.createElement)(b.Popover,{position:"top left",onClose:function(){return O(!1)}},Object(r.createElement)(b.ColorPicker,{color:o,onChangeComplete:function(e){u(e.hex,{id:l})},disableAlpha:!0}))))},Y=function(e){var t=e.setCustomizeVisible,n=Z(Object(r.useState)(!1),2),a=n[0],c=n[1],l=Z(Object(r.useState)(""),2),o=l[0],i=l[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(b.Button,{onClick:function(){return t(!1)}},Object(r.createElement)($.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),a?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:a,alt:"logo"}),Object(r.createElement)(b.Button,{className:"bwf-delete-btn",onClick:function(){return c(!1)}},Object(r.createElement)($.a,{icon:"trash",size:20})))):Object(r.createElement)(Q.a,{onFileSelected:function(e){c(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)($.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(K,{label:Object(s.__)("Color","funnel-builder"),value:o,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(b.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(b.Button,null,Object(s.__)("Reset","funnel-builder"))))};function X(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var re=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,c=e.funnelId,l=e.onClick,o=e.activeThumbnail,i=e.previewCustomizeEnabled,u=ee(Object(r.useState)(!1),2),f=u[0],p=u[1];return Object(a.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},X(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},f?Object(r.createElement)(Y,{setCustomizeVisible:p}):t&&t.map((function(e,t){return Object(r.createElement)("label",{key:t,className:m()("wffn_template_page_options",{active_preview:e.id==o}),onClick:function(){return l(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},c?Object(r.createElement)(W,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name,!!c&&"yes"===e.pro&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro wffn-static-ribbon"},"PRO")))})),i&&!f&&Object(r.createElement)(b.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return p(!0)}},Object(r.createElement)($.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},ae=function(e){var t=e.type,n=e.filters,c=e.FB_PRO_STATUS,l=e.activeSubFilter,o=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,p=e.funnelId,b=e.funnelGroup,d=e.hasPRO,O=e.importType;if(!t)return null;var v=n[t];if(void 0===v||Object(a.isEmpty)(v))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var j=[],y=function(e){i.includes(e)&&j.push(Object(r.createElement)("div",{className:m()("template-filter",{"active-filter":l==e}),onClick:function(){return o(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,v[e]),!("wc_checkout"===f&&Object(A.t)()&&(!p||"step"!==O)&&b.includes("wc_checkout"))&&(d(u||"no")||["2","3"].includes(e)&&!0!==c||"popup"===e&&!0!==c)&&Object(r.createElement)($.a,{icon:"lock",size:"18"})))};for(var _ in v)y(_);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},Object(s.__)("Type"),":"),j))},ce=n(82),le=function(e){var t=e.funnelId,n=e.activeGroup,a=e.activeSubFilter,c=e.activeStep,l=e.templateName,o=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,f=e.importType,p=u("status");if("upsell"===n&&!0!==p)return Object(r.createElement)(ce.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(A.p)([t?"Step":"Template","upsell",l,"Notice","Bar"])});switch(t&&"step"===f?n:c){case"upsell":if(!0!==p)return Object(r.createElement)(ce.a,{align:"left",content:"One Click Upsell is a pro feature. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(A.p)([t?"Step":"Template","upsell",l,"Notice","Bar"])});break;case"wc_checkout":if((!Object(A.t)()||t&&"step"===f||!i.includes("wc_checkout"))&&(u(o)||["2","3"].includes(a)&&!0!==p)){var m="This template is part of the pro plan. To access it, consider upgrading.";return"2"===a?m="Two-Step Checkout is a pro feature. To access it, consider upgrading.":"3"===a&&(m="Three-Step Checkout is a pro feature. To access it, consider upgrading."),Object(r.createElement)(ce.a,{align:"left",content:m,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(A.p)([t?"Step":"Template","Checkout",l,"Notice","Bar"])})}break;case"optin":if(u(o||"no")||"popup"===a&&!0!==p){var b="This template is part of the pro plan. To access it, consider upgrading.";return"popup"==a&&(b=Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin "),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},a),Object(s.__)(" is a pro feature. To access it, consider upgrading."))),Object(r.createElement)(ce.a,{align:"left",content:b,linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(A.p)([t?"Step":"Template","Optin",l,"Notice","Bar"])})}}var d=t&&"step"===f?n:c;return("wc_checkout"===d||"wc_thankyou"===d)&&Object(A.t)()||"yes"!==o||Object(A.x)()?"":Object(r.createElement)(ce.a,{align:"left",content:"This template is part of the pro plan. To access it, consider upgrading.",linkText:Object(s.__)("Upgrade to PRO.","funnel-builder"),link:Object(A.p)([t?"Step":"Template",t?n:c,l,"Notice","Bar"])})},oe=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},ie=oe.logo?oe.logo:"",ue=function(e){var t=e.viewport,n=e.setviewport,c=e.templateName,l=e.isTemplatePro,o=e.onRequestClose,i=e.importing,u=e.onClick,f=e.onClickPro,p=e.activeGroup,d=e.isCheckoutPro,O=e.isOptinPro,v=e.activeStep,j=e.funnelId,y=e.importType,_=e.templateGroup,h=e.hasPRO,w=Object(I.a)().getImportBtnLabel(),g=Object(a.isEmpty)(w)?"upsell"===p||j&&"step"===y?Object(s.__)("Import This Template"):Object(s.__)("Import This Funnel"):w,E=h("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:ie,alt:"Funnel Builder for WordPress",width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},c,"yes"===l&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},"PRO"))),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"desktop"===t}),onClick:function(){return n("desktop")},title:"Desktop Viewport"},Object(r.createElement)($.a,{icon:"desktop",color:"desktop"===t&&"#fff"})),Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"tablet"===t}),onClick:function(){return n("tablet")},title:"Tablet Viewport"},Object(r.createElement)($.a,{icon:"tablet",color:"tablet"===t&&"#fff"})),Object(r.createElement)("span",{className:m()("wffn_viewport_icons",{active:"mobile"===t}),onClick:function(){return n("mobile")},title:"Mobile Viewport"},Object(r.createElement)($.a,{icon:"mobile",color:"mobile"===t&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)(r.Fragment,null,!(h(l||"no")||!0!==E&&(d||O||"upsell"===v))||!Object(a.isEmpty)(_)&&_.includes("wc_checkout")&&Object(A.t)()?Object(r.createElement)(b.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:u,disabled:i&&i.group===p,isBusy:"funnel"===y&&j&&i&&i.group===p},"funnel"===y&&j&&i&&i.group===p?"Importing...":g):Object(r.createElement)(b.Button,{className:"wffn-import-template-btn",isPrimary:!0,onClick:f},g))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(b.Button,{onClick:o},Object(r.createElement)($.a,{icon:"close",size:"18"}))))};function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function me(e){var t=e.isOpen,n=e.onRequestClose,c=e.activeGroup,l=e.activeEditor,i=e.importing,u=e.filters,p=e.hasPRO,d=e.checkEditor,O=e.previewData,v=e.isTemplateLoading,j=e.activeFilter,y=e.setPreviewErr,_=e.parentRoute,h=e.funnelId,w=e.importType,g=e.updateQueryString,E=e.previewCustomizeEnabled,k=e.urlDependency,S=Object(f.i)(),R=O(),F=R.thumbnails,B=R.activeTemplate,D=R.previews,L=void 0===D?[]:D,z=Object(o.d)().step,G=x.a.getFunnel(),q=!(!B||!B.type)&&B.type,M=k?z:null==B?void 0:B.type;Object(r.useEffect)((function(){h||(R.success?y(!1):!1===R.success&&y(!0))}),[R.success]),Object(r.useEffect)((function(){if(q)if("wc_checkout"===q||"optin"===q){var e=!(!B||!B.filters)&&B.filters[0];S.group&&("wc_checkout"===q&&["1","2","3"].includes(S.group)||"optin"===q&&["inline","popup"].includes(S.group))?J(S.group):(J(e),g({group:e}))}else S.group&&(delete S.group,g({},Object(f.g)(),S))}),[S.group,q]),Object(r.useEffect)((function(){!Object(a.isEmpty)(null==G?void 0:G.steps)&&"funnel"===w&&h&&g({},"/funnels/".concat(G.id))}),[G]);var J=Object(P.a)().setActiveSubFilter,W=(0,Object(I.a)().getCurrentTemplate)(),$=Object(P.a)().setCurrentTemplate,V=fe(Object(r.useState)(!1),2),Q=(V[0],V[1]),Z=p("status"),H=fe(Object(r.useState)("desktop"),2),K=H[0],Y=H[1],X=fe(Object(r.useState)(!1),2),ee=X[0],te=X[1],ne=fe(Object(r.useState)(!1),2),ce=ne[0],oe=ne[1],ie=fe(Object(r.useState)(!h),2),pe=ie[0],me=ie[1],be=fe(Object(r.useState)([]),2),de=be[0],Oe=be[1];Object(r.useEffect)((function(){if(Q(!1),B&&!de.includes(B.prevId)){var e=JSON.parse(JSON.stringify(de));e.push(B.prevId),Oe(e)}}),[null==B?void 0:B.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(F&&!h&&pe){var e=F||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&me(!1)}}))}}),[F]);var ve,je=("wc_checkout"===c||M&&"wc_checkout"===M)&&"1"!==j,ye=("optin"===c||M&&"optin"===M)&&"inline"!==j;return R?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b.Modal,{className:"wffn_template_preview_modal",onRequestClose:function(){return n(!1)},overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(ue,(se(ve={viewport:K,setviewport:Y,onRequestClose:n,importing:i,activeGroup:c,isCheckoutPro:je,isOptinPro:ye,activeStep:M,funnelId:h,importType:w,hasPRO:p,onClickPro:function(){!1===Z&&"yes"!==(null==B?void 0:B.tempPro)&&(je||ye||"upsell"===M)?oe(!0):te(!0)},onClick:function(){return d()}},"onRequestClose",(function(){h?g({},"".concat(_)):(g({},"".concat(_,"/").concat(c)),J(!1)),n()})),se(ve,"templateName",null==B?void 0:B.name),se(ve,"isTemplatePro",null==B?void 0:B.tempPro),se(ve,"templateGroup",null==B?void 0:B.funnelGroup),ve)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:m()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(ae,{type:null==B?void 0:B.type,filters:u,FB_PRO_STATUS:Z,activeSubFilter:j,onClick:function(e){if(J(e),g({group:e}),h){var t=W.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||$({id:n[e],template:{group_type:n}})}},activeTemplateFilters:null==B?void 0:B.filters,hasPRO:p,tempPro:null==B?void 0:B.tempPro,templateType:null==B?void 0:B.type,funnelId:h,funnelGroup:null==B?void 0:B.funnelGroup,importType:w}),!v&&Object(r.createElement)(le,{funnelId:h,activeGroup:c,activeSubFilter:j,activeStep:M,hasPRO:p,templateName:null==B?void 0:B.name,isTemplatePro:null==B?void 0:B.pro,funnelGroup:null==B?void 0:B.funnelGroup,importType:w}),Object(a.isEmpty)(L)||Object(a.isEmpty)(de)?"":L.map((function(e,t){var n=(null==e?void 0:e.preview)||"",a=(null==e?void 0:e.id)||"";return Object(r.createElement)(C,{key:t,className:m()("wffn_template_preview_frame",K,{"hide-preview":e.id!==B.prevId}),title:"Funnel Template",src:de.includes(a)?n:"",onLoad:function(e){if(Q(!0),e&&L[t+1]){var n=JSON.parse(JSON.stringify(de));n.push(L[t+1].id),Oe(n)}}})}))),Object(r.createElement)(re,{thumbnailsData:F,hasPlaceholder:pe,funnelId:h,previewCustomizeEnabled:E,onClick:function(e){$({id:e.funnel,template:e,activeStep:e.step}),g({},h&&"step"===w?"".concat(_,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel):h&&"funnel"===w?"".concat(_,"/templates/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===c?"".concat(_,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel):"".concat(_,"/").concat(c,"/").concat(l,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==B?void 0:B.thumbnail})))),Object(r.createElement)(N.a,{isOpen:ee,onRequestClose:function(){return te(!1)},modalContent:U({templateName:null==B?void 0:B.name,FB_PRO_STATUS:Z,funnelId:h,activeGroup:c,activeStep:M})}),(p((null==B?void 0:B.pro)||"no")||"yes"!==(null==B?void 0:B.pro)&&(je||ye||"upsell"===M))&&Object(r.createElement)(T.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},"Yor are using ",null==B?void 0:B.name," ","Funnel. In this funnel there are some pro features like ",Object(r.createElement)("mark",null,"Two Step")," and"," ",Object(r.createElement)("mark",null,"Three Step Checkout"),","," ",Object(r.createElement)("mark",null,"One Click Upsell"),","," ",Object(r.createElement)("mark",null,"Optin Popup"),"."),confirmButtonText:Object(s.__)("Upgrade to PRO","funnel-builder"),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===Z?g({},"/settings/"):window.open(Object(A.p)([h?"Step":"Template",h?c:"upsell"===c?"upsell":M,null==B?void 0:B.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){"funnel"!==w&&d();var e="1";if("optin"===c||"optin"===M?(J("inline"),g({group:"inline"}),e="inline"):(J("1"),g({group:"1"})),h){var t=W.template,n=(t=void 0===t?{}:t).group_type;Object(a.isEmpty)(n)||$({id:n[e],template:{group_type:n}})}},onRequestClose:function(){oe(!1)},isOpen:ce,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0})):""}n(839);var be=n(38),de=n(552),Oe=n(669);function ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return je(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ye=function(e){var t=e.onCloseModal,n=e.onComplete,a=e.isWorking,c=e.activeTemplateGroup,l=e.showCloneOption,o=e.templateGroup,i=ve(Object(r.useState)(""),2),u=i[0],f=i[1],p=ve(Object(r.useState)({}),2),m=(p[0],p[1]),d=ve(Object(r.useState)(""),2),O=d[0],v=d[1],j=ve(Object(r.useState)(null),2),y=j[0],_=j[1];Object(r.useEffect)((function(){m({})}),[]);var h=function(){O?(f(""),n(O,!(!y||!y.copyFrom)&&y.step)):f("Step name is required field")};return Object(r.createElement)(b.Modal,{title:Object(s.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!a,overlayClassName:"bwf-create-funnel-modal__overlay"},u&&Object(r.createElement)(b.Notice,{status:"error",onRemove:function(){return f("")}},u),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"===e.key&&h()},role:"main"},Object(r.createElement)(b.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Name","funnel-builder"),value:O,onChange:function(e){return v(e)},disabled:a}),l&&Object(r.createElement)(Oe.a,{step:{type:"upsell"===c?"wc_upsells":c,title:o[c],is_substep:!1},onStepSelected:function(e){return _(e)}}),Object(r.createElement)("div",{className:"bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(b.Button,{onClick:t,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(b.Button,{isPrimary:!0,disabled:a,isBusy:a,onClick:h,name:"add-funnel"},Object(s.__)(a?"Importing":"Add","funnel-builder")))))},_e=n(60);n(840);function he(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return we(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return we(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ge=function(e){var t=e.showTemplatesNav,n=void 0===t||t,a=e.showEditors,c=void 0===a||a;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{id:"wffn_tab_container"},n&&Object(r.createElement)(_e.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},he(Array(5)).map((function(e,t){return Object(r.createElement)(_e.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),c&&Object(r.createElement)(_e.a,{gap:6,justify:"flex-start"},he(Array(5)).map((function(e,t){return Object(r.createElement)(_e.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},he(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn-is-placeholder"})))})))))))},Ee=n(66),ke=n(70),Se=function(e){var t=e.editorList,n=e.activeEditor,a=e.onChange,c=[],l=function(e){c.push(Object(r.createElement)(_e.c,{key:e},Object(r.createElement)("label",null,Object(r.createElement)("input",{name:"",type:"radio",value:e,onChange:function(){return a(e)},checked:e===n&&"checked"}),Object(r.createElement)("span",{className:m()({"is-selected":e===n})},t[e]))))};for(var o in t)l(o);return Object(r.createElement)(_e.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector bwf-flex-wrap"},c)},Ce=n(12);n(841);function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pe=function(e){var t=Ne(Object(r.useState)(!1),2),n=t[0],a=t[1],c=e.toolTipText,l=e.size,o=(e.iconColor,e.iconSize),i=void 0===o?20:o,u=e.position,s=(e.icon,e.abPos),f=void 0!==s&&s,p=e.visible,m=void 0===p||p,d={height:i+"px",width:i+"px"};return f&&(d.position="relative"),m?Object(r.createElement)("span",{onMouseEnter:function(){return a(!0)},onMouseLeave:function(e){e.preventDefault(),a(!1)},style:d,onClick:function(){return a(!1)}},e.children,n&&Object(r.createElement)(b.Popover,{position:u,noArrow:!1,className:"bwf-tooltip bwf-tooltip-sz-"+l,style:f?{position:"absolute"}:{}},c)):e.children},Ie=n(16),Ae=["edit"];function xe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Re=function(e){var t=e.funnelId,n=e.disabledNavs,a=e.activeTemplateGroup,c=e.templateGroup,l=e.onClick,i=Object(o.d)().importType,u={},s=window.location&&window.location.search?Object(Ce.parse)(window.location.search.substring(1)):{},p=(s.edit,xe(s,Ae));for(var b in c)"funnel"===i&&"upsell"===b||(u[b]={},u[b].name=c[b],u[b].isExclusive="upsell"===b,u[b].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(b),p)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(_e.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(u).map((function(e,c){var o=e===a,i=n.find((function(t){return t.key===e}));return Object(r.createElement)(_e.c,{key:"bwf-temp-nav-".concat(c)},0===t?Object(r.createElement)(Ie.a,{className:m()("bwf-template-nav-item",{"is-selected":s.path==="/templates/"+e||"/templates"===s.path&&"funnel"===e}),href:u[e].link},Object(r.createElement)("div",null,u[e].name),u[e].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO STEP")):Object(r.createElement)(Pe,{toolTipText:i&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},i.message),visible:i||!1,size:366},Object(r.createElement)("div",{className:m()("bwf-template-nav-item",{"is-selected":o&&!i},{"is-disabled":i}),onClick:function(){i||l(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,u[e].name),!Object(A.x)()&&u[e].isExclusive&&Object(r.createElement)("div",{className:"bwf-template-nav-exclusive-badge"},"PRO"))))}))))};function Fe(e){var t=e.importBuildFromScratch,n=e.getRibbonName,a=e.activeTemplateGroup,c=e.templateID,l=void 0===c?"scratch":c;return Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},"upsell"===a&&Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},n({pro:"yes"})),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se",onClick:function(e){return t(l,e)}},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)($.a,{icon:"plus",width:"48",height:"48",color:"#000000"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)("span",{className:"wffn_import_text"},Object(s.__)("Start from scratch","funnel-builder"))))))))}var Be={optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"},De=function(e){var t=e.templateFilterCheck,n=e.templateCards,c=e.showBuildFromScratch,l=e.importBuildFromScratch,o=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,f=e.funnelId,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch";return Object(r.createElement)(Fe,{importBuildFromScratch:l,getRibbonName:D,activeTemplateGroup:o,templateID:e})},d=[],O=function(e){var a=n[e];t(a,!!a.group_type&&Object.keys(a.group_type)[0])&&(!c&&a.build_from_scratch||d.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},a.build_from_scratch?p(a.slug?a.slug:e):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===a.pro?Object(r.createElement)("div",{className:"wffn_template_sec_ribbon wffn-pro"},D(a)):"",Object(r.createElement)("div",{className:a.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},a.thumbnail&&Object(r.createElement)(W,{src:a.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(b.Button,{onClick:function(t){u(t,e,a)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn"},Object(s.__)("Preview","funnel-builder")))))),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},a.name),"funnel"===o&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Be[null==a?void 0:a.group[0]]&&Be[null==a?void 0:a.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},a.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",a.steps.length,"funel-builder"),a.steps.length)):null))))))};for(var v in n)O(v);return"wp_editor"===i&&Object(a.isEmpty)(d)&&d.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},p("upsell"===o?"wfocu-custom-empty":"wp_editor_1"))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:m()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},d))};function Le(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Me(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){Ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||Me(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){if(e){if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Je(e,t):void 0}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var We=function(e){var t=e.activeFilter,n=e.defaultBuilder,c=e.filters,l=e.editors,i=e.templates,p=e.isTemplateLoading,m=e.activeBuilder,d=e.activeTemplateGroup,O=e.templateGroup,v=void 0===O?[]:O,j=e.funnelId,y=void 0===j?0:j,_=e.showDefaultEditorNotice,h=void 0===_||_,w=e.templateCards,g=void 0===w?{}:w,E=e.previewData,k=e.onImportComplete,S=e.templateFilterCheck,C=e.showTemplatesNav,x=e.parentRoute,R=e.disabledNavs,F=void 0===R?[]:R,B=e.showBuildFromScratch,D=void 0===B||B,U=e.funnelTitleModalData,z=void 0===U?{}:U,G=e.scratchConfirmModalData,q=e.importApiPrefix,M=void 0===q?"funnels":q,J=e.templateListNotice,W=e.showImportNotice,$=void 0===W?"":W,V=e.urlDependency,Q=void 0===V||V,Z=e.showEditors,H=void 0===Z||Z,K=e.previewCustomizeEnabled,Y=void 0!==K&&K,X=Object(f.i)(),ee=Object(Ee.a)().updateStatus,te=(0,Object(ke.a)().getStatus)(),ne=y,re=Object(r.useContext)(A.a),ae=qe(Object(r.useState)(!1),2),ce=ae[0],le=ae[1],oe=qe(Object(r.useState)(!1),2),ie=oe[0],ue=oe[1],se=function(){if(Q)return f.k.apply(void 0,arguments)},fe=Object(P.a)(),pe=fe.fetch,Oe=fe.makeDefaultEditor,ve=fe.setActiveBuilder,je=fe.setActiveGroup,_e=fe.setCurrentTemplate,he=fe.setActiveStep,we=fe.setPageBuildersOptions,Ce=fe.setActiveSubFilter,Ne=Object(I.a)(),Te=Ne.getCurrentTemplate,Pe=Ne.getPageBuildersOptions,Ie=Ne.getPageBuildersTexts,Ae=Te(),xe=Pe(),Fe=Ie(),Be=Object(o.d)(),Ue=Be.builder,Me=Be.templateId,Je=Be.filter,We=Object(f.i)().importType,$e="wc_checkout"===We?"funnel":We,Ve=Object(be.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(a.isEmpty)(g)&&pe(),function(){re("")}}),[]),Object(A.b)(Object(s.__)("Import Funnel","funnel-builder"));var Qe=qe(Object(r.useState)(!1),2),Ze=Qe[0],He=Qe[1],Ke=qe(Object(r.useState)(!1),2),Ye=Ke[0],Xe=Ke[1],et=qe(Object(r.useState)(!1),2),tt=et[0],nt=et[1],rt=qe(Object(r.useState)({}),2),at=rt[0],ct=rt[1],lt=qe(Object(r.useState)({id:"",template:{}}),2),ot=lt[0],it=lt[1],ut=qe(Object(r.useState)(!1),2),st=ut[0],ft=ut[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){ve(m)}),[d,c,l]),Object(r.useEffect)((function(){return Me&&(He(!1),it({id:Me,template:{}})),function(){ve("")}}),[]),Object(r.useEffect)((function(){ie&&(se({},"/templates"),re(Object(s.__)("Template not found for requested URL. Please select from the list.")),Object(A.s)(re,3e3))}),[ie]);var pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate";try{ct((function(e){return ze(ze({},e),{},{disableConfirm:!0,confirmButtonText:"Activating",cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(A.g)("/woofunnels-admin/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&("funnel"===$e&&y?bt(ot.id):le(!0),ct({status:!1}),we(ze(ze({},xe),{},Ge({},m,ze(ze({},xe[m]),{},{"plugin-status":"activated"})))))})).catch((function(e){ct({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=xe[m];if("wp_editor"!==m&&"customizer"!==m&&t["plugin-status"]&&"activated"!==t["plugin-status"]){var n=Fe[m],a=n.text;"gutenberg"===m&&e&&(a=Object(s.__)("To have the best experience in Gutenberg, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var c={status:!0,modalTitle:Object(s.__)("Import Template"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:a}}),closeIcon:!0};c.confirmButtonText=n.ButtonText,"yes"===n.show_cancel_btn&&(c.cancelButtonText="Cancel"),"gutenberg"===m&&e&&(c.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),ct(ze(ze({},c),{},{onConfirm:function(){if(n.builder_link&&"install"===t["plugin-status"]&&"yes"===n.noInstall)return window.open(n.builder_link,"_blank"),void ct({status:!1});"yes"!==n.show_cancel_btn&&ct({status:!1}),pt(t.plugins[0].slug,t.plugins[0].init,t["plugin-status"],{modalContentProps:c})},onCancel:function(){"gutenberg"===m&&e&&le(!0),ct({status:!1})}})),Xe(!1)}else"funnel"===$e&&y&&!e?bt(ot.id):le(!0)},bt=function(e,n,r){Xe({id:e,group:d,filter:t});var c=!0;try{var l=Object.create({});l.template=e,l.builder=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n}(m,d);var o=Object.create({}),i=Object.create({});if(ne&&"step"===$e){if(r){var f=r&&r.hasOwnProperty("key")?r.key:0;l.title=n,l.inherit_from=f,l.type=d,delete l.template,delete l.builder}else l.funnel_id=ne,l.type=d,l.title=n,l.template_type=t;!vt||i.is_upsells||te.is_upsells||"upsell"!==d||(i.is_upsells=!0),i.is_checkout||te.is_checkout||"wc_checkout"!==d||(i.is_checkout=!0)}else{E().thumbnails.forEach((function(e){o["upsell"===e.step?"wc_upsells":e.step]=e.slug,!vt||i.is_upsells||te.is_upsells||"upsell"!==e.step||(i.is_upsells=!0),i.is_checkout||te.is_checkout||"wc_checkout"!==e.step||(i.is_checkout=!0)})),l.steps=JSON.stringify(o),ne&&"funnel"===$e?l.funnel_id=Number(ne):l.title=n}var p=0!==ne&&"step"===$e?Object(A.g)("/woofunnels-admin/funnels/".concat(ne,"/steps")):Object(A.g)("/woofunnels-admin/".concat(M,"/import_template"));u()({method:"POST",data:l,path:p}).then((function(e){e.status&&!0===e.status?(Object(a.isEmpty)(te.funnels)?i.funnels=[e.funnel_id]:1===te.funnels.length&&(i.funnels=[].concat(Le(te.funnels),[e.funnel_id])),ee(i),c=!1,ne||(e.funnel_id?dt(e.funnel_id):ct({status:!0,modalTitle:Object(s.__)("Import Template"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==ne&&k&&("funnel"===$e&&Ve(!1),k(e))):(ct({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),le(!1))})).catch((function(e){ct({status:!0,error:e.message||e.msg}),le(!1)})).finally((function(){c&&Xe(!1)}))}catch(e){Xe(!1)}},dt=function e(t){try{u()({path:Object(A.g)("/woofunnels-admin/funnels/".concat(t,"/import-status"))}).then((function(n){!0===n.status?k?(He(!1),k({funnel_id:t})):(delete X.group,se({},"/funnels/".concat(t),X)):!1===n.status&&setTimeout((function(){e(t)}),2e3)}))}catch(e){}},Ot=function(e){var t=!1,n=!Je||"wc_checkout"!==Je&&"wc_thankyou"!==Je||Object(A.x)()?!(!Object(A.v)()||!Object(A.w)())&&Object(A.w)():Object(A.t)()&&Object(A.w)("wc_checkout");return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},vt=Ot("status");return Object(r.createElement)(r.Fragment,null,p?Object(r.createElement)(ge,{showEditors:H,showTemplatesNav:H}):Object(r.createElement)("div",{className:"wffn_template_wrap"},C&&Object(r.createElement)(Re,{funnelId:y,disabledNavs:F,activeTemplateGroup:d,templateGroup:v,onClick:function(e){return je(e)}}),Object(r.createElement)("div",{id:"wffn_design_container"},Object(r.createElement)("div",{className:"wffn_tab_container"},H&&Object(r.createElement)(Se,{editorList:l[d],onChange:function(e){ve(e),h&&function(e){var t=e.showSnackbar,n=e.builder,a=e.defaultBuilder,c=e.onConfirm,l=e.defaultEditorLoading;a===n||l||t({isObject:!0,className:"bwf-snackbar-bottom-right",display:Object(r.createElement)("div",null,Object(s.__)("Want to make this default page builder?","funnel-builder"),"",Object(r.createElement)(b.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){c(n),Object(A.s)(t,100)}},Object(s.__)("Yes","funnel-builder")),Object(r.createElement)(b.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return Object(A.s)(t,0)}},Object(s.__)("No","funnel-builder")))})}({showSnackbar:re,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){ft(!0);try{u()({path:Object(A.g)('/woofunnels-admin/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?Oe(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){ft(!1),Object(a.delay)(re,5e3,"")}))}catch(e){console.log(e),Object(a.delay)(re,5e3,""),ft(!1)}}}(e)},defaultEditorLoading:st})},activeEditor:m}),J,Object(r.createElement)(De,{templateFilterCheck:S,templateCards:g,showBuildFromScratch:D,importBuildFromScratch:function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(G&&!r)ct(ze(ze({},G),{},{onConfirm:function(){return e(t,n,!0)},onCancel:function(){return ct({status:!1})}}));else{if(Ye)return!1;"upsell"===d&&Ot("yes")?nt(!0):(it({id:t,isBuildFromScratch:!0,template:{name:v[d]}}),$?$():mt(!0),ne&&_e({id:t}),ne||Ve(!0))}},activeTemplateGroup:d,activeEditor:m,onPreview:function(e,t,n){e.preventDefault(),_e({id:t,template:n,activeStep:n.steps?n.steps[0].type:""}),n.group_type?Ce(Object.keys(n.group_type)[0]):0!==y&&"funnel"!==$e||"optin"!==d&&"wc_checkout"!==d||Ce("optin"===d?"inline":"wc_checkout"===d&&"1"),He(!0),it({id:t,template:n,activeStep:n.steps?n.steps[0].type:""}),"upsell"===d&&0===y?se({},"".concat(x,"/").concat(d,"/").concat(m,"/preview/").concat(t)):0===y?se({},"".concat(x,"/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===$e&&se({},"".concat(x,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)),he(n.steps[0].type)):se({},"".concat(x,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t))},funnelId:y}))),Object(r.createElement)(T.a,{className:"bwf-admin-modal-squeezy "+at.className,isLoading:at.loading,successMessage:at.success,errorMessage:at.error,isOpen:at.status,autoHide:8e3,content:at.content,confirmText:at.confirmText,confirmButtonText:at.confirmButtonText,cancelButtonText:at.cancelButtonText,onConfirm:at.onConfirm,onCancel:at.onCancel,modalTitle:at.modalTitle,disableConfirm:at.disableConfirm,closeIcon:at.closeIcon,onRequestClose:function(){return ct({status:!1})}}),Object(r.createElement)(N.a,{isOpen:tt,onRequestClose:function(){return nt(!1)},modalContent:L({FB_PRO_STATUS:vt,funnelId:y,importType:$e,activeTemplateGroup:d})}),ce&&(0===y?Object(r.createElement)(de.a,{onCloseModal:function(){le(!1)},isWorking:Ye,onComplete:function(e){ot.isBuildFromScratch?function(e){var n={funnel_name:e,template:"scratch"};Object(A.y)()&&(n.builder=m,n.default_step="yes",n.template=null==ot?void 0:ot.id),Xe({id:"scratch",group:d,filter:t});try{u()({method:"POST",data:n,path:Object(A.g)("/woofunnels-admin/".concat(M))}).then((function(e){if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id,n=Object.create({});Object(a.isEmpty)(te.funnels)?n.funnels=[t]:1===te.funnels.length&&(n.funnels=[].concat(Le(te.funnels),[t])),ee(n),"funnels"===M?(delete X.group,se({},"/funnels/".concat(t),X)):k({funnel_id:e.funnel.id})}else!1===e.status&&(ct({status:!0,modalTitle:Object(s.__)("Import Template"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),le(!1),Xe({}))}))}catch(e){}}(e):bt(ot.id,e)},modalTitle:z.title}):Object(r.createElement)(ye,{onCloseModal:function(){le(!1)},isWorking:Ye,activeTemplateGroup:d,templateGroup:v,showCloneOption:ot.isBuildFromScratch,onComplete:function(e,t){bt(Ae.id,e,t)}}))),(Ue||Ze)&&Object(r.createElement)(me,{isOpen:Ze||Ue,onRequestClose:function(){He(!1),Ce(!1),X.group&&(delete X.group,se({},Object(f.g)(),X))},importTemplate:bt,templateGroup:v,activeGroup:d,templateID:ot.id,template:ot.template,activeEditor:m,importing:Ye,templateList:i,filters:c,templates:i,hasPRO:Ot,checkEditor:$||mt,previewData:E,isTemplateLoading:p,activeFilter:t,setPreviewErr:ue,parentRoute:x,funnelId:y,importType:$e,updateQueryString:se,previewCustomizeEnabled:Y,urlDependency:Q}))};We.prototype={filters:l.a.object.isRequired,templates:l.a.object.isRequired,editors:l.a.object.isRequired,defaultBuilder:l.a.object.isRequired,templateLoading:l.a.func.isRequired,activeTemplateGroup:l.a.string.isRequired,templateGroup:l.a.object.isRequired};var $e=We},669:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n(1),l=n(6),o=n(11),i=n.n(o),u=n(7),s=(n(835),n(9)),f=n.n(s);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.onSearch,n=e.isLoading,o=e.items,i=e.onItemClick,u=e.error,s=e.blurText,f=p(Object(r.useState)(""),2),m=f[0],b=f[1],d=p(Object(r.useState)(!1),2),O=d[0],v=d[1],j=Object(r.useRef)(null),y=s||"",_=Object(r.useRef)();return Object(r.useEffect)((function(){jQuery("body").on("click",(function(e){jQuery(_.current).find(e.target).length>0?v(!0):v(!1)}))}),[]),Object(r.createElement)("div",{className:"bwf-select-auto-box",ref:_},n&&Object(r.createElement)(a.Spinner,null),Object(r.createElement)(a.TextControl,{autoComplete:"off",value:O?m:y,onChange:function(e){return b(n=e),j.current&&clearTimeout(j.current),void(j.current=setTimeout((function(){return t(n)}),500));var n},placeholder:Object(c.__)("Type to search","funnel-builder")}),(!Object(l.isArray)(o)||!!u)&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(l.isArray)(o)&&o.length>0&&O&&Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},Object(r.createElement)("ul",null,o.map((function(e){return Object(r.createElement)("li",{key:e.key},Object(r.createElement)("div",{onClick:function(t){return function(e,t){i(e),v(!1),t.preventDefault()}(e,t)}},e.value))})))))};b.defaultProps={onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null},b.propTypes={onSearch:f.a.func,isLoading:f.a.bool,items:f.a.arrayOf(f.a.shape({key:f.a.oneOfType([f.a.number,f.a.string]).isRequired,value:f.a.string.isRequired})),onItemClick:f.a.func,onChange:f.a.func,error:f.a.any};var d=b;function O(e,t,n,r,a,c,l){try{var o=e[c](l),i=o.value}catch(e){return void n(e)}o.done?t(i):Promise.resolve(i).then(r,a)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,a,c=[],l=!0,o=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(c.push(r.value),!t||c.length!==t);l=!0);}catch(e){o=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(o)throw a}}return c}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=v(Object(r.useState)(!1),2),n=t[0],o=t[1],s=e.step,f=s.type,p=s.title,m=s.is_substep,b=void 0!==m&&m,j=e.onStepSelected,y=v(Object(r.useState)(!1),2),_=y[0],h=y[1],w=v(Object(r.useState)([]),2),g=w[0],E=w[1],k=v(Object(r.useState)(!1),2),S=k[0],C=k[1],N=v(Object(r.useState)(null),2),T=N[0],P=N[1],I=S&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(a.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(c.__)("".concat(p," not found"),"funnel-builder")))),A=function(){var e,t=(e=regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(l.isEmpty)(t)){e.next=4;break}return C(!1),E([]),e.abrupt("return");case 4:return h(!0),e.prev=5,n=b&&!0===b?"&is_substep=true":"",e.next=9,i()({path:Object(u.g)("/woofunnels-admin/funnels/step/search/?s=".concat(t,"&type=").concat(f).concat(n))});case 9:r=e.sent,Object(l.isArray)(r)&&r.length>0?E(r):E([]),Object(l.isArray)(r)&&r.length>0?C(!1):C(!0),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(5),E([]),C(!0);case 18:h(!1);case 19:case"end":return e.stop()}}),e,null,[[5,14]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){O(c,r,a,l,o,"next",e)}function o(e){O(c,r,a,l,o,"throw",e)}l(void 0)}))});return function(e){return t.apply(this,arguments)}}(),x=g.map((function(e){return{key:e.id,value:e.name}})),R=T&&T.hasOwnProperty("value")?Object(c.__)("Selected ".concat(p,": "),"funnel-builder")+T.value:"";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.CheckboxControl,{label:Object(c.__)("Clone from another","funnel-builder")+" "+(p?Object(l.capitalize)(p).replace("pages","page"):Object(c.__)("step","funnel-builder")),value:n,checked:n,onChange:function(){o(!n),j({step:T,copyFrom:!n})}}),n&&Object(r.createElement)(d,{onSearch:function(e){return A(e)},isLoading:_,items:x,error:I,onItemClick:function(e){P(e),j({step:e,copyFrom:n})},blurText:R}))}},835:function(e,t,n){},836:function(e,t,n){},837:function(e,t,n){},838:function(e,t,n){},839:function(e,t,n){},840:function(e,t,n){},841:function(e,t,n){}}]);